(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+F4d":function(t,e,n){"use strict";var i=n("vxoT");e.a=i.a},"+UTG":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dialog-bar"},[n("div",{staticClass:"close-but",on:{click:t.doCancel}},[n("mu-icon-button",{attrs:{icon:"close"}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.group.name,expression:"group.name != undefined"}],staticClass:"title",attrs:{title:t.group.name},on:{click:t.doEditTitle}},[t._v("\n    "+t._s(t.group.name)+"\n    "),n("mu-icon-button",{attrs:{icon:"mode_edit"},on:{click:t.doEditTitle}})],1),t._v(" "),n("span",{staticClass:"text"},[t._v("点击编辑分组中的页面")]),t._v(" "),n("mu-raised-button",{staticClass:"ok",attrs:{label:this.$i18n("确定"),backgroundColor:"rgb(80, 227, 194)"},on:{click:t.doOk}}),t._v(" "),n("mu-flat-button",{staticClass:"demo-flat-button",attrs:{label:this.$i18n("取消"),color:"#fff"},on:{click:t.doCancel}}),t._v(" "),n("mu-flat-button",{staticClass:"cancel-select-all",attrs:{label:t.$i18n("取消全部选中")},on:{click:t.cancelAll}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.group.id,expression:"group.id"}],staticClass:"delete-but",on:{click:t.doDelete}},[n("mu-icon-button",{attrs:{icon:"delete"}})],1)],1)},a=[];i._withStripped=!0},"+m4y":function(t,e,n){"use strict";var i=n("C7YT"),a=n("H9qX"),o=(n("sFVj"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/navTree/navTree.vue",e.a=r.exports},"+pPf":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"check-wrapper"},[n("lan-tree-list",{attrs:{list:t.userInfoSort},scopedSlots:t._u([{key:"default",fn:function(e){return[n("lan-tree-list-item",{attrs:{item:e.item,allowDrag:!1,index:e.index,defaultExpanded:t.defaultOpen}},[e.item.children?n("member-depart",{attrs:{partInfo:e.item,checkAllText:t.checkAllText}}):n("member-info",{attrs:{userItem:e.item}})],1)]}}])})],1)},a=[];i._withStripped=!0},"/6rT":function(t,e,n){"use strict";var i=n("2lgr");n.n(i).a},"/807":function(t,e,n){"use strict";(function(t){var i=n("lSNA"),a=n.n(i),o=n("L2JU"),r=n("aNFl"),s=n("aWKc");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var u=null;e.a={components:{Waterfall:r.a,WaterfallSlot:s.a},data:function(){return{pid:localStorage.pid,show:!1,keywords:"",last:"",delShow:!1,showLoading:!1,imgs:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(o.e)("team",["team_id"])),created:function(){},mounted:function(){this.$nextTick((function(){this.$route.query.pid?this.pid=this.$route.query.pid:this.pid=localStorage.pid,t("#wrap").addClass("search_blur"),t(".top").addClass("search_blur"),t(".common_tip_bar").hide(),t("#search").fadeTo(100,1),t("#search_input").focus();var e=this.$route.query.val;this.$route.query.val&&this.search("",e)}))},methods:{closeSearch:function(){this.$emit("closeSearch")},scrollPage:function(e){var n=t("#search");if(e.deltaY.toString().length>8)if(e.shiftKey){var i=n.scrollLeft();n.scrollLeft(i+e.deltaX)}else{var a=n.scrollTop();n.scrollTop(a+e.deltaY)}else{var o=n.scrollLeft(),r=n.scrollTop();n.scrollLeft(o+e.deltaX),n.scrollTop(r+e.deltaY)}e.preventDefault()},delAll:function(){this.keywords="",this.search()},returnBoard:function(t){var e=this;clearTimeout(u),u=setTimeout((function(){e.$emit("closeWithFocus",{id:t})}),300)},openImage:function(t){if(clearTimeout(u),console.log("[xxx openImage] ",t),"card"===t.type)return this.returnBoard(t.id),!1;this.$emit("closeWithEnter",{id:t.id,type:t.type,url:t.url})},search:function(e,n){var i,a=this,o=a.keywords,r="".concat(baseUrl,"/project/search_image");try{i=new RegExp(o,"gi")}catch(t){console.info(t)}var s="<span style='color:#0092FE'>"+o+"</span>",c=null;e&&(this.last=e.timeStamp,c=e.timeStamp),n&&(this.keywords=n),""===this.keywords?(this.show=!1,this.delShow=!1,this.imgs=[]):this.delShow=!0,setTimeout((function(){a.last-c==0&&(a.keywords?(a.showLoading=!0,t.ajax({url:r,data:{pid:a.$route.query.pid||localStorage.pid,keyword:o,team_id:a.team_id},type:"GET",success:function(t){a.imgs=[],t.result&&(t.result.forEach((function(t){if(t.position_x||t.position_y){if("image"==t.type){var e=t.width/190;t.height=t.height/e+20,t.name=t.name.replace(i,s)}else t.height=190;t.width=190,a.imgs.push(t)}})),a.$nextTick((function(){a.showLoading=!1})),a.show=!0)},error:function(t,e,n){console.log("请求失败","状态:",e,"错误信息:",n)}})):a.imgs=[])}),500)}}}}).call(this,n("EVdn"))},"/nvm":function(t,e,n){"use strict";e.a={name:"MemberDepart",props:{partInfo:{type:Object,default:{}},checkAllText:{type:String,default:""}},data:function(){return{checkText:this.$i18n("全选"),selected:!1}},computed:{children:function(){return this.partInfo.children},isSelectAll:function(){return Array.isArray(this.children)&&this.children.every((function(t){return t.selected}))},disabled:function(){return Array.isArray(this.children)&&this.children.every((function(t){return t.forbidden}))}},watch:{isSelectAll:{handler:function(t){this.selected=t},immediate:!0}},methods:{handleSelectAll:function(t){this.selectChildren(t)},selectChildren:function(t){t?(this.partInfo.children.forEach((function(t){t.forbidden||(t.selected=!0)})),this.selected=!0,this.$root.eventHub.$emit("tencentStatistics")):(this.disabled||this.partInfo.children.forEach((function(t){t.forbidden||(t.selected=!1)})),this.selected=!1)}}}},"/tHR":function(t,e,n){"use strict";var i=n("+pPf");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},"0bfz":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".line-box {\n  position: absolute;\n  pointer-events: none;\n  /*transition: all .3s;*/\n  /*outline:2px dashed rgba(0, 0, 0, 0.12);*/\n  /*background: rgba(255, 255, 255, 0.9);*/\n}\n.line-box:not(.ghost) .line-body-ghost,\n.line-box:not(.ghost) .line-body {\n  pointer-events: auto;\n}\n.line-box path.line-body {\n  stroke-width: 1px;\n  stroke: #acacac;\n  /*marker-end: url(#Triangle);*/\n  /*marker-start: url(#markerCircle);*/\n}\n.line-box .line-svg-path.selected path.line-body,\n.line-box .line-svg-path.highlight.selected path.line-body {\n  stroke: #2878ff;\n  stroke-width: 5px;\n  marker-end: url(#TriangleSelect);\n}\n.line-box .line-svg-path.selected:hover path.line-body,\n.line-box .line-svg-path.highlight.selected:hover path.line-body {\n  stroke: #2878ff;\n  marker-end: url(#TriangleSelect);\n}\n.line-box .line-svg-path.highlight path.line-body {\n  stroke: #7eaeff;\n  marker-end: url(#TriangleHigh);\n}\n.line-box path.line-body-ghost {\n  stroke-width: 40px;\n  stroke: rgba(0, 0, 0, 0);\n}\n.line-box .line-svg-path:hover path.line-body {\n  stroke-width: 5px;\n  stroke: #7eaeff;\n  marker-end: url(#TriangleHover);\n}\n.line-box svg {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}",""])},"1qor":function(t,e,n){t.exports=n.p+"imgs/ic_align_verticallyc451c9a6.svg"},"2lgr":function(t,e,n){var i=n("0bfz");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("06b5503a",i,!1,{})},"39r4":function(t,e,n){"use strict";var i=n("/807");e.a=i.a},"3Q6b":function(t,e,n){"use strict";var i=n("eudr");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},"3QP6":function(t,e,n){"use strict";var i=n("Ra03"),a=n("gIrO"),o=(n("PBJm"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/navTree/components/menu-base.vue",e.a=r.exports},"42Q2":function(t,e,n){var i=n("m/2V");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("4384dfa1",i,!1,{})},"49rI":function(t,e,n){"use strict";var i=n("wIw1"),a=n("+F4d"),o=(n("S5sg"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/add-group.vue",e.a=r.exports},"4PHe":function(t,e,n){"use strict";var i=n("zSBB");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},"4chx":function(t,e,n){"use strict";var i=n("zPhe");n.n(i).a},"4dd+":function(t,e,n){"use strict";var i=n("L6Rp");e.a=i.a},"4hpX":function(t,e,n){"use strict";var i=n("RqPi");n.n(i).a},"4i++":function(t,e,n){"use strict";var i=n("4rKC");e.a=i.a},"4jZ1":function(t,e,n){t.exports=n.p+"imgs/ic_distribute_vertically3ca71af6.svg"},"4nN8":function(t,e,n){"use strict";var i=n("hFyy");n.n(i).a},"4rKC":function(t,e,n){"use strict";var i=n("RIqP"),a=n.n(i);function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var s=n("dFy5").a;e.a={inject:["stageFn"],props:{selectLen:{type:Number,default:0}},data:function(){return{}},computed:{stage:function(){return this.stageFn()}},mounted:function(){},beforeDestroy:function(){},methods:{doFun:function(t){var e=this,n=this.stage.canvas,i=[],o=n.findObjectsBySubType("imageObject"),r=n.findObjectsBySubType("textObject");[].concat(a()(o),a()(r)).filter((function(t){return t.lanhu_isActive})).forEach((function(t){i.push(e.calcObjectBoundary(t))})),this[t]&&(this.stage.recordMoveTargetPosition(),this[t](i),this.stage.cachePosition(),this.stage.activeSection&&this.stage.updateGroup(this.stage.activeSection.id),n.lanhu_dragMove.reRenderDom=!0)},calcObjectBoundary:function(t){return{x:t.left,y:t.top,w:t.aCoords.br.x-t.aCoords.bl.x,h:t.aCoords.br.y-t.aCoords.tr.y,object:t}},align_left:function(t){var e=s.Rect.getXywhsRange(t),n=s.Rect.xywh2rltb(e).left;this.updateAndRequest(t,(function(t){return{x:n,y:t.y,collectReq:!0}}))},align_right:function(t){var e=s.Rect.getXywhsRange(t),n=s.Rect.xywh2rltb(e).right;this.updateAndRequest(t,(function(t){return{x:n-t.w,y:t.y,collectReq:!0}}))},align_top:function(t){var e=s.Rect.getXywhsRange(t),n=s.Rect.xywh2rltb(e).top;this.updateAndRequest(t,(function(t){return{x:t.x,y:n,collectReq:!0}}))},align_bottom:function(t){var e=s.Rect.getXywhsRange(t),n=s.Rect.xywh2rltb(e).bottom;this.updateAndRequest(t,(function(t){return{x:t.x,y:n-t.h,collectReq:!0}}))},align_horizontally:function(t){var e=s.Rect.getXywhsRange(t),n=e.x+e.w/2;this.updateAndRequest(t,(function(t){return{x:n-t.w/2,y:t.y,collectReq:!0}}))},align_vertically:function(t){var e=s.Rect.getXywhsRange(t),n=e.y+e.h/2;this.updateAndRequest(t,(function(t){return{x:t.x,y:n-t.h/2,collectReq:!0}}))},distribute_horizontally:function(t){t.sort((function(t,e){return s.Rect.xywh2rltb(t).right-s.Rect.xywh2rltb(e).right}));var e,n=s.Rect.getXywhsRange(t),i=0,a=o(t);try{for(a.s();!(e=a.n()).done;){i+=e.value.w}}catch(t){a.e(t)}finally{a.f()}var r=(n.w-i)/(t.length-1),c=t.reduce((function(t,e,n,i){var a,o=e.object,s=[];n&&n!==i.length-1&&(s=null===(a=o.lanhu_shape)||void 0===a?void 0:a.update(t.pos,e.y,!0));return{reqs:t.reqs.concat(s),pos:t.pos+e.w+r}}),{reqs:[],pos:t[0].x}).reqs;c.length&&this.stage.updateImagesPos(c)},distribute_vertically:function(t){t.sort((function(t,e){return s.Rect.xywh2rltb(t).bottom-s.Rect.xywh2rltb(e).bottom}));var e,n=s.Rect.getXywhsRange(t),i=0,a=o(t);try{for(a.s();!(e=a.n()).done;){i+=e.value.h}}catch(t){a.e(t)}finally{a.f()}var r=(n.h-i)/(t.length-1),c=t.reduce((function(t,e,n,i){var a,o=e.object,s=[];n&&n!==i.length-1&&(s=null===(a=o.lanhu_shape)||void 0===a?void 0:a.update(e.x,t.pos,!0));return{reqs:t.reqs.concat(s),pos:t.pos+e.h+r}}),{reqs:[],pos:t[0].y}).reqs;c.length&&this.stage.updateImagesPos(c)},updateAndRequest:function(t,e){var n=t.reduce((function(t,n){var i,a=n.object,o=e(n),r=o.x,s=o.y,c=o.collectReq,u=null==a||null===(i=a.lanhu_shape)||void 0===i?void 0:i.update(r,s,c);return t.concat(u)}),[]);n.length&&this.stage.updateImagesPos(n)}}}},"5+ou":function(t,e,n){"use strict";var i=n("PbO0"),a=n("X3MU"),o=(n("Qq/H"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/member-selector/components/member-depart.vue",e.a=r.exports},"5/f7":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"z-index":"1"},on:{click:function(e){return e.stopPropagation(),t.hiddenALL(e)}}},[n("mu-paper",{staticClass:"member-notification-background",attrs:{"z-depth":1}},[n("p",{staticClass:"member-notification-notifications-title"},[t._v(t._s(t.$i18n("通知项目成员")))]),t._v(" "),n("p",{staticClass:"member-notification-sub-text"},[t._v("\n      "+t._s(t.$i18n("以微信及邮件进行通知"))),n("span",{staticClass:"icon-help",on:{click:t.openHelp}})]),t._v(" "),n("div",{staticClass:"member-notification-close-icon",on:{click:function(e){return e.stopPropagation(),t.close(e)}}},[n("mu-icon-button",[n("div",{staticClass:"img",attrs:{slot:"default"},slot:"default"})])],1),t._v(" "),n("i",{staticClass:"material-icons member-notification-search-icon",on:{click:function(e){return e.stopPropagation(),t.searchClickEvent(e)}}},[t._v("search")]),t._v(" "),n("div",{staticClass:"member-notification-search-textfield"},[n("mu-text-field",{ref:"searchDom",style:t.showSearchTextfield?"width: 360px":"width: 0;",attrs:{underlineFocusClass:"member-notification-underline-focus"},on:{input:t.searchInput,focus:t.searchOnFocus,blur:t.searchOnBlur},model:{value:t.inputSearchData,callback:function(e){t.inputSearchData=e},expression:"inputSearchData"}})],1),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.showSearchTextfield,expression:"showSearchTextfield"}],staticClass:"material-icons search-close",on:{click:t.searchCloseEvent}},[t._v("close")]),t._v(" "),n("mu-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.showSearchTextfield&&""!=t.inputSearchData,expression:"showSearchTextfield && inputSearchData != ''"}],staticClass:"member-notification-check-box",attrs:{label:t.$i18n("全选")},model:{value:t.toSelectSearchAll,callback:function(e){t.toSelectSearchAll=e},expression:"toSelectSearchAll"}}),t._v(" "),n("mu-checkbox",{directives:[{name:"show",rawName:"v-show",value:!t.showSearchTextfield||""==t.inputSearchData,expression:"!showSearchTextfield || inputSearchData == ''"}],staticClass:"member-notification-check-box",attrs:{label:t.$i18n("全选")},model:{value:t.toSelectAll,callback:function(e){t.toSelectAll=e},expression:"toSelectAll"}}),t._v(" "),n("member-selector",{directives:[{name:"show",rawName:"v-show",value:t.showMemberList&&""==t.inputSearchData,expression:"showMemberList && inputSearchData == ''"}],staticClass:"member-notification-member-selector",attrs:{"user-info":t.memberList,"check-all-text":t.$i18n("全选")}}),t._v(" "),n("member-selector",{directives:[{name:"show",rawName:"v-show",value:t.showMemberList&&""!=t.inputSearchData,expression:"showMemberList && inputSearchData != ''"}],staticClass:"member-notification-member-selector",attrs:{"user-info":t.searchList,"check-all-text":t.$i18n("全选")}}),t._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:t.inputSearchData&&!t.searchList.length,expression:"inputSearchData && !searchList.length"}],staticClass:"member-notification-no-result"},[t._v("\n      "+t._s(t.$i18n("搜索结果为空"))+"\n    ")]),t._v(" "),n("div",{staticClass:"member-notification-textfield",on:{click:function(e){return e.stopPropagation(),t.textfieldClick(e)}}},[n("mu-text-field",{ref:"textfield",staticStyle:{width:"560px"},attrs:{hintText:t.placeholderString,id:"textfield-id",underlineFocusClass:"member-notification-underline-focus"},on:{click:function(e){return e.stopPropagation(),t.textfieldClick(e)}},model:{value:t.inputData,callback:function(e){t.inputData=e},expression:"inputData"}}),n("br")],1),t._v(" "),n("i",{staticClass:"material-icons member-notification-arrow",on:{click:function(e){return e.stopPropagation(),t.textfieldArrowClick(e)}}},[t._v("arrow_drop_down")]),t._v(" "),n("mu-paper",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"member-notification-list"},[n("ul",{staticClass:"member-notification-list-container"},t._l(t.presetString,(function(e,i){return n("li",{key:i,staticClass:"member-notification-list-item",on:{click:function(n){return n.stopPropagation(),t.textfieldItemClick(e,i)}}},[t._v("\n          "+t._s(e)+"\n        ")])})),0)]),t._v(" "),n("mu-raised-button",{staticClass:"member-notification-sendButton",attrs:{label:t.$i18n("发送"),disabled:""==t.inputData||0==t.selected.length},on:{click:function(e){return e.stopPropagation(),t.sendEvent(e)}}})],1)],1)},a=[];i._withStripped=!0},"50Re":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("svg",[e("marker",{attrs:{id:"Triangle",viewBox:"0 0 10 14",refX:"4",refY:"7",markerWidth:"5",markerHeight:"5",fill:"#acacac",orient:"auto"}},[e("path",{staticStyle:{"stroke-dasharray":"0, 0"},attrs:{d:"M 0 0 L 10 7 L 0 14 z"}})]),this._v(" "),e("marker",{attrs:{id:"TriangleSelect",viewBox:"0 0 10 14",refX:"4",refY:"7",markerWidth:"5",markerHeight:"5",fill:"#2878FF",orient:"auto"}},[e("path",{staticStyle:{"stroke-dasharray":"0, 0"},attrs:{d:"M 0 0 L 10 7 L 0 14 z"}})])])},a=[];i._withStripped=!0},"57zA":function(t,e,n){var i=n("ftpb");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("65532d6c",i,!1,{})},"59bk":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.showMark&&this.lastMark?e("div",{staticClass:"newLineTextGuide ",style:{left:this.posit.left+"px",top:this.posit.top+"px"}},[e("div",{staticClass:"guideTrangle"},[this._v("\n      双击连线可添加连线说明\n      "),e("div",{class:"trangleContent "+this.posit.direct})])]):this._e()])},a=[];i._withStripped=!0},"5FKK":function(t,e,n){"use strict";var i=n("3Q6b"),a=n("I4Yq"),o=(n("4chx"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,"0d614e33",null);r.options.__file="src/features/navTree/components/menu-section-more-settings-editor.vue",e.a=r.exports},"5brj":function(t,e,n){"use strict";var i=n("O5/F");e.a=i.a},"6+IX":function(t,e,n){"use strict";var i=n("B029");e.a=i.a},"6RpB":function(t,e,n){"use strict";var i=n("A5au");e.a=i.a},7329:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar-wrapp"},[t.userItem.avatar?n("img",{staticClass:"avatar",attrs:{src:t.userItem.avatar}}):n("div",{staticClass:"avatar text-avatar",style:{"background-color":t.getAvatarColor(t.userItem.color)}},[t._v("\n    "+t._s(t._f("nameTail")(t.userItem.name))+"\n  ")])])},a=[];i._withStripped=!0},"7KhD":function(t,e,n){"use strict";var i=n("Ylyl");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},"7UYU":function(t,e,n){"use strict";var i,a=n("o0o1"),o=n.n(a),r=n("yXPU"),s=n.n(r),c=n("lwsE"),u=n.n(c),l=n("W8MJ"),d=n.n(l),p=n("U+yc"),h=n.n(p),f=n("TblH"),m=n("mbFJ"),g=(i=function(){function t(){u()(this,t)}var e;return d()(t,[{key:"addLineText",value:(e=s()(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post(m.a.addLineText(),e);case 2:if(200!==(n=t.sent).status||!n.data){t.next=5;break}return t.abrupt("return",n.data.result);case 5:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),t}(),h()(i.prototype,"addLineText",[f.a],Object.getOwnPropertyDescriptor(i.prototype,"addLineText"),i.prototype),i);e.a=g},"813O":function(t,e,n){"use strict";var i,a,o,r,s,c,u=n("o0o1"),l=n.n(u),d=n("yXPU"),p=n.n(d),h=n("GRZH"),f=n("lJYw"),m=n("5FKK"),g=n("8Uuu");e.a={name:"NavTree",components:{Tree:h.a,MenuSectionMoreSettings:m.a,MenuSectionAddSettings:g.a,AutoDrag:f.a},inject:["stageFn","groupModelFn","AddNewGroup","editGroup","addGroupCancel","stageSelectImage","stageTargetFocus","stageSelectGroup","stageGroupUpdateData","getCachedMatrix","setFullView","setZoomFromLocal","updateCacheMatrix"],props:{},data:function(){return{listOpen:!0,totalSelected:!1,clickTimer:null,isDbClick:!1,selectedImage:"",selectTypeIsGroup:!1}},computed:{groupModel:function(){return this.groupModelFn()},treeList:function(){var t;return null===(t=this.groupModel)||void 0===t?void 0:t.itemTree},images:function(){var t;return Object.values(null===(t=this.groupModel)||void 0===t?void 0:t.images)},totalNum:function(){var t,e;return null===(t=this.groupModel)||void 0===t||null===(e=t.imageList)||void 0===e?void 0:e.length},stage:function(){return this.stageFn()}},mounted:function(){},methods:{userIsGuest:function(){return window._userIsGuest},doExpandList:function(){this.listOpen=!this.listOpen},imageName:function(t,e){return t.name?t.name:"card"!==t.type||t.name?void 0:"设计图备注"},setDefaultSelectGroup:function(t){var e=this.groupModel.items[t];if(e){var n,i=null==e?void 0:e.parentId;if(i){var a=this.$refs.navTree.$refs.baseTree.getNode(i);a&&this.expandNodes(a)}this.selectGroup(e,!0),(null==e||null===(n=e.subImageIds)||void 0===n?void 0:n.length)&&this.stage.canvas.groupFocusByData(e.subImageIds)}},expandNodes:function(t){t.expanded=!0,t.parent&&this.expandNodes(t.parent)},selectTotal:function(){this.totalSelected=!0,this.selectGroup(null),this.selectTypeIsGroup=!1,this.$refs.navTree&&(this.$refs.navTree.$refs.baseTree.setCurrentKey(null),this.selectedImage="")},openAddMenu:function(t,e){this.$refs.addSettings.nowSection=null==e?void 0:e.data,this.$refs.addSettings.open(t.target),this.$refs.moreSettings.close()},openMoreMenu:function(t,e){this.doOpenSectionMenu(t,(null==e?void 0:e.data)||null)},doOpenSectionMenu:function(t,e){t.stopPropagation(),this.$refs.addSettings.close(),this.$refs.moreSettings.nowSection=e,this.$refs.moreSettings.open(t.target),(null==e?void 0:e.id)&&localStorage.setItem("project_ActiveSectionShare",e.id)},nodeDbClick:function(t,e,n){var i=this;this.isDbClick=!0,this.stage.targetFocus(null==t?void 0:t.id),setTimeout((function(){i.isDbClick=!1}),200),this.totalSelected=!1},nodeClick:function(t,e,n){t.groupType?(this.selectGroup(t),this.selectTypeIsGroup=!0):(this.selectImage(t),this.selectTypeIsGroup=!1,this.selectedImage=t.id),this.totalSelected=!1},menuCreateGroup:(c=p()(l.a.mark((function t(e){var n,i,a,o=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],!window._userIsGuest){t.next=3;break}return t.abrupt("return");case 3:if(Array.isArray(e)){t.next=5;break}return t.abrupt("return");case 5:return this.stage.setStageModifyStatus(!0),t.next=8,window.LanhuDialog.textInput(this.$i18n("添加分组"),this.$i18n("分组名称"));case 8:if(i=t.sent,this.stage.setStageModifyStatus(!1),!i){t.next=19;break}return a={id:uuid.v4(),name:i.replace(/^\s*/,""),images:e},t.next=14,this.groupModel.createGroup(a);case 14:if(this.groupModel.activeItem=this.groupModel.items[a.id],this.selectGroup(this.groupModel.activeItem,!0),!n){t.next=19;break}return t.next=19,this.groupModel.moveImgToGroup(a.id,{moveImages:e});case 19:this.addGroupCancel();case 20:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)}),createGroup:(s=p()(l.a.mark((function t(e){var n,i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window._userIsGuest){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.AddNewGroup();case 4:if(n=t.sent,Array.isArray(n)){t.next=7;break}return t.abrupt("return");case 7:return this.stage.setStageModifyStatus(!0),t.next=10,window.LanhuDialog.textInput(this.$i18n("添加分组"),this.$i18n("分组名称"));case 10:if(i=t.sent,this.stage.setStageModifyStatus(!1),!i){t.next=19;break}return a={id:uuid.v4(),name:i.replace(/^\s*/,""),images:n},e&&(a.parent_id=e),t.next=17,this.groupModel.createGroup(a);case 17:this.groupModel.activeItem=this.groupModel.items[a.id],this.selectGroup(this.groupModel.activeItem,!0);case 19:this.addGroupCancel();case 20:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)}),editSection:(r=p()(l.a.mark((function t(e){var n,i,a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.groupModel.items[e],i=this.groupModel.getGroupChildrenIds(n),a=i.imageIds,t.next=4,this.editGroup(n,a);case 4:if(!(o=t.sent)){t.next=10;break}return t.next=8,this.groupModel.editGroupImages(e,o.val.ids);case 8:this.selectGroup(n,!0),this.$emit("updateGroupDone");case 10:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),selectGroup:function(t,e){var n;t&&"noGroup"!==(null==t?void 0:t.id)?(e&&(this.$refs.navTree.$refs.baseTree.setCurrentKey(null==t?void 0:t.uuid),this.totalSelected=!1),this.groupModel.activeItem=t,this.stage.activeSection=t,localStorage["_project_ActiveSectionSave_"+this.$route.query.pid]='"'.concat(t.id,'"'),this.stage.selectGroup(t.id)):(this.stage.activeSection=null,delete localStorage["_project_ActiveSectionSave_"+this.$route.query.pid],t?this.groupModel.activeItem=t:this.stage.selectGroup(null)),0===(null==t||null===(n=t.subImageIds)||void 0===n?void 0:n.length)&&window.LanhuDialog.toast(this.$i18n("😶 该分组中没有页面哦"))},selectImage:function(t){var e=this;clearTimeout(this.clickTimer),this.clickTimer=setTimeout((function(){e.isDbClick||e.stage.selectImage(t.id,(function(t){e.stage.canvas.isInViewport(t)||(e.stage.canvas.moveToVptCenter(t),e.stage.canvas.setViewPortHighDefinitionUrls())}))}),200)},cancelSelectImage:function(t){this.selectTypeIsGroup||1===(null==t?void 0:t.length)&&t[0]===this.selectedImage||this.$refs.navTree&&(this.$refs.navTree.$refs.baseTree.setCurrentKey(null),this.selectedImage="")},dragEnd:function(t,e,n,i){if("none"!==n){var a,o,r,s,c,u,l,d,p,h,f,m="inner"===n?null==e||null===(a=e.data)||void 0===a?void 0:a.id:(null==e||null===(o=e.data)||void 0===o?void 0:o.parentId)||(null==e||null===(r=e.parent)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.id),g=null,v=null,b=null,x=t.data.id;if("inner"!==n)if(m)g=this.groupModel.items[m].children.findIndex((function(t){return t.id===x})),v=(null===(u=this.groupModel.items[m])||void 0===u||null===(l=u.children[g-1])||void 0===l?void 0:l.id)||null,b=(null===(d=this.groupModel.items[m])||void 0===d||null===(p=d.children[g+1])||void 0===p?void 0:p.id)||null;else g=this.groupModel.itemTree.findIndex((function(t){return t.id===x})),v=(null===(h=this.groupModel.itemTree[g-1])||void 0===h?void 0:h.id)||null,b=(null===(f=this.groupModel.itemTree[g+1])||void 0===f?void 0:f.id)||null;var w=t.lanhu_parentId;(null===(c=t.data)||void 0===c?void 0:c.groupType)?(this.groupModel.images[v]&&(v=null),this.groupModel.images[b]&&(b=null),this.moveGroup(t,m,v,b),this.count(w,m,"moveGroup")):(this.groupModel.items[v]&&(v=null),this.groupModel.items[b]&&(b=null),this.moveImage(t,m,v,b),this.count(w,m,"moveImage"))}},moveImage:(o=p()(l.a.mark((function t(e,n,i,a){var o,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.lanhu_parentId,e.lanhu_parentId=n,r={images:[{fromGroupId:"noGroup"===o?null:o,imageIds:[e.data.id]}],targetSectorId:n,preImageId:i,nextImageId:a},t.next=5,this.groupModel.request.moveImage(r);case 5:this.groupModel.updateGroupSub(o),this.groupModel.updateGroupSub(n);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return o.apply(this,arguments)}),moveGroup:(a=p()(l.a.mark((function t(e,n,i,a){var o,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.lanhu_parentId,r="noGroup"===a?null:a,i||r||n){t.next=4;break}return t.abrupt("return");case 4:if(e.data.id!==n){t.next=7;break}return console.error("拖动分组失败,selfId:".concat(e.data.id,",targetId:").concat(n)),t.abrupt("return");case 7:return e.lanhu_parentId=n,e.data.parentId=n,s={preGroupId:i,nextGroupId:r,targetGroupId:n,mvGroupId:e.data.id},t.next=12,this.groupModel.request.moveGroups(s);case 12:"00000"===(null==(c=t.sent)?void 0:c.code)&&(e.data.order=c.data.order),o&&this.groupModel.updateGroupSub(o),n&&(this.groupModel.updateGroupSub(n),this.groupModel.groupSort(n));case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return a.apply(this,arguments)}),rmGroupImage:(i=p()(l.a.mark((function t(e,n){var i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={groupId:e,rmImageIds:[n.id]},this.groupModel.updateGroupSub(e),t.next=4,this.groupModel.request.updateGroup(i);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)}),count:function(t,e,n){var i={};"moveImage"===n&&(t===e?i.indrag=!0:i.groupdrag=!0),"moveGroup"===n&&(i.folderdrag=!0),window.Analyze("bookmark_group_drag",i)}}}},"8Mrv":function(t,e,n){t.exports=n.p+"imgs/ic_align_bottom4ef94a35.svg"},"8Uuu":function(t,e,n){"use strict";var i=n("4PHe"),a=n("H5W6"),o=(n("iNdf"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/navTree/components/menu-section-add-settings.vue",e.a=r.exports},"9Mbi":function(t,e,n){t.exports=n.p+"imgs/add_child_section_icona6b6be1c.svg"},"9xh5":function(t,e,n){"use strict";var i=n("JjJ8");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},A5Qv:function(t,e,n){var i=n("TmZh");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("1f20a2d9",i,!1,{})},A5au:function(t,e,n){"use strict";var i=n("Sjl2");e.a={name:"MemberInfo",components:{MemberAvatar:i.a},props:{userItem:{type:Object,default:{}}},mounted:function(){this.$nextTick((function(){}))},methods:{toggleCheck:function(t){!1===t.forbidden&&(t.selected=!t.selected)}}}},B029:function(t,e,n){"use strict";var i,a,o,r,s,c,u,l=n("o0o1"),d=n.n(l),p=n("yXPU"),h=n.n(p),f=n("lSNA"),m=n.n(f),g=n("hyaS"),v=n.n(g),b=n("BV8I"),x=n.n(b),w=n("Q9PM"),y=n("HgRx"),_=n("nyhT"),k=n("L2JU");function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){m()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t){return T.apply(this,arguments)}function T(){return(T=h()(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){setTimeout((function(){t()}),e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.a={components:{},inject:["stage","addImages"],props:["show"],data:function(){return{tempUpFiles:{},images:[],imageIds:[],isLimit:!1,isTeamLimit:!1,limitObj:{},imagesMap:{}}},computed:I(I({},Object(k.c)("team",["isEnterprise"])),{},{team_id:function(){return this.$store.state.team.team_id},project_id:function(){return this.$route.query.pid||window.pid},curTeamServerInfo:function(){return this.$store.state.team.curTeamServerInfo},onCustom:function(){return window.useCustomServer},isFreeTeam:function(){return Object(w.e)(this.curTeamServerInfo)}}),watch:{show:function(t){t&&this.initGetData()}},created:function(){this.initGetData(!0)},mounted:function(){this.$nextTick((function(){})),window.lanUpload=this},beforeDestroy:function(){},methods:{initGetData:function(t){this.getTeamLimit(t)},onClose:function(){},getTeamQuotaInfo:(u=h()(d.a.mark((function t(e){var n,i,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.team_id||this.$route.query.team_id||this.$route.query.teamId,i={team_id:n},!e){t.next=8;break}return t.next=5,y.a.getInstance().initGet("API.apiBase.team.getCombineTeamDetailInfo",i,API.apiBase.team.getCombineTeamDetailInfo);case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,API.apiBase.project.getTeamQuota(i);case 10:a=t.sent;case 11:if(!a){t.next=13;break}return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)}),initIsTeamOverflow:(c=h()(d.a.mark((function t(e){var n,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTeamQuotaInfo(e);case 2:return n=t.sent,i=Object(w.i)(n),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)}),getLimitImage:(s=h()(d.a.mark((function t(){var e,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={team_id:this.team_id,project_id:this.$route.query.pid||window.pid},t.next=3,y.a.getInstance().initGet("API.apiBase.project.getImageLimit",e,API.apiBase.project.getImageLimit);case 3:n=t.sent,this.limitObj=n,this.isLimit=Object(w.b)(n);case 6:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)}),getTeamLimit:(r=h()(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initIsTeamOverflow(e);case 2:n=t.sent,this.isTeamLimit=n,n||this.getLimitImage();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),startUplaod:(o=h()(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.Analyze("new_version",{addpicture:"add"}),e=[],!this.isTeamLimit){t.next=5;break}return Object(w.a)(this.team_id,this.isFreeTeam),t.abrupt("return",!0);case 5:if(!this.isFreeTeam){t.next=18;break}if(!this.isLimit){t.next=9;break}return LanhuDialog.msg(this.$i18n("该项目已到达 ${limit} 张设计图上限，建议新建项目后，继续上传",{limit:this.limitObj.hard_limit_cnt}),"上传失败","","好的"),t.abrupt("return",!0);case 9:return t.next=11,LanFileInput.openFile();case 11:if(e=t.sent,!Object(w.c)(this.limitObj,e.length)||this.onCustom){t.next=16;break}return LanhuDialog.msg(this.$i18n("该项目可再上传 ${difflen} 张设计图，建议重新选择设计图或新建项目后，继续上传",{difflen:this.limitObj.hard_limit_cnt-this.limitObj.cur_cnt}),"上传失败","","好的"),t.abrupt("return",!0);case 16:t.next=21;break;case 18:return t.next=20,LanFileInput.openFile();case 20:e=t.sent;case 21:return t.next=23,this.uploadFiles(e,{translateY:100});case 23:e.length&&window.Analyze("board_upload_image",{mode:"click_upload_btn",length:e.length});case 24:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),uploadFiles:(a=h()(d.a.mark((function t(e,n){var i,a,o,r,s,c,u,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=function(){return(l=h()(d.a.mark((function t(n){var o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a++,console.info("[图片上传完成] ",n),console.info("[ self.tempUpFiles] ",i.tempUpFiles),n.file.itemId&&(o=n.url,i.isEnterprise&&(o=n.hostURL),i.imagesMap[n.file.itemId].url=o),e.length===a&&(r=Object.values(i.imagesMap),i.addImages(r),i.imagesMap={},i.tempUpFiles={},i.images=[],i.imageIds=[],i.isLimit=!1,i.isTeamLimit=!1,i.limitObj={}),window.Analyze("本地上传设计图成功",{code:"10042"},"lanhu");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)},u=function(t){return l.apply(this,arguments)},s=function(){return(s=h()(d.a.mark((function t(e){var n,a,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e,n=x.a.v4(),i.tempUpFiles[e.id]=e,i.tempUpFiles[e.id].itemId=n,t.next=6,v()(e);case 6:if((a=t.sent).height=a.height/4,a.width=a.width/4,o=e.name||"",!Object(_.d)(e)){t.next=12;break}return t.abrupt("return");case 12:i.imagesMap[n]={name:o,width:a.width,height:a.height,url:""};case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)},r=function(t){return s.apply(this,arguments)},i=this,a=0,o=0;case 7:if(!(o<e.length)){t.next=19;break}case 8:if(e[o].id){t.next=14;break}return t.next=11,C(300);case 11:!e[o].id&&e[o].size&&(e[o].id="web"+x.a.v4()),t.next=8;break;case 14:return t.next=16,r(e[o]);case 16:o++,t.next=7;break;case 19:Object(_.e)(e,LanhuDialog.toast),window.useCustomServer?LanFileInput.uploadToCustomServer(e,null,u):window.cloudType&&"bos"==window.cloudType?LanFileInput.uploadToBaidu(e,null,u):(c={team_id:i.team_id,project_id:i.project_id},i.addImages(Object.values(i.imagesMap),{uploadImages:Object(_.c)(e,c,i)}),i.imagesMap={},i.tempUpFiles={},i.images=[],i.imageIds=[],i.isLimit=!1,i.isTeamLimit=!1,i.limitObj={},window.Analyze("本地上传设计图成功",{code:"10042"},"lanhu"));case 21:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)}),fetchImageSection:(i=h()(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,API.image.addImage(window.pid,this.images);case 2:API.section.updateSection({add_image_ids:this.imageIds,sector_id:iceStage.root.activeSectionId,project_id:window.pid}),this.images=[],this.imageIds=[];case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}}},BVUy:function(t,e,n){var i=n("bIy8");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("74b0180e",i,!1,{})},C04Y:function(t,e,n){"use strict";var i=n("cLcQ"),a=n("UOww"),o=n("5+ou"),r=n("NWsc");e.a={name:"MemberSelector",components:{LanTreeList:a.a,LanTreeListItem:i.default,MemberDepart:o.a,MemberInfo:r.a},props:{userInfo:{type:Array,default:[]},checkAllText:{type:String,default:function(){return this.$i18n("全选")}},defaultOpen:{type:Boolean,default:!1}},computed:{userInfoSort:function(){var t=this;return this.userInfo.map((function(e){return e.children&&e.children.length>0&&e.children.sort(t.sortBySelected("forbidden")),e}))}},mounted:function(){this.$nextTick((function(){}))},methods:{sortBySelected:function(t){return function(e,n){return e[t]-n[t]}}}}},C7YT:function(t,e,n){"use strict";var i=n("DlT8");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},CCUK:function(t,e,n){"use strict";var i=n("3QP6");e.a={components:{MenuBase:i.a},data:function(){return{menuOpen:!1,menuTrigger:void 0,xy:{x:0,y:0}}},methods:{open:function(t,e){t instanceof Element?this.menuTrigger=t:(this.menuTrigger=void 0,this.xy.x=t,this.xy.y=e),this.menuOpen=!0},close:function(){this.menuOpen=!1}}}},CZNk:function(t,e,n){"use strict";var i=n("Wqm5");e.a={mixins:[i.a],inject:["stageFn","groupModelFn"],props:["images"],data:function(){return{nowSection:null}},computed:{stage:function(){return this.stageFn()},groupModel:function(){return this.groupModelFn()}},mounted:function(){},methods:{editSection:function(){this.$emit("editSection",this.nowSection.id)},createGroup:function(){this.$emit("createGroup",this.nowSection.id)}}}},Ckhn:function(t,e,n){"use strict";var i=n("h1xF");n.n(i).a},CnpA:function(t,e,n){var i=n("sEG9");(t.exports=n("I1BE")(!1)).push([t.i,'@charset "UTF-8";\n.tree-list-section-wrap {\n  position: absolute;\n  top: 70px;\n  left: 16px;\n  z-index: 112;\n  pointer-events: auto;\n  background: white;\n  padding-top: 8px;\n  box-sizing: border-box;\n  border-radius: 4px;\n}\n.tree-list-section-wrap.pd_btm {\n  padding-bottom: 8px;\n}\n.tree-list-section-wrap .tree-wrap {\n  padding: 0 8px;\n  box-sizing: border-box;\n  border-radius: 4px;\n  overflow-x: hidden !important;\n  max-height: calc(100vh - 254px) !important;\n}\n.tree-list-section-wrap .tree-wrap::-webkit-scrollbar-thumb {\n  margin-right: 3px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 10px;\n}\n.tree-list-section-wrap .tree-wrap::-webkit-scrollbar {\n  margin-right: 3px;\n  width: 5px;\n  background: rgba(255, 255, 255, 0);\n}\n.tree-list-section-wrap.close .section-list-title .section-onoff .trg {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n  margin-top: 8px;\n  transition: all 0.2s;\n}\n.tree-list-section-wrap .section-total-wrap {\n  padding: 0 8px;\n  -webkit-user-select: none;\n          user-select: none;\n}\n.tree-list-section-wrap .section-total-wrap .section-total {\n  height: 36px;\n  line-height: 36px;\n  font-weight: 400;\n  font-size: 14px;\n  padding: 0 8px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.tree-list-section-wrap .section-total-wrap .section-total:hover {\n  background: rgba(0, 118, 255, 0.1);\n}\n.tree-list-section-wrap .section-total-wrap .section-total:hover .item-more {\n  display: block;\n}\n.tree-list-section-wrap .section-total-wrap .section-total.active {\n  background: #2878ff;\n}\n.tree-list-section-wrap .section-total-wrap .section-total.active .total-name {\n  color: white;\n  font-weight: 600;\n}\n.tree-list-section-wrap .section-total-wrap .section-total.active .total-num {\n  color: white;\n}\n.tree-list-section-wrap .section-total-wrap .section-total.active .item-more {\n  display: block;\n  background: url('+i(n("bkby"))+") left center/100% no-repeat;\n}\n.tree-list-section-wrap .section-total-wrap .section-total .total-name {\n  float: left;\n  color: #18212f;\n}\n.tree-list-section-wrap .section-total-wrap .section-total .total-num {\n  float: right;\n  color: #b1b2b2;\n  padding-right: 8px;\n}\n.tree-list-section-wrap .section-total-wrap .section-total .item-more {\n  display: none;\n  width: 24px;\n  height: 36px;\n  float: right;\n  background: url("+i(n("TCS5"))+") left center/100% no-repeat;\n}\n.tree-list-section-wrap .cross-line {\n  height: 1px;\n  background: #e8e9eb;\n  margin: 8px 0;\n}\n.tree-list-section-wrap .section-list-title {\n  padding: 0 16px;\n  font-size: 14px;\n  height: 36px;\n  line-height: 36px;\n  width: 200px;\n  -webkit-user-select: none;\n          user-select: none;\n  /* 列表收起展开图标 */\n}\n.tree-list-section-wrap .section-list-title.remove-width {\n  width: auto;\n}\n.tree-list-section-wrap .section-list-title span.section-but-add {\n  position: absolute;\n  right: 8px;\n  top: 12px;\n  transition: all 0.2s;\n  color: rgba(91, 96, 106, 0.8);\n  cursor: pointer;\n}\n.tree-list-section-wrap .section-list-title span.section-but-add:hover {\n  color: #2878ff;\n  transition: all 0.2s;\n}\n.tree-list-section-wrap .section-list-title .section-onoff {\n  background: transparent;\n  width: 24px;\n  height: 24px;\n  border-radius: 100%;\n  display: inline-block;\n  vertical-align: middle;\n  cursor: pointer;\n  position: relative;\n}\n.tree-list-section-wrap .section-list-title .section-onoff .trg {\n  position: absolute;\n  -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  margin-top: 8px;\n  transition: all 0.2s;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 0 5px 5px 5px;\n  border-color: transparent transparent rgba(91, 96, 106, 0.8) transparent;\n}",""])},"Cq1/":function(t,e,n){"use strict";var i=n("rxNT"),a=n("4dd+"),o=(n("mVK6"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/MemberNotification/member-notification.vue",e.a=r.exports},DHdp:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-align-tool-bar"},[n("div",{class:{"tool-icon icon-ic_distribute_horizontally":!0,disabled:t.selectLen<3},on:{click:function(e){return t.doFun("distribute_horizontally")}}}),t._v(" "),n("div",{class:{"tool-icon icon-ic_distribute_vertically":!0,disabled:t.selectLen<3},on:{click:function(e){return t.doFun("distribute_vertically")}}}),t._v(" "),n("span",{staticClass:"dvv"}),t._v(" "),n("div",{staticClass:"tool-icon icon-ic_align_left",on:{click:function(e){return t.doFun("align_left")}}}),t._v(" "),n("div",{staticClass:"tool-icon icon-ic_align_horizontally",on:{click:function(e){return t.doFun("align_horizontally")}}}),t._v(" "),n("div",{staticClass:"tool-icon icon-ic_align_right",on:{click:function(e){return t.doFun("align_right")}}}),t._v(" "),n("div",{staticClass:"tool-icon icon-ic_align_top",on:{click:function(e){return t.doFun("align_top")}}}),t._v(" "),n("div",{staticClass:"tool-icon icon-ic_align_vertically",on:{click:function(e){return t.doFun("align_vertically")}}}),t._v(" "),n("div",{staticClass:"tool-icon icon-ic_align_bottom",on:{click:function(e){return t.doFun("align_bottom")}}})])},a=[];i._withStripped=!0},DOxR:function(t,e,n){"use strict";var i=n("LePH"),a=n("PPyy"),o=(n("fq7h"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/black_tec.vue",e.a=r.exports},DVLJ:function(t,e,n){t.exports=n.p+"imgs/ic_align_rightafb9ad55.svg"},DlT8:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"tree-list-section-wrap pd_btm":!0,close:!t.listOpen}},[n("div",{class:{"section-list-title":!0,"remove-width":!t.listOpen}},[n("span",{staticClass:"open-list-but",on:{click:t.doExpandList}},[t._v("\n      "+t._s(t.$i18n("分组"))+" "),t._m(0)]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.listOpen&&!t.userIsGuest(),expression:"listOpen && !userIsGuest()"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$i18n("新建分组")},expression:"{ content: $i18n('新建分组') }"}],staticClass:"section-but-add",on:{click:function(e){return t.createGroup(null)}}},[n("i",{staticClass:"material-icons"},[t._v("add_box")])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.listOpen,expression:"listOpen"}],staticClass:"section-total-wrap"},[n("div",{ref:"totalSectionEl",class:{"section-total":!0,active:t.totalSelected},on:{click:t.selectTotal}},[n("span",{staticClass:"total-name"},[t._v(t._s(t.$i18n("全部")))]),t._v(" "),n("span",{staticClass:"item-more",on:{click:function(e){return t.openMoreMenu(e,null)}}}),t._v(" "),n("span",{staticClass:"total-num"},[t._v(t._s(t.totalNum))])])]),t._v(" "),t.treeList.length&&"noGroup"!==t.treeList[0].id&&t.listOpen?n("div",{staticClass:"cross-line"}):t._e(),t._v(" "),t.treeList.length&&"noGroup"!==t.treeList[0].id?n("div",{staticClass:"tree-wrap"},[n("auto-drag",{attrs:{maxWidth:400,minWidth:200,dragRight:!0,resetDefaultWidth:t.listOpen}},[n("tree",{directives:[{name:"show",rawName:"v-show",value:t.listOpen,expression:"listOpen"}],ref:"navTree",attrs:{"tree-list":t.treeList,isDraggable:!t.userIsGuest(),label:t.imageName},on:{nodeClick:t.nodeClick,nodeDbClick:t.nodeDbClick,openMoreMenu:t.openMoreMenu,openAddMenu:t.openAddMenu,dragend:t.dragEnd,rmGroupImage:t.rmGroupImage}})],1)],1):t._e(),t._v(" "),n("menu-section-more-settings",{ref:"moreSettings",attrs:{images:t.images},on:{editSection:t.editSection,deleteGroup:t.selectTotal}}),t._v(" "),n("menu-section-add-settings",{ref:"addSettings",on:{editSection:t.editSection,createGroup:t.createGroup}})],1)},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"section-onoff"},[e("span",{staticClass:"trg"})])}];i._withStripped=!0},EC5t:function(t,e,n){"use strict";var i=new(n("7UYU").a);e.a={props:{textObj:{type:Object,default:{}},pid:{type:String,default:""},teamId:{type:String,default:""}},data:function(){return{padding:8,sizeParams:{},textBlurMark:!1,textAreaValue:""}},watch:{textAreaValue:function(t,e){var n=t.slice(0,300);this.calPath(n)},textObj:function(t,e){t.height&&t.width&&(this.sizeParams={height:t.height,width:t.width<80?80:t.width})}},mounted:function(){window.Analyze("connection_explain",{event:this.textObj.source}),this.textAreaValue=this.textObj.value,this.textObj.width<80&&(this.textObj.width=80),document.getElementById("text_marker").focus(),this.$nextTick((function(){document.getElementById("text_marker").selectionStart=0})),this.sizeParams={height:this.textObj.height,width:this.textObj.width},window.addEventListener("mousewheel",this.mouseWheel,{passive:!1,capture:!0}),window.addEventListener("mousedown",this.mouseDown,!0),window.addEventListener("gesturestart",this.mouseWheel,!0)},destroyed:function(){window.removeEventListener("mousewheel",this.mouseWheel,!0),window.removeEventListener("mousedown",this.mouseDown,!0),window.removeEventListener("gesturestart",this.mouseWheel,!0)},methods:{mouseWheel:function(t){this.textBlur(),t.preventDefault(),t.stopPropagation()},mouseDown:function(t){"text_marker"!=t.target.id&&document.getElementById("text_marker").blur()},calPath:function(t){var e=this,n=document.getElementById("visualDiv");if(n){n.innerText=t;var i=n.offsetHeight,a=n.offsetWidth+1;(a+=20)<80&&(a=80),a>357&&(a=358),this.sizeParams={height:i,width:a},this.textAreaValue=t.slice(0,300),this.$nextTick((function(){var t=n.offsetHeight,i=document.getElementById("text_marker").scrollHeight-16;i>t&&(e.sizeParams.height=i)}))}},textBlur:function(){var t=this;if(this.bugMark)return!1;if(this.textBlurMark)return!1;this.textBlurMark=!0;var e=document.getElementById("visualDiv");if(e){var n=this.textAreaValue||"";for(n=n.split("");n.length&&"\n"==n[n.length-1];)n.pop();n=n.join(""),e.innerText=n;var a=e.offsetHeight,o=e.offsetWidth+1;this.sizeParams={height:a,width:o};var r={width:this.sizeParams.width,height:this.sizeParams.height,value:n},s={width:this.sizeParams.width,height:this.sizeParams.height,explain:n,link_id:this.textObj.linkObj.data.id,project_id:this.pid,team_id:this.teamId};i.addLineText(s),window.Analyze("connection_explain",{event:"success"}),this.$emit("textBLur",{params:r,endPoint:this.textObj.endPoint})}setTimeout((function(){t.textBlurMark=!1}),500),window.removeEventListener("mousewheel",this.mouseWheel,!0),window.removeEventListener("mousedown",this.mouseDown,!0),window.removeEventListener("gesturestart",this.mouseWheel,!0)},keydown:function(t){var e=this,n=document.getElementById("text_marker"),i=document.getElementById("text_marker").value;if(t&&13==t.keyCode)if(t.preventDefault(),t.ctrlKey||t.shiftKey||t.metaKey){var a=t.target.selectionEnd;i=i.slice(0,a)+"\n"+i.slice(a),n.value=i,this.textAreaValue=i,this.$nextTick((function(){n.selectionStart=a+1,n.selectionEnd=a+1}))}else n.blur();!t.metaKey||"Equal"!==t.code&&"Minus"!==t.code&&"Digit0"!==t.code||(n.blur(),t.preventDefault()),this.$nextTick((function(){setTimeout((function(){var t=n.value;e.calPath(t)}),0)}))}}}},F2n9:function(t,e,n){var i=n("M5U9");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("04bff264",i,!1,{})},FFnQ:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"function-stage-bg mu-overlay",on:{click:t.close}}),t._v(" "),n("div",{staticClass:"function-stage"},[n("mu-list",[n("mu-list-item",{attrs:{disabled:"",title:"",describeText:t.$i18n("一些隐藏的选项与功能")}},[n("mu-icon-button",{staticClass:"close-but",attrs:{slot:"right",icon:"close"},on:{click:t.close},slot:"right"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"material-icons text-icon red"},[t._v("fiber_new")]),t._v(" "+t._s(t.$i18n("实验性功能")))])],1),t._v(" "),n("mu-divider"),t._v(" "),n("div",{staticClass:"movehand"})],1),t._v(" "),n("mu-list",{directives:[{name:"event-scroll",rawName:"v-event-scroll"}],ref:"scrollList",staticClass:"sub-list",style:t.autoStyle},[n("mu-list-item",{attrs:{disableRipple:"",title:t.$i18n("传统框选模式")}},[n("span",{attrs:{slot:"describe"},slot:"describe"},[t._v(t._s(t.$i18n("在画布上按住左键进行框选，无需按住 Shift 键")))]),t._v(" "),n("mu-switch",{attrs:{slot:"right"},on:{change:function(e){t.changeGroup("selectMode",e)}},slot:"right",model:{value:t.groupSet.selectMode,callback:function(e){t.$set(t.groupSet,"selectMode",e)},expression:"groupSet.selectMode"}})],1),t._v(" "),n("mu-list-item",{attrs:{disableRipple:"",title:t.$i18n("自由缩放")}},[n("span",{attrs:{slot:"describe"},slot:"describe"},[t._v(t._s(t.$i18n("可以在画布任何地方进行缩放，无需按住 Ctrl 键")))]),t._v(" "),n("mu-switch",{attrs:{slot:"right"},on:{change:function(e){t.changeGroup("zoomMode",e)}},slot:"right",model:{value:t.groupSet.zoomMode,callback:function(e){t.$set(t.groupSet,"zoomMode",e)},expression:"groupSet.zoomMode"}})],1)],1)],1)])},a=[];i._withStripped=!0},FcCu:function(t,e,n){var i=n("i1DC");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("7371d176",i,!1,{})},GCzz:function(t,e,n){t.exports=n.p+"imgs/add_child_section_icon_grey64818d2f.svg"},GRZH:function(t,e,n){"use strict";var i=n("R9Jr"),a=n("kQAe"),o=(n("Ckhn"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,"37ddadd6",null);r.options.__file="src/features/navTree/tree.vue",e.a=r.exports},H1Px:function(t,e,n){var i=n("sEG9");(t.exports=n("I1BE")(!1)).push([t.i,'@charset "UTF-8";\n/* 颜色 */\n/** 统一按钮颜色, 状态: 默认, hover颜色, 激活颜色 */\n/*全黑*/\n/*纯黑*/\n/*黑*/\n/*深灰*/\n/*背景色*/\n/* 字号 */\n/*特殊字体*/\na {\n  color: #2878FF;\n}\n@-webkit-keyframes circle {\n0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n@keyframes circle {\n0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n#loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  z-index: 10002;\n}\n#loading img {\n  -webkit-animation: circle 0.6s infinite linear;\n          animation: circle 0.6s infinite linear;\n  width: 60px;\n  height: 60px;\n}\n#search {\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n  position: absolute;\n  overflow: auto;\n  padding-top: 70px;\n  box-sizing: border-box;\n  z-index: 10001;\n  transition: all ease 500ms;\n  background: rgba(255, 255, 255, 0.95);\n  opacity: 0;\n}\n#search .search_close {\n  width: 48px;\n  height: 48px;\n  position: absolute;\n  right: 24px;\n  left: initial;\n  top: 65px;\n  background: url('+i(n("v7v/"))+") 0 bottom no-repeat;\n  background-size: 100%;\n  cursor: pointer;\n}\n#search .search_close:hover {\n  background: url("+i(n("v7v/"))+") 0 -116px no-repeat;\n  background-size: 100%;\n}\n#search .tempDiv {\n  border: 1px dashed blue;\n  background: #5a72f8;\n  position: absolute;\n  width: 0;\n  height: 0;\n  opacity: 0.1;\n  z-index: 999999;\n}\n#search .search_bar {\n  width: 420px;\n  height: 36px;\n  border: 1px solid #c2c2c2;\n  border-radius: 40px;\n  margin: 0 auto;\n  position: relative;\n  opacity: inherit;\n  overflow: hidden;\n}\n#search .search_bar .text {\n  height: 100%;\n  position: relative;\n}\n#search .search_bar .text i {\n  position: absolute;\n  left: 10px;\n  top: 9px;\n  height: 15px;\n  float: left;\n  background: url("+i(n("1zlx"))+') left 0 no-repeat;\n  background-size: 15px;\n  font-size: 14px;\n  line-height: 1;\n  font-style: normal;\n  width: 15px;\n}\n#search .search_bar input {\n  border: 0;\n  background: none;\n  box-sizing: border-box;\n  display: block;\n  padding: 6px 8px;\n  font-size: 14px;\n  color: #222222;\n  height: auto;\n  width: 100%;\n  padding-left: 30px;\n  box-sizing: border-box;\n  font-family: -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Source Han Sans", "Noto Sans CJK Sc", "Microsoft YaHei", "Microsoft Jhenghei", sans-serif;\n}\n#search .tip {\n  text-align: center;\n  line-height: 60px;\n  color: #888888;\n}\n#search .list_box {\n  margin: 0 auto;\n  width: 820px;\n  /*padding:0 100px;*/\n  box-sizing: border-box;\n  /*padding-left: 20px;*/\n}\n#search .list_box .card_item {\n  padding: 5px 10px;\n  font-size: 20px;\n  color: #1a1a1a;\n  background: #fffeef;\n  box-sizing: border-box;\n  width: 185px;\n  height: 176px;\n  box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.3);\n  margin: 4px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n#search .list_box .img_item {\n  cursor: pointer;\n  overflow: hidden;\n}\n#search .list_box .img_item img {\n  width: 185px;\n  box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.3);\n  margin: 4px;\n  border: 1px solid rgba(0, 0, 0, 0);\n}\n#search .list_box .img_item img:hover {\n  border: 1px solid #5393FF;\n}\n#search .list_box .img_item .name {\n  width: 180px;\n  font-size: 12px;\n  color: #222222;\n  position: relative;\n  text-align: left;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-left: 4px;\n  display: block;\n}\n#search .default {\n  width: 300px;\n  height: 227px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  text-align: center;\n  color: #2878FF;\n}\n#search .default img {\n  width: 180px;\n  height: 180px;\n}\n#search .default > div {\n  margin-top: 25px;\n  font-size: 14px;\n}\n.search_blur {\n  -webkit-filter: blur(2px);\n          filter: blur(2px);\n}\n#delAll {\n  position: absolute;\n  right: 7px;\n  top: 7px;\n  width: 18px;\n  height: 18px;\n  background: url('+i(n("Ek0k"))+") no-repeat;\n  background-size: 100%;\n  cursor: pointer;\n}",""])},H5W6:function(t,e,n){"use strict";var i=n("CZNk");e.a=i.a},H5ex:function(t,e,n){var i=n("XMXQ");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("c1ab7170",i,!1,{})},H9qX:function(t,e,n){"use strict";var i=n("813O");e.a=i.a},HdQY:function(t,e,n){t.exports=n.p+"imgs/ic_align_horizontally32429dc7.svg"},I4Yq:function(t,e,n){"use strict";var i=n("oc5f");e.a=i.a},J2EC:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".dialog-bar {\n  background: #2878ff;\n  color: #fff;\n  top: 0px;\n  left: 0px;\n  position: absolute;\n  width: 100%;\n  height: 60px;\n  line-height: 60px;\n  z-index: 9999;\n  text-align: center;\n}\n.dialog-bar .title {\n  position: absolute;\n  left: 60px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  width: 150px;\n  height: 50px;\n  line-height: 50px;\n  white-space: nowrap;\n}\n.dialog-bar .title button.mu-icon-button {\n  vertical-align: middle;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  font-size: 12px;\n}\n.dialog-bar .title button.mu-icon-button .material-icons {\n  font-size: 12px;\n}\n.dialog-bar .close-but {\n  position: absolute;\n  height: 48px;\n  left: 10px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n}\n.dialog-bar .delete-but {\n  position: absolute;\n  height: 48px;\n  right: 10px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n}\n.dialog-bar .delete-but .material-icons {\n  font-size: 20px;\n}\n.dialog-bar .text {\n  padding: 0 20px;\n}\n.dialog-bar .cancel-select-all {\n  font-size: 14px;\n  color: #ffffff;\n  position: absolute;\n  right: 88px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}",""])},JC2d:function(t,e,n){t.exports=n.p+"imgs/ic_addimgX8260993d.png"},Jhvi:function(t,e,n){var i=n("QR7N");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("67ddd1eb",i,!1,{})},JjJ8:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lan-upload-shadow",on:{click:function(e){return t.$emit("close")}}},[i("div",{staticClass:"lan-upload",attrs:{id:"lan-upload-window"}},[i("div",{staticClass:"title"},[t._v(t._s(t.$i18n("上传设计图")))]),t._v(" "),i("div",{staticStyle:{"font-size":"0"}},[i("div",{staticClass:"box first"},[i("div",{staticClass:"title"},[t._v("\n          "+t._s(t.$i18n("本地上传 PNG JPG GIF"))+"\n          "),i("div",{staticClass:"sub-note"},[t._v(t._s(t.$i18n("不支持自动标注")))])]),t._v(" "),i("mu-raised-button",{staticClass:"ok",attrs:{id:"lan-upload-start-but",primary:""},on:{click:t.startUplaod}},[t._v("\n          "+t._s(t.$i18n("上传"))+"\n        ")])],1),t._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"title"},[t._v("\n          "+t._s(t.$i18n("通过 Ps 插件上传"))+"\n          "),i("div",{staticClass:"sub-note"},[t._v(t._s(t.$i18n("支持 psd 自动标注")))])]),t._v(" "),i("mu-flat-button",{staticClass:"ok",attrs:{target:"_blank",color:"#5393FF",href:t.$root.rootUrl+"/ps?comeFrom=画布页添加设计图按钮"},on:{click:function(e){return t.$emit("close","Ps")}}},[i("span",[i("img",{staticStyle:{"vertical-align":"middle","margin-top":"0px"},attrs:{src:n("lhS+"),width:"16px",height:"16px",alt:""}}),t._v("\n            "+t._s(t.$i18n("下载")))])])],1),t._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"title"},[t._v("\n          "+t._s(t.$i18n("通过 Sketch 插件上传"))+"\n          "),i("div",{staticClass:"sub-note"},[t._v(t._s(t.$i18n("支持 sketch 自动标注")))])]),t._v(" "),i("mu-flat-button",{staticClass:"ok",attrs:{target:"_blank",color:"#5393FF",href:t.$root.rootUrl+"/mac?comeFrom=画布页添加设计图按钮"},on:{click:function(e){return t.$emit("close","Sketch")}}},[i("span",[i("img",{staticStyle:{"vertical-align":"middle","margin-top":"1px"},attrs:{src:n("ol3l"),width:"16px",height:"16px",alt:""}}),t._v("\n            "+t._s(t.$i18n("下载")))])])],1),t._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"title"},[t._v("\n          "+t._s(t.$i18n("通过 XD 插件上传"))+"\n          "),i("div",{staticClass:"sub-note"},[t._v(t._s(t.$i18n("支持 XD 自动标注")))])]),t._v(" "),i("mu-flat-button",{staticClass:"ok",attrs:{target:"_blank",color:"#5393FF",href:t.$root.rootUrl+"/xd?comeFrom=画布页添加设计图按钮"},on:{click:function(e){return t.$emit("close","XD")}}},[i("span",[i("img",{staticStyle:{"vertical-align":"middle","margin-top":"0px"},attrs:{src:n("foyh"),width:"16px",height:"16px",alt:""}}),t._v("\n            "+t._s(t.$i18n("下载")))])])],1),t._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"title"},[t._v("\n          "+t._s(t.$i18n("通过 Figma 插件上传"))+"\n          "),i("div",{staticClass:"sub-note"},[t._v(t._s(t.$i18n("支持 Figma 自动标注")))])]),t._v(" "),i("mu-flat-button",{staticClass:"ok",attrs:{target:"_blank",color:"#5393FF",href:"https://www.figma.com/community/plugin/1000018270921149282/Lanhu"},on:{click:function(e){return t.$emit("close","figma")}}},[i("span",[i("img",{staticStyle:{"vertical-align":"middle","margin-top":"0px"},attrs:{src:n("ckto"),width:"16px",height:"16px",alt:""}}),t._v("\n            "+t._s(t.$i18n("下载")))])])],1)])])])},a=[];i._withStripped=!0},JtUQ:function(t,e,n){"use strict";(function(t){var i,a,o,r,s,c=n("o0o1"),u=n.n(c),l=n("RIqP"),d=n.n(l),p=n("yXPU"),h=n.n(p),f=n("QEec"),m=n("fDnD"),v=n.n(m),b=n("JEAp"),x=n.n(b),w=n("GeMr"),y=n("dFy5"),_=n("1TIV");function k(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}e.a={data:function(){return{itemSelectPool:null,downloadStatus:{show:!1,value:0,max:0,timer:null,fail:!1},notificationOpen:!1,placeholderString:"填写留言",presetString:["设计图制作好了,快来看看吧~","设计图制作好了,有问题及时沟通~","设计图优化已完成,快来看看吧~"],notificationInfo:{projectID:"",teamID:"",route:"",url:"",wechat_url:""},selectImages:"",notificationType:"image"}},methods:{execEventHandler:function(t){if(!t||!t.eventName)return!1;console.group("[context menu]"),console.log("[opt] ",t);var e="".concat(t.eventName,"Handler");console.log("[handler] ",e),this[e](t),console.groupEnd()},saveImages:function(t){this.itemSelectPool=t,this.downloadImage()},setPool:function(){var t=this.stage.selectAll();return!(!t||!Object.keys(t).length)&&(this.itemSelectPool=t,!0)},downloadImgHandler:function(t){if(!this.setPool())return!1;this.downloadImage()},downloadSliceHandler:function(t){return console.log("downloadSliceHandler: ",t),!!t.e&&(!!this.setPool()&&void this.allSliceDownloadOpen(t.e))},notifyMembersHandler:function(){this.contextNatifytion("picture")},setCoverHandler:function(){if(!this.setPool())return!1;this.setCover()},deleteHandler:(s=h()(u.a.mark((function t(e){var n,i,a,o,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={imageObject:"imageObject",textObject:"textObject"},i=this.stage.canvas.findSelectIdByType(n),a=this.stage.getSelectImgBtnShape(),o=a.ids,i.forEach((function(t){o.push(t.id)})),o=d()(new Set(o)),console.log("deleteHandler: ",i,e.target),r=[],Object(f.a)(i,(function(t,n){t.lanhu_subType===e.target.lanhu_subType&&r.push(t)})),r.length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.next=12,window.LanhuDialog.msg(this.$i18n("删除 ${length} 个选择项",{length:o.length}),this.$i18n("确认删除"),this.$i18n("flatred-red"));case 12:if(t.sent){t.next=15;break}return t.abrupt("return",!1);case 15:this.stage.deleteShape(e.target);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)}),allSliceDownloadOpen:function(e){var n=e.target;try{n=t(e.target).closest(".mu-menu-item")[0]||n}catch(t){}this.$refs.boardslice.open(n)},downloadImage:(r=h()(u.a.mark((function t(){var e,n,i,a,o,r,s,c,l,d,p,m,g=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m=function(t,e){d().then((function(){p(t).then((function(t){e=l(e,t.type),x.a.saveAs(t,e),setTimeout((function(){document.body.removeChild(i)}),1e3)}))}))},p=function(t){return new Promise((function(e,n){var i=new a;i.open("get",t,!0),i.responseType="blob",i.onload=function(){if(200===this.status)return e(this.response)},i.onerror=function(){n(new Error("图片加载失败"))},i.send()}))},d=function(){return new Promise((function(t,e){i.style.display="none",i.onload=function(){a=i.contentWindow.XMLHttpRequest,t()},document.body.appendChild(i)}))},l=function(t,e){return/\.(jpg|JPG|jpeg|JPEG|png|PNG|gif|GIF)$/g.test(t)?t:t+="image/png"===e?".png":"image/jpeg"===e?".jpg":"image/gif"===e?".gif":".png"},c=function(){return(c=h()(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){setTimeout((function(){t()}),e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(t){return c.apply(this,arguments)},e=[],n=this.itemSelectPool,Object(f.a)(n,(function(t,n){if(t.url){var i=t.url;i=i.replace("lanhu.oss-cn-beijing.aliyuncs.com","alipic.".concat(window.lanHost)),e.push({url:i,name:t.name})}})),console.log("downloadImage",e),e.map((function(t){return t.name=g.toDbc(t.name),t.name})),!(e.length>1)){t.next=13;break}return t.abrupt("return",this.downloadImagesZip(e));case 13:i=document.createElement("iframe"),o=0;case 15:if(!(o<e.length)){t.next=23;break}return r=e[o],m(r.url,r.name),t.next=20,s(100);case 20:o++,t.next=15;break;case 23:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),setCover:(o=h()(u.a.mark((function t(){var e,n,i,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("secCover"),e=Object.keys(this.itemSelectPool),n=e[0],i=this.itemSelectPool[n],a=i.url,console.log("secCover:",this.$route.query.pid,a),t.next=8,w.b.setProjectCoverById(this.$route.query.pid,y.a.Url.removeQuery(a));case 8:t.sent&&LanhuDialog.toast(this.$i18n("设置项目封面成功"));case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),doShowImageInfo:(a=h()(u.a.mark((function t(e){var n,i,a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=function(){return(o=h()(u.a.mark((function t(){var e,a,o,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,API.image.getImage(n);case 2:if(e=t.sent,console.log("doShowImageInfo img:",e),a=e.result,!(o=a.versions[0].json_url)){t.next=16;break}return r=axios.defaults.headers.common.Authorization,delete axios.defaults.headers.common.Authorization,t.next=11,axios.get(o);case 11:delete(s=t.sent.data).info;try{delete s.board.artboard,delete s.assets}catch(t){}window.LanhuDialog.newVerNote(i.$i18n("图片信息"),JSON.stringify(s,null,4),i.$i18n("我知道了")),axios.defaults.headers.common.Authorization=r;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)},a=function(){return o.apply(this,arguments)},e&&e.id){t.next=4;break}return t.abrupt("return",!1);case 4:return n=e.id,i=this,t.next=8,a();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)}),downloadImagesZip:function(t){var e,n=this,i=this,a=document.createElement("iframe"),o={total:t.length,current:0,done:!1},r=function t(e,n){if(e.includes(n)){var i=n.lastIndexOf(".");-1===i&&(i=n.length);var a=n.substr(0,i),o=n.substr(i),r=a.match(/\((\d+)\)$/g);if(r){var s=a.lastIndexOf(r[0]),c=a.substr(s).replace(/[\(\)]/g,"");return t(e,(a=a.substr(0,s)+"(".concat(c-0+1,")"))+o)}return t(e,a+"(1)"+o)}return n};return clearTimeout(n.downloadStatus.timer),n.downloadStatus={show:!0,value:0,max:t.length,timer:null,fail:!1},new Promise((function(t,n){a.style.display="none",a.onload=function(){e=a.contentWindow.XMLHttpRequest,t()},document.body.appendChild(a)})).then((function(){var s,c=new v.a,u=[],l=[],d=k(t);try{var p=function(){var d,p=s.value,h=r(u,p.name);u.push(h),(d=p.url,new Promise((function(t,n){var i=new e;i.open("get",d,!0),i.responseType="blob",i.onload=function(){if(200===this.status)return t(this.response)},i.onerror=function(){n(new Error("图片加载失败"))},i.send()}))).then((function(e){var s,d;if(h=function(t,e,n){return/\.(jpg|JPG|jpeg|JPEG|png|PNG|gif|GIF)$/g.test(e)||(e+="image/png"===n?".png":"image/jpeg"===n?".jpg":"image/gif"===n?".gif":".png"),t.slice(-1).includes(e)?r(t,e):e}(u,h,e.type),l.push(!0),c.file(h,e,{createFolders:!1}),s="value",d=l.length,o[s]=d,n.$set(n.downloadStatus,s,d),t.length==l.length){var p=window.g&&g.pages&&g.pages.project&&g.pages.project.projectName||localStorage.pName||"images";!function(t,e){t.generateAsync({type:"blob"}).then((function(t){console.log(t),x.a.saveAs(t,e),i.closeDownloadTip(),setTimeout((function(){document.body.removeChild(a)}),1e4)})).catch((function(t){n.$set(n.downloadStatus,"fail",!0)}))}(c,"".concat(p,".zip"))}})).catch((function(t){n.$set(n.downloadStatus,"fail",!0),console.error("打包下载失败",t)}))};for(d.s();!(s=d.n()).done;)p()}catch(t){d.e(t)}finally{d.f()}})).catch((function(t){console.error("打包下载失败",t),n.$set(n.downloadStatus,"fail",!0),n.closeDownloadTip()})),o},showDownloadTip:function(){this.$set(this.downloadStatus,"show",!0)},closeDownloadTip:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;console.log("this",this);var n=this.downloadStatus;clearTimeout(n.timer),this.$set(n,"timer",setTimeout((function(){t.$set(n,"show",!1)}),e))},toDbc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={"＊":/\*/,"＞":/\>/,"＜":/\</,"｜":/\|/,"＂":/\"/,"＼":/\\/,"／":/\//,"：":/\:/,"？":/\?/},n=/(\*|\>|\<|\||\"|\\|\/|\:|\?)/g;return t.replace(n,(function(t){for(var n in e)if(e[n].test(t))return n;return t}))},notificationOpenDialog:function(){this.notificationOpen=!0,this.stage.setStageModifyStatus(!0)},notificationCloseDialog:function(){this.notificationOpen=!1,this.stage.setStageModifyStatus(!1)},sendEvent:function(){this.notificationCloseDialog(),window.LanhuDialog.toast(this.$i18n("通知项目成员成功"),4e3)},contextNatifytion:(i=h()(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.formatSelectImages(),t.next=3,w.b.postProjectSerialzer(n);case 3:this.selectImages=t.sent,this.setNotificationInfo(),this.notificationOpenDialog(),this.ui_menu_context=!1,window.Analyze("designboard_notion",{notionmembers:e}),window.Analyze("right_click",{boardpage:"notify_project_members"}),this.logger.info("FILL","右键通知项目成员");case 10:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)}),formatSelectImages:function(){this.setPool();var t=this.itemSelectPool,e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({id:n,name:t[n].name});return{images:e}},addApplyGroupHandler:function(t){t.target;var e=this.stage.selectAll(),n=Object.keys(e);this.$refs.navTreeNew.menuCreateGroup(n)},moveApplyGroupHandler:function(t){t.target;var e=this.stage.selectAll(),n=Object.keys(e);this.$refs.navTreeNew.menuCreateGroup(n,!0)},setNotificationInfo:function(){this.notificationInfo.projectID=this.$route.query.pid,this.notificationInfo.teamID=this.team_id,this.notificationInfo.route=this.$route.name},setNotificationAnalysis:function(t){window.Analyze("designboard_notion",{notionmembers:_.a[t]})}}}}).call(this,n("EVdn"))},JwMg:function(t,e,n){var i=n("sEG9");(t.exports=n("I1BE")(!1)).push([t.i,".edit-align-tool-bar {\n  display: inline-block;\n  position: absolute;\n  height: 40px;\n  top: 70px;\n  right: 100px;\n  background: #fff;\n  -webkit-user-select: none;\n          user-select: none;\n  z-index: 22;\n  box-shadow: 0 2px 2px 0px rgba(40, 120, 255, 0.1), 0 0px 2px rgba(0, 0, 0, 0.12);\n  text-align: left;\n  border-radius: 4px;\n  white-space: nowrap;\n  padding: 0 5px;\n}\n.edit-align-tool-bar .icon-ic_distribute_horizontally {\n  background-image: url("+i(n("edod"))+");\n}\n.edit-align-tool-bar .icon-ic_distribute_vertically {\n  background-image: url("+i(n("4jZ1"))+");\n}\n.edit-align-tool-bar .icon-ic_align_bottom {\n  background-image: url("+i(n("8Mrv"))+");\n}\n.edit-align-tool-bar .icon-ic_align_top {\n  background-image: url("+i(n("OP81"))+");\n}\n.edit-align-tool-bar .icon-ic_align_left {\n  background-image: url("+i(n("Sm49"))+");\n}\n.edit-align-tool-bar .icon-ic_align_right {\n  background-image: url("+i(n("DVLJ"))+");\n}\n.edit-align-tool-bar .icon-ic_align_vertically {\n  background-image: url("+i(n("1qor"))+");\n}\n.edit-align-tool-bar .icon-ic_align_horizontally {\n  background-image: url("+i(n("HdQY"))+");\n}\nspan.dvv {\n  width: 1px;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.05);\n  display: inline-block;\n}\n.tool-icon {\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 20px;\n  height: 20px;\n  display: inline-block;\n  padding: 20px 15px;\n}\n.tool-icon.disabled {\n  opacity: 0.4;\n}\n.tool-icon:hover {\n  background-color: #f4f7fd;\n}\n.tool-icon:active {\n  background-color: #e7effd;\n}",""])},"KnD/":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("o0o1"),a=n.n(i),o=n("yXPU"),r=n.n(o),s=n("lwsE"),c=n.n(s),u=n("W8MJ"),l=n.n(u),d=n("lSNA"),p=n.n(d),h=function(){function t(e,n){c()(this,t),p()(this,"API",null),p()(this,"groups",{}),p()(this,"baseInfo",{pid:window.pid}),p()(this,"transRule",{id:"id",name:"name",order:"order",parentId:"parent_id",children:"image_ids",groupId:"sector_id",addImageIds:"add_image_ids",rmImageIds:"rm_image_ids",preGroupId:"pre_child_sector_id",nextGroupId:"next_child_sector_id",targetGroupId:"target_parent_sector_id",mvGroupId:"mv_sector_id",preImageId:"pre_image_id",nextImageId:"next_image_id",targetSectorId:"target_sector_id",images:"images",moveImages:"move_images"}),this.API=e,this.groups=n,this.watchBaseInfo()}var e,n,i,o,s,u;return l()(t,[{key:"watchBaseInfo",value:function(){Object.defineProperty(this,"baseInfo",{get:function(){return this.API.getBaseInfo()}})}},{key:"format",value:function(t){var e=this.transRule,n={};for(var i in t)t.hasOwnProperty(i)&&(e[i]!==i?n[e[i]]=t[i]:n[i]=t[i],"image_ids"===e[i]&&(n.image_ids=n.image_ids.filter((function(t){return!t.groupType})).map((function(t){return t.id}))),"images"===e[i]&&(n.images=n.images.map((function(t){var e={};return e.from_sector_id=t.fromGroupId,e.image_ids=t.imageIds,e}))));return n}},{key:"createGroup",value:(u=r()(a.a.mark((function t(e){var n,i,o,r,s,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.format(this.groups[e]),i=n.id,o=n.name,r=n.image_ids,s=n.parent_id,c={id:i,name:o,image_ids:r},s&&(c.parent_id=s),t.next=5,this.API.addSection(this.baseInfo.pid,[c]);case 5:if(!(u=t.sent)){t.next=8;break}return t.abrupt("return",u);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"deleteGroups",value:(s=r()(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.API.deleteGroup(this.baseInfo.pid,e);case 2:if(!(n=t.sent)){t.next=5;break}return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"updateGroup",value:(o=r()(a.a.mark((function t(e){var n,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.format(e),t.next=3,this.API.updateSection(this.baseInfo.pid,n);case 3:if(!(i=t.sent)){t.next=6;break}return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"moveGroups",value:(i=r()(a.a.mark((function t(e){var n,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.format(e),t.next=3,this.API.moveGroup(this.baseInfo.pid,n);case 3:if(!(i=t.sent)){t.next=6;break}return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"moveImage",value:(n=r()(a.a.mark((function t(e){var n,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.format(e),t.next=3,this.API.sortImages(this.baseInfo.pid,n);case 3:if(!(i=t.sent)){t.next=6;break}return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"moveImageToGroup",value:(e=r()(a.a.mark((function t(e){var n,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.format(e),t.next=3,this.API.moveImageToSection(this.baseInfo.pid,n);case 3:if(!(i=t.sent)){t.next=6;break}return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}()},L4B0:function(t,e,n){"use strict";n.r(e);var i=n("7KhD"),a=n("qrpJ"),o=(n("bTFl"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/index.vue",e.default=r.exports},L6Rp:function(t,e,n){"use strict";var i,a,o,r,s=n("o0o1"),c=n.n(s),u=n("yXPU"),l=n.n(u),d=n("RIqP"),p=n.n(d),h=n("PS4h"),f=n("RfDg");e.a={name:"MemberNotification",components:{memberSelector:h.a},props:{placeholderString:{type:String,default:""},presetString:{type:Array,default:[]},notificationType:{type:String,default:""},imagesStr:{type:String,default:""},userInfo:{type:Object,default:function(){return{projectID:"",teamID:"",route:"product",docId:""}}},document_name:{type:String,default:""}},data:function(){return{sign:!1,showSearchTextfield:!1,toSelectAll:!1,toSelectSearchAll:!1,showMemberList:!1,memberList:[],searchList:[],inputData:"",inputSearchData:"",textfieldHidden:!0,memberIn:[],isSearchOnFocus:!1,listShow:!1}},computed:{allMember:function(){var t=[];return this.memberList.forEach((function(e){t=[].concat(p()(t),p()(e.children))})),t},selected:function(){return this.allMember.filter((function(t){return t.selected})).map((function(t){return t.id}))},selectedAllSign:function(){return this.allMember.length===this.selected.length}},watch:{userInfo:{handler:function(t,e){this.getMemberList()},deep:!0},searchList:{handler:function(t,e){if(console.log("searchList",this.searchList),0!=this.searchList.length){var n=this.searchList.every((function(t,e){return t.selected}));this.toSelectSearchAll=n}}},inputSearchData:{handler:function(t,e){""===this.inputSearchData&&(this.searchList=[],this.toSelectSearchAll=!1)}},toSelectSearchAll:function(t){t?this.searchList.forEach((function(t){t.selected=!0})):this.searchList.forEach((function(t){t.selected=!1}))},toSelectAll:function(t){!t&&this.sign?console.log("toSelectAll()"):t||this.sign?(this.memberList.forEach((function(t){t.children&&t.children.length>0&&t.children.forEach((function(t){t.selected=!0}))})),this.sign=!1):this.memberList.forEach((function(t){t.children&&t.children.length>0&&t.children.forEach((function(t){t.selected=!1}))}))},selectedAllSign:function(t){t?this.toSelectAll=!0:(this.sign=!0,this.toSelectAll=!1)}},created:function(){},mounted:function(){this.$nextTick((function(){})),this.userInfo.projectID&&this.getMemberList()},methods:{searchCloseEvent:function(){this.searchList=[],this.toSelectSearchAll=!1,this.showSearchTextfield=!1,this.inputSearchData=""},searchClickEvent:function(){this.showSearchTextfield=!0,this.$refs.searchDom.focus()},getMemberList:(r=l()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProjectInfo();case 2:return t.next=4,this.getDepartmentInfo();case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),getProjectInfo:(o=l()(c.a.mark((function t(){var e,n,i=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("this.userInfo",this.userInfo),t.next=3,lanhuAPI.project.getProjectMembers(this.userInfo.projectID);case 3:return e=t.sent,n=e.members_not_in,this.memberIn=[],n.forEach((function(t){"超级管理员"!==t.role.display&&i.memberIn.push(t.id)})),t.abrupt("return",this.memberIn);case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),getDepartmentInfo:(a=l()(c.a.mark((function t(){var e,n,i=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lanhuAPI.department.getDepartmentInfoList(this.userInfo.teamID);case 2:e=t.sent,console.log("res",e),e&&e.length&&(n=e.filter((function(t,e){return t.children=t.userList.filter((function(t){return i.memberIn.includes(t.id)?(t.forbidden=!0,t.selected=!0):(t.forbidden=!1,t.selected=!1),!t.forbidden&&!t.selected&&t.id!=lanhuAPI.apiStorage.loginInfo.id})),delete t.userList,t.children.length>0})),this.memberList=n.sort((function(t,e){return e.orderIndex-t.orderIndex})),console.log("this.memberList",this.memberList),this.showMemberList=!0);case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)}),hiddenALL:function(){this.listShow=!1},close:function(){this.$emit("close")},textfieldClick:function(){0==this.listShow&&""==this.inputData&&(this.listShow=!0)},textfieldArrowClick:function(){this.listShow=!this.listShow},textfieldItemClick:function(t,e){console.log(t,e),this.listShow=!1,this.inputData+=t},formatTime:function(t){var e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),a=t.getHours(),o=t.getMinutes();return n=n<10?"0".concat(n):n,i=i<10?"0".concat(i):i,a=a<10?"0".concat(a):a,o=o<10?"0".concat(o):o,"".concat(e,"/").concat(n,"/").concat(i," ").concat(a,":").concat(o)},getWechatUrl:function(){var t="null"==localStorage.avatar||"undefined"==localStorage.avatar?"":localStorage.avatar,e=localStorage.name,n=localStorage.pName,i=this.inputData,a=this.document_name,o=this.formatTime(new Date),r="/mobile/wxMessage/#/wxTemplate?username=".concat(encodeURIComponent(e),"&avatar=").concat(encodeURIComponent(t),"&project_name=").concat(encodeURIComponent(n),"&content=").concat(encodeURIComponent(i),"&doc_name=").concat(encodeURIComponent(a),"&notify_time=").concat(encodeURIComponent(o),"&type=").concat(this.notificationType);return this.notificationType&&(r+="&imgsStr=".concat(this.imagesStr)),"https://".concat(f.b).concat(r)},sendEvent:(i=l()(c.a.mark((function t(){var e,n,i,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("select",this.selected,this.userInfo),e="/web/"+location.hash.slice(0,location.hash.indexOf("?")),n="",t.t0=this.notificationType,t.next="image"===t.t0?6:8;break;case 6:return e+="?pid=".concat(this.userInfo.projectID,"&is_email_notification=true&imgsStr=").concat(this.imagesStr),t.abrupt("break",10);case 8:return e+="?pid=".concat(this.userInfo.projectID,"&docId=").concat(this.userInfo.docId,"&docType=").concat(this.userInfo.docType,"&image_id=").concat(this.userInfo.docId),t.abrupt("break",10);case 10:return e+="&type=".concat(this.notificationType),e=location.host.indexOf("localhost")>=0||location.host.indexOf("0.0.0.0")>=0||location.host.indexOf("127.0.0.1")>=0?"https://dev.".concat(f.b).concat(e):"".concat(location.origin).concat(e),n=this.getWechatUrl(),t.next=15,lanhuAPI.notify.SendDocumentNotify(this.userInfo.projectID,this.userInfo.teamID,this.selected,e,this.inputData,this.document_name,n,this.notificationType);case 15:i=t.sent,"product"===this.$route.name&&this.userInfo.type&&window.Analyze("tab_prd",{notionmembers:this.userInfo.type}),console.log("re",i),this.$emit("sendEvent"),a={room:this.userInfo.teamID,data:{type:"product-notification",user_ids:this.selected,url:e,content:this.inputData,name:this.$g.remark.getRemarkName(localStorage.user_id,localStorage.name)}},"product"===this.$route.name?a.data.type="product-notification":"board"===this.$route.name&&(a.data.type="design-notification"),this.$root.eventHub.$emit("sendSocketNotification",a);case 22:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),searchInput:function(){var t=this,e=[];this.allMember.forEach((function(n){(n.name.includes(t.inputSearchData)||n.email.includes(t.inputSearchData))&&e.push(n)})),this.searchList=e},searchOnFocus:function(){this.isSearchOnFocus=!0},searchOnBlur:function(){this.isSearchOnFocus=!1,""===this.inputSearchData&&(this.showSearchTextfield=!1,this.searchList=[],this.toSelectSearchAll=!1)},openHelp:function(){window.open("http://help.lanhuapp.com/hc/kb/article/1319330/")}}}},L8gM:function(t,e,n){"use strict";var i=n("bBba");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},LePH:function(t,e,n){"use strict";var i=n("FFnQ");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},LlAU:function(t,e,n){"use strict";var i=n("jObG");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},M5U9:function(t,e,n){var i=n("sEG9");(t.exports=n("I1BE")(!1)).push([t.i,".member-notification-background {\n  width: 640px;\n  height: 588px;\n  background: white;\n  box-shadow: 0 8px 10px 0px rgba(14, 23, 38, 0.02), 0 6px 30px 5px rgba(40, 120, 255, 0.05), 0 16px 24px 2px rgba(14, 23, 38, 0.02);\n  border-radius: 4px;\n  position: relative;\n}\n.member-notification-arrow {\n  position: absolute;\n  color: #d8d8d8;\n  margin-left: 572px;\n  margin-top: 430px;\n  width: 20px;\n  height: 20px;\n  background-size: 100% 100%;\n}\n.member-notification-arrow:hover {\n  color: #2878ff;\n}\n.member-notification-textfield {\n  position: absolute;\n  margin-left: 40px;\n  margin-top: 423px;\n}\n.member-notification-textfield .mu-text-field-content {\n  padding-right: 30px;\n}\n.member-notification-search-textfield {\n  position: absolute;\n  margin-left: 71px;\n  margin-top: 83px;\n  width: 360px;\n  height: 24px;\n  padding-left: 5px;\n  padding-right: 5px;\n  z-index: 99;\n}\n.member-notification-underline-focus {\n  background-color: #2878ff;\n}\n.member-notification-close-icon {\n  position: absolute;\n  color: RGBA(202, 202, 202, 1);\n  margin-left: 580px;\n  margin-top: 12px;\n  cursor: pointer;\n  background-size: 100% 100%;\n}\n.member-notification-close-icon .img {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  background: url("+i(n("gFhu"))+") center center/24px no-repeat;\n}\n.member-notification-search-icon {\n  position: absolute;\n  color: RGBA(202, 202, 202, 1);\n  margin-left: 40px;\n  margin-top: 93px;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n  background-size: 100% 100%;\n}\n.member-notification-search-icon:hover {\n  color: RGBA(40, 120, 255, 1);\n}\n.member-notification-check-box {\n  position: absolute;\n  margin-left: 527px;\n  margin-top: 93px;\n}\n.mu-checkbox-icon {\n  pointer-events: none;\n  margin-right: 11px;\n}\n.mu-checkbox-icon-checked {\n  color: #2878ff !important;\n}\n.member-notification-member {\n  width: 535px;\n  height: 207px;\n  margin-top: 29px;\n}\n.member-notification-notifications-title {\n  position: absolute;\n  width: 120px;\n  margin-left: 261px;\n  height: 24px;\n  font-size: 20px;\n  font-family: PingFangSC-Medium;\n  font-weight: 500;\n  color: #0e1726;\n  line-height: 24px;\n  text-align: center;\n  margin-top: 40px;\n}\n.member-notification-sub-text {\n  font-size: 12px;\n  color: #9fa2a8;\n  text-align: center;\n  line-height: 17px;\n  position: absolute;\n  top: 68px;\n  left: 0;\n  right: 0;\n}\n.member-notification-sub-text span.icon-help {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  background-size: 100%;\n  background-image: url("+i(n("ffZF"))+");\n  position: relative;\n  top: 2px;\n  margin-left: 3px;\n  cursor: pointer;\n}\n.member-notification-sub-text span.icon-help:hover {\n  background-image: url("+i(n("iOHp"))+");\n}\n.member-notification-sendButton {\n  width: 180px;\n  height: 35px;\n  position: absolute;\n  margin-left: 230px;\n  margin-top: 520px;\n  background: #2878ff;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.05), 0px 4px 4px 0px rgba(40, 120, 255, 0.12), 0px 0px 4px 0px rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n  font-size: 14px;\n  font-family: PingFangSC-Regular;\n  font-weight: 400;\n  color: white;\n  line-height: 20px;\n  z-index: 1 !important;\n}\n.member-notification-list {\n  position: absolute;\n  width: 560px;\n  margin-left: 40px;\n  margin-top: 463px;\n  max-height: 120px;\n  z-index: 100;\n  overflow-y: auto;\n  overflow: -moz-scrollbars-none;\n  scrollbar-width: none;\n  border-radius: 8px 8px 8px 8px;\n}\n.member-notification-list::-webkit-scrollbar {\n  width: 0 !important;\n}\n.member-notification-list-container {\n  z-index: 100;\n  max-height: 120px;\n}\n.member-notification-list-container :hover {\n  background: #f6f7f9;\n  cursor: pointer;\n}\n.member-notification-list-item {\n  height: 40px;\n  text-align: left;\n  padding-left: 10px;\n  padding-top: 10px;\n  z-index: 100;\n  background: white;\n}\n.member-notification-member-selector {\n  position: absolute;\n  /*background: #000000;*/\n  height: 279px;\n  width: 560px;\n  margin-left: 40px;\n  margin-top: 137px;\n  overflow-y: scroll;\n}\n.member-notification-member-selector::-webkit-scrollbar {\n  width: 6px;\n}\n.member-notification-member-selector::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.2);\n  border: 1px solid #fff;\n  border-radius: 10px;\n}\n.member-notification-no-result {\n  position: absolute;\n  margin-top: 130px;\n  width: 640px;\n  text-align: center;\n  font-size: 14px;\n  letter-spacing: 1px;\n  line-height: 20px;\n  color: #8c9097;\n}\n.search-close {\n  position: absolute;\n  margin-top: 93px;\n  margin-left: 415px;\n  color: RGBA(110, 116, 125, 1);\n  z-index: 9999;\n  cursor: pointer;\n}\n.search-close:hover {\n  color: RGBA(40, 120, 255, 1);\n}",""])},MePe:function(t,e,n){var i=n("CnpA");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("2afa3ab0",i,!1,{})},NWsc:function(t,e,n){"use strict";var i=n("L8gM"),a=n("6RpB"),o=(n("4nN8"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/member-selector/components/member-info.vue",e.a=r.exports},NetE:function(t,e,n){"use strict";var i=n("fkVD");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},"O5/F":function(t,e,n){"use strict";e.a={data:function(){return{show:!1,count:0}},methods:{open:function(t){this.count=t,this.show=!0},cancel:function(){this.show=!1},confirm:function(){this.cancel(),this.$emit("confirm")}}}},OP81:function(t,e,n){t.exports=n.p+"imgs/ic_align_tope56eb02d.svg"},"OUs+":function(t,e,n){var i=n("jYiT");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("8cecad92",i,!1,{})},"Oc+a":function(t,e,n){"use strict";var i=n("FcCu");n.n(i).a},"P+t7":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".member-info {\n  position: relative;\n  height: 40px;\n  font-size: 0;\n}\n.member-info .member-avatar,\n.member-info .member-name,\n.member-info .member-email {\n  display: inline-block;\n  font-size: 14px;\n  line-height: 12px;\n}\n.member-info .member-avatar {\n  margin: 8px 0 8px 40px;\n  width: 24px;\n  height: 24px;\n}\n.member-info .member-name {\n  padding: 14px 0px 14px 8px;\n  max-width: 160px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.member-info .member-email {\n  position: absolute;\n  left: 248px;\n  padding: 14px 0;\n}\n.member-info.disabled {\n  color: #9fa2a8;\n}\n.member-info.disabled .mu-checkbox-icon-checked {\n  color: #9fa2a8 !important;\n}\n.member-info.disabled .member-avatar {\n  opacity: 0.8;\n}",""])},PBJm:function(t,e,n){"use strict";var i=n("Jhvi");n.n(i).a},PPyy:function(t,e,n){"use strict";var i=n("bhb8");e.a=i.a},PS4h:function(t,e,n){"use strict";var i=n("/tHR"),a=n("cEhV"),o=(n("t2+j"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/member-selector/member-selector.vue",e.a=r.exports},PbO0:function(t,e,n){"use strict";var i=n("jTE+");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},QFeR:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"",""])},QPjq:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu-base-box"},[n("div",{ref:"positionDot",staticClass:"position-dot",style:t.stylePositionDot}),t._v(" "),n("mu-popover",{staticClass:"menu-base-popover",attrs:{open:t.open,trigger:t.trigger||t.$refs.positionDot,anchorOrigin:t.anchorOrigin,targetOrigin:t.targetOrigin},on:{close:function(e){return t.$emit("close")}}},[t._t("default")],2)],1)},a=[];i._withStripped=!0},QR7N:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".menu-base-box .position-dot {\n  position: fixed;\n  height: 1px;\n  width: 1px;\n}",""])},"Qq/H":function(t,e,n){"use strict";var i=n("57zA");n.n(i).a},QsPa:function(t,e,n){"use strict";var i=n("hBCC");e.a=i.a},R9Jr:function(t,e,n){"use strict";var i=n("bdS8");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},ROHa:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".create-line-box {\n  position: absolute;\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n}\n.create-line-box path.line-body {\n  pointer-events: none;\n  stroke: #acacac;\n  marker-end: url(#Triangle);\n}\n.create-line-box svg {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}",""])},Ra03:function(t,e,n){"use strict";var i=n("QPjq");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},RqPi:function(t,e,n){var i=n("H1Px");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("81108b84",i,!1,{})},S5sg:function(t,e,n){"use strict";var i=n("zBNK");n.n(i).a},SQjp:function(t,e,n){"use strict";e.a={props:["list"],data:function(){return{padding:20}}}},STX4:function(t,e,n){var i=n("wyV1");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("30cb15cf",i,!1,{})},ShLa:function(t,e,n){t.exports=n.p+"imgs/ic_addimg@2x0e6cc247.png"},Sjl2:function(t,e,n){"use strict";var i=n("r2uM"),a=n("QsPa"),o=(n("s622"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/features/member-selector/components/member-avatar.vue",e.a=r.exports},Sm49:function(t,e,n){t.exports=n.p+"imgs/ic_align_lefta88911fd.svg"},TCS5:function(t,e,n){t.exports=n.p+"imgs/more_icon87bad893.svg"},TMWc:function(t,e,n){"use strict";var i=n("RIqP"),a=n.n(i);e.a={name:"BoardTree",props:{treeList:{type:Array,default:function(){return[]}},activeId:{type:String,default:function(){return""}},label:{type:Function|String},isDraggable:{type:Boolean,default:!0}},data:function(){return{}},mounted:function(){},methods:{dragEnd:function(t,e,n,i){var a;if("none"!==n){var o=t.lanhu_parentId;if("inner"===n&&!t.isLeaf&&(null===(a=e.childNodes)||void 0===a?void 0:a.length)&&this.nodesSort(e.childNodes),t.isLeaf){var r=t.data,s="inner"===n?e.data:e.parent.data;if(s.children.filter((function(t){return t.id===r.id})).length>1)return s.children=s.children.filter((function(t){return t.uuid!==r.uuid})),void this.$emit("rmGroupImage",o,r)}this.$emit("dragend",t,e,n,i)}},nodesSort:function(t){t.unshift.apply(t,a()(t.splice(-1,1)))},allowDrop:function(t,e,n){var i,a;return!("noGroup"===t.data.id||"noGroup"===e.data.id||"noGroup"===(null==e||null===(i=e.parent)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.id)||"inner"===n&&!e.data.groupType||"inner"!==n&&!t.data.groupType&&1===e.level||"inner"!==n&&!t.data.groupType&&!e.isLeaf||t.data.groupType&&!0===e.isLeaf)},renderNodeData:function(t,e,n){var i,a,o,r,s,c,u={};t.data.groupType?(t.isLeafState=!1,t.isLeaf=!1,u.icon="l-icon-folder-close","noGroup"!==t.data.id&&(u.operatIcon=["l-icon-more-column","l-icon-add-normal"]),u.statistics=(null===(o=t.data)||void 0===o||null===(r=o.subImageIds)||void 0===r?void 0:r.length)?String(null===(s=t.data)||void 0===s||null===(c=s.subImageIds)||void 0===c?void 0:c.length):"0"):(t.isLeafState=!0,"card"===t.data.type?u.icon="l-icon-card":u.icon="l-icon-image");return t.lanhu_parentId=(null===(i=t.parent)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.id)||null,u},nodeClick:function(t,e,n){this.$emit("nodeClick",t,e,n)},nodeDbClick:function(t,e,n){this.$emit("nodeDbClick",t,e,n)},clickNodeOperate:function(t,e,n){"l-icon-more-column"===t?this.$emit("openMoreMenu",n,e):"l-icon-add-normal"===t&&this.$emit("openAddMenu",n,e)}}}},Td4k:function(t,e,n){"use strict";var i=n("uiMb");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},TmZh:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".text-marker-tooltips-span {\n  color: red;\n  background-color: #f0f2f5;\n  font-size: 12px;\n}\n.text-marker-tooltips {\n  z-index: 2 !important;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-align-items: flex-end;\n          align-items: flex-end;\n  background-color: rgba(255, 255, 255, 0) !important;\n}\n.text-marker-box {\n  position: absolute;\n  z-index: 3;\n  text-align: left;\n  padding: 8px 8px;\n  box-sizing: content-box;\n  word-break: break-all;\n  background-color: #f0f2f5;\n  font-size: 14px;\n  line-height: 26px;\n  color: #0e1726;\n  resize: none;\n  border-radius: 4px;\n  border: none;\n  min-width: 80px;\n  font-weight: 400;\n  -webkit-user-select: text;\n          user-select: text;\n  word-wrap: break-word;\n  min-height: 26px;\n}\n.visualDiv {\n  opacity: 0;\n  left: 0px;\n  max-width: 357px;\n  z-index: -10000;\n  padding: 0px 0px;\n  min-width: 0px;\n}",""])},Tmea:function(t,e,n){"use strict";var i=n("s0Q8"),a=n("muu3"),o=(n("tT5i"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,"1c7af5de",null);r.options.__file="src/view/project/editor/components/svg-marker.vue",e.a=r.exports},UChI:function(t,e,n){"use strict";var i=n("dyXK");e.a=i.a},V5SA:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-dialog",{attrs:{open:t.show,title:"确认删除",dialogClass:"dialog_box"},on:{close:t.cancel}},[t._v("\n  删除 "+t._s(t.count||0)+" 个选择项\n  "),n("mu-flat-button",{staticClass:"demo-flat-button-cancel",attrs:{slot:"actions",label:"取消"},on:{click:t.cancel},slot:"actions"}),t._v(" "),n("mu-flat-button",{staticClass:"demo-flat-button-red",attrs:{slot:"actions",label:"删除"},on:{click:t.confirm},slot:"actions"})],1)},a=[];i._withStripped=!0},VCKc:function(t,e,n){"use strict";var i=n("LlAU"),a=n("s2tH"),o=(n("rODK"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/text-marker.vue",e.a=r.exports},Vecl:function(t,e,n){t.exports=n.p+"imgs/add_design_icon_grey17ee4e50.svg"},Wqm5:function(t,e,n){"use strict";var i=n("qLM1"),a=n("KHd+"),o=Object(a.a)(i.a,void 0,void 0,!1,null,null,null);o.options.__file="src/features/navTree/mixins/menu-component.mixin.vue",e.a=o.exports},X3MU:function(t,e,n){"use strict";var i=n("/nvm");e.a=i.a},XMXQ:function(t,e,n){var i=n("sEG9");(t.exports=n("I1BE")(!1)).push([t.i,'@charset "UTF-8";\n.loading {\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  -webkit-justify-content: center;\n          justify-content: center;\n  -webkit-align-items: center;\n          align-items: center;\n  width: 100vw;\n  height: 100vh;\n  background-color: #f0f2f5;\n}\n.loading_text {\n  margin-top: 26px;\n  width: 154px;\n  height: 20px;\n  font-size: 14px;\n  font-family: PingFangSC-Regular, PingFang SC;\n  font-weight: 400;\n  color: #8a8da8;\n  line-height: 20px;\n}\n#stage-container {\n  background: #f0f2f5;\n}\n#stage-container .limitbox {\n  position: fixed;\n  left: 65px;\n  bottom: 20px;\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  color: #adb0b6;\n  z-index: 100;\n}\n#stage-container .limit_red {\n  color: #fe3855;\n}\n#stage-container .canvas-area {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: #f0f2f5;\n}\n#stage-container #shiftSelectTips {\n  z-index: 11112;\n  position: absolute;\n  pointer-events: none;\n  width: 183px;\n  height: 44px;\n  background: url('+i(n("zz/o"))+") left top/100% no-repeat;\n  padding-top: 8px;\n  padding-left: 26px;\n  font-size: 12px;\n  font-family: PingFangSC-Regular, PingFang SC;\n  font-weight: 400;\n  color: #ffffff;\n  line-height: 18px;\n}\n#stage-container .temp-dom {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: -1;\n  width: 100%;\n  height: 100%;\n  /*display: none;*/\n}\n#stage-container .temp-dom .merge-over,\n#stage-container .temp-dom .merge-over-group {\n  cursor: -webkit-image-set(url("+i(n("JC2d"))+") 1x, url("+i(n("ShLa"))+") 2x) 0 0, url("+i(n("JC2d"))+"), text !important;\n  /* Webkit */\n}\n#stage-container .temp-dom .merge-forbid {\n  cursor: -webkit-image-set(url("+i(n("5TZx"))+") 1x, url("+i(n("8s8O"))+") 2x) 0 0, url("+i(n("5TZx"))+'), text !important;\n  /* Webkit */\n}\n#stage-container .dynamic-line,\n#stage-container .create-line {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n#stage-container .dynamic-line .line-box,\n#stage-container .create-line .line-box {\n  width: 100%;\n  height: 100%;\n}\n#stage-container .merge-dom {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: -1;\n  width: 0;\n  height: 0;\n  background: rgba(40, 120, 255, 0.45);\n}\n#stage-container .merge-dom.show {\n  z-index: 1;\n}\n#stage-container .top-nav {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  -webkit-user-select: none;\n          user-select: none;\n  top: 12px;\n  z-index: 500;\n}\n#stage-container .top-nav .but-home {\n  position: absolute;\n  left: 24px;\n}\n#stage-container .top-nav .mid-but-bar {\n  -webkit-user-select: none;\n          user-select: none;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: 310px;\n  top: 0;\n  text-align: center;\n}\n#stage-container .top-nav .mid-but-bar.user-from-share {\n  left: auto;\n  right: -75px;\n}\n#stage-container .top-nav .mid-but-bar .lan-icon {\n  margin: 0 9px;\n}\n#stage-container .top-nav .right-but-bar {\n  -webkit-user-select: none;\n          user-select: none;\n  position: absolute;\n  right: 299px;\n  margin: auto;\n  width: 40px;\n  top: 0;\n  text-align: right;\n  margin-right: -8px;\n}\n#stage-container .top-nav .right-but-bar .lan-icon {\n  margin: 0 8px;\n}\n#stage-container .top-nav .right-but-bar:after {\n  content: " ";\n  display: block;\n  width: 1px;\n  background-color: rgba(207, 209, 212, 0.3);\n  position: absolute;\n  height: 18px;\n  right: -30px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n#stage-container .top-nav .user-from-share.right-but-bar {\n  right: 213px;\n}\n#stage-container .bottom-nav {\n  -webkit-user-select: none;\n          user-select: none;\n}\n#stage-container .bottom-nav .zoom-input {\n  -webkit-user-select: none;\n          user-select: none;\n  cursor: pointer;\n  display: inline-block;\n  width: 36px;\n  text-align: center;\n  color: #6e747d;\n  line-height: 32px;\n  vertical-align: top;\n}\n#stage-container .bottom-nav .zoom-input.break-scale-limit {\n  color: #ffa700;\n  font-weight: bold;\n}\n#stage-container .bottom-nav .hotkey-box {\n  position: absolute;\n  width: 280px;\n  height: 464px;\n  bottom: 44px;\n  right: -126px;\n  box-shadow: 0 2px 2px 0px rgba(40, 120, 255, 0.1), 0 0px 2px rgba(0, 0, 0, 0.12);\n  border-radius: 2px;\n  background: #fff;\n  max-height: 0;\n  visibility: hidden;\n  /*transition: all .2s ease-in;*/\n  overflow: hidden;\n}\n#stage-container .bottom-nav .hotkey-box.open {\n  visibility: visible;\n  max-height: 999px;\n  /*transition: all .2s ease-out;*/\n  overflow: visible;\n}\n#stage-container .bottom-nav .hotkey-box .bk-close {\n  position: absolute;\n  background: transparent;\n  width: 9999px;\n  height: 9999px;\n  top: -5999px;\n  left: -5999px;\n}\n#stage-container .bottom-nav .hotkey-box .hotkey-item {\n  height: 42px;\n  line-height: 42px;\n  text-align: left;\n  padding: 0 15px;\n  position: relative;\n}\n#stage-container .bottom-nav .hotkey-box .hotkey-item:hover {\n  background: #f7f7f7;\n}\n#stage-container .bottom-nav .hotkey-box .hotkey-item.but {\n  cursor: pointer;\n}\n#stage-container .bottom-nav .hotkey-box .hotkey-item.but:hover {\n  background: rgba(217, 231, 239, 0.16);\n}\n#stage-container .bottom-nav .hotkey-box .hotkey-item.but:active {\n  background: rgba(217, 231, 239, 0.36);\n}\n#stage-container .bottom-nav .hotkey-box .key-icon {\n  position: absolute;\n  right: 10px;\n  text-align: right;\n  display: inline-block;\n  height: 100%;\n  vertical-align: middle;\n}\n#stage-container .bottom-nav .hotkey-box .key-icon img {\n  vertical-align: middle;\n}\n#stage-container .bottom-nav .hotkey-box .icon {\n  margin-right: 4px;\n  vertical-align: middle;\n}\n#stage-container .bottom-nav .icon-keyboard {\n  position: relative;\n}\n#stage-container .bottom-nav .etp-tip-dialog {\n  padding: 12px 17px;\n  box-sizing: border-box;\n  width: 330px;\n  background: white;\n  box-shadow: 0 6px 20px 5px rgba(40, 120, 255, 0.1), 0 16px 24px 2px rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  position: absolute;\n  top: 92px;\n  right: 37px;\n  font-size: 14px;\n  line-height: 27px;\n}\n#stage-container .bottom-nav .etp-tip-dialog .etp-tip-text {\n  color: #18212f;\n}\n#stage-container .bottom-nav .etp-tip-dialog .etp-tip-link {\n  float: right;\n  cursor: pointer;\n  background: url('+i(n("ezkt"))+") left center/24px no-repeat;\n  padding-left: 26px;\n  line-height: 24px;\n  height: 24px;\n  position: relative;\n  right: 27px;\n  top: 0;\n}\n#stage-container .bottom-nav .etp-tip-dialog .etp-tip-link a {\n  color: #2878ff;\n}\n#stage-container .bottom-nav .etp-tip-dialog .etp-tip-close {\n  width: 20px;\n  height: 20px;\n  background: url("+i(n("AOPd"))+") left top/100% no-repeat;\n  position: absolute;\n  top: 15px;\n  right: 13px;\n  cursor: pointer;\n  z-index: 111;\n}\n#stage-container .bottom-nav .etp-tip {\n  position: absolute;\n  right: 246px;\n  bottom: 27px;\n  z-index: 1;\n  padding-right: 16px;\n}\n#stage-container .bottom-nav .etp-tip a {\n  display: inline-block;\n  font-size: 14px;\n  font-weight: 600;\n  color: #2878ff;\n  height: 24px;\n  line-height: 24px;\n  background: url("+i(n("ezkt"))+') left center/24px no-repeat;\n  padding-left: 28px;\n}\n#stage-container .bottom-nav .etp-tip span {\n  padding-left: 16px;\n  color: #c7cad0;\n  font-size: 16px;\n  position: relative;\n  top: 1px;\n  left: 0;\n}\n#stage-container .bottom-nav .right-bottom-but-bar {\n  position: absolute;\n  right: 16px;\n  margin: auto;\n  width: 250px;\n  bottom: 24px;\n  text-align: right;\n  z-index: 9;\n}\n#stage-container .bottom-nav .right-bottom-but-bar .lan-icon {\n  margin: 0 8px;\n}\n#stage-container .bottom-nav .right-bottom-but-bar .lan-icon.disabled {\n  opacity: 0.5;\n  pointer-events: none;\n}\n#stage-container .bottom-nav .left-bottom-but-bar {\n  position: absolute;\n  left: 24px;\n  margin: auto;\n  width: 200px;\n  bottom: 24px;\n  text-align: left;\n}\n#stage-container .bottom-nav .left-bottom-but-bar .lan-icon {\n  margin: 0 8px;\n}\n#stage-container .lan-icon {\n  width: 32px;\n  height: 32px;\n  display: inline-block;\n  border-radius: 100%;\n  padding: 0;\n  position: relative;\n}\n#stage-container .lan-icon .mu-icon-button {\n  height: 32px;\n  width: 32px;\n  display: inline-block;\n  position: relative;\n  transition: none;\n  background-repeat: no-repeat;\n  background-position: center;\n  border-radius: 100%;\n}\n#stage-container .lan-icon .mu-circle-ripple,\n#stage-container .lan-icon .mu-ripple-wrapper {\n  height: 32px;\n  width: 32px;\n}\n#stage-container .lan-icon .material-icons {\n  font-size: 18px;\n}\n#stage-container .lan-icon.main.active:before {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  height: 0px;\n  width: 0px;\n  display: inline-block;\n  content: " ";\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.0392157), 0 1px 2px rgba(40, 120, 255, 0.3);\n  color: #6e747d;\n  border-radius: 100%;\n  transition: all 0.4s ease-out;\n  background: #5393ff;\n}\n#stage-container .lan-icon.main:hover:before, #stage-container .lan-icon.main.active:before {\n  transition: all 0.2s ease-in;\n  height: 32px;\n  width: 32px;\n}\n#stage-container .lan-icon.icon-home .mu-icon-button {\n  background-image: url('+i(n("ze5E"))+");\n}\n#stage-container .lan-icon.icon-home:hover .mu-icon-button {\n  background-image: url("+i(n("xYMV"))+");\n}\n#stage-container .lan-icon.icon-add .mu-icon-button {\n  background-image: url("+i(n("mJVG"))+");\n}\n#stage-container .lan-icon.icon-add:hover .mu-icon-button {\n  background-image: url("+i(n("ud4a"))+");\n}\n#stage-container .lan-icon.icon-add:active .mu-icon-button {\n  background-image: url("+i(n("zl2R"))+");\n}\n#stage-container .lan-icon.icon-link-line .mu-icon-button {\n  background-image: url("+i(n("1wWI"))+");\n}\n#stage-container .lan-icon.icon-link-line:hover .mu-icon-button {\n  background-image: url("+i(n("3893"))+");\n}\n#stage-container .lan-icon.icon-link-line.active .mu-icon-button {\n  background-image: url("+i(n("g9ok"))+");\n}\n#stage-container .lan-icon.icon-proto .mu-icon-button {\n  background-image: url("+i(n("qQNA"))+");\n}\n#stage-container .lan-icon.icon-proto:hover .mu-icon-button {\n  background-image: url("+i(n("RNtd"))+");\n}\n#stage-container .lan-icon.icon-proto:active .mu-icon-button {\n  background-image: url("+i(n("xqhJ"))+");\n}\n#stage-container .lan-icon.icon-zoom .mu-icon-button {\n  background-image: url("+i(n("WYZ0"))+");\n}\n#stage-container .lan-icon.icon-zoom:hover .mu-icon-button {\n  background-image: url("+i(n("Nvxc"))+");\n}\n#stage-container .lan-icon.icon-zoom:active .mu-icon-button {\n  background-image: url("+i(n("Ok+f"))+");\n}\n#stage-container .lan-icon.icon-keyboard .mu-icon-button {\n  background-image: url("+i(n("g7w/"))+");\n}\n#stage-container .lan-icon.icon-keyboard:hover .mu-icon-button, #stage-container .lan-icon.icon-keyboard.hold .mu-icon-button {\n  background-image: url("+i(n("pArd"))+");\n}\n#stage-container .lan-icon.icon-remove {\n  margin-right: 0 !important;\n}\n#stage-container .lan-icon.icon-remove .mu-icon-button {\n  background-image: url("+i(n("gP9l"))+");\n}\n#stage-container .lan-icon.icon-remove:hover .mu-icon-button {\n  background-image: url("+i(n("8x0b"))+");\n}\n#stage-container .lan-icon.icon-oadd {\n  margin-left: 0 !important;\n}\n#stage-container .lan-icon.icon-oadd .mu-icon-button {\n  background-image: url("+i(n("vHOy"))+");\n}\n#stage-container .lan-icon.icon-oadd:hover .mu-icon-button {\n  background-image: url("+i(n("lZ5S"))+");\n}\n#stage-container .lan-icon.icon-undo .mu-icon-button {\n  background-image: url("+i(n("8X1s"))+");\n}\n#stage-container .lan-icon.icon-undo:hover .mu-icon-button {\n  background-image: url("+i(n("Pnhw"))+");\n}\n#stage-container .project-empty-holder {\n  width: 802px;\n  z-index: 10;\n  position: fixed;\n  right: 0;\n  left: 0;\n  margin: auto;\n  top: 38%;\n}\n#stage-container .project-empty-holder .holder-img-box img {\n  -webkit-user-select: none;\n          user-select: none;\n}\n#stage-container .editor-project-empty-holder.project-empty-holder {\n  pointer-events: none;\n}\n#stage-container .editor-project-empty-holder.project-empty-holder .feature-btn-box {\n  pointer-events: auto;\n}\n#stage-container .temp-group {\n  position: absolute;\n  background-color: #e8eaec;\n  border-radius: 10px;\n}\n\n/* 右键菜单滚动bug */\n#stage-container .children-menu-list {\n  overflow-y: scroll !important;\n}",""])},Xdlb:function(t,e,n){"use strict";var i,a,o,r,s,c,u,l,d,p,h,f,m,g,v,b,x,w,y,_,k,S,I,C=n("RIqP"),T=n.n(C),O=n("o0o1"),j=n.n(O),$=n("yXPU"),P=n.n($),G=n("lSNA"),L=n.n(G),M=n("hbEN"),A=n("QEec"),D=n("7EGn"),E=n("A00C"),z=(n("0VSt"),n("GeMr")),F=n("HgRx"),N=n("pxy5"),B=n("dFy5"),R=n("L2JU"),q=n("YP4+"),H=n("shxl"),U=n("49rI"),V=n("mMKf"),W=n("JtUQ"),X=n("pH5y"),K=n("EKl+"),Z=n("66ei"),Q=n("Cq1/"),J=n("eGb/"),Y=n("rTZi"),tt=n("fOkI"),et=n("dSlU"),nt=n("ljsF"),it=n("parH"),at=n("Q9PM"),ot=n("1TIV"),rt=n("G0wp"),st=n("zQK/"),ct=n("i4Tr"),ut=n("Tmea"),lt=n("VCKc"),dt=n("YLmN"),pt=n("STwl"),ht=n("wIk4"),ft=n("+m4y"),mt=n("hlN8"),gt=n("DOxR"),vt=n("NTuW");function bt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return xt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){L()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.Rc=B.a,window.rc=B.a,e.a={name:"ItemProjectEditor",components:{ContextMenu:E.ContextMenu,BoardSlice:K.a,TipcardProgress:Z.a,addGroup:U.a,MemberNotification:Q.a,ShareDialog:J.a,DelToast:V.a,LanUpload:Y.a,Search:et.a,ProjectEmptyHolder:it.a,AlignTool:nt.a,lineBox:st.a,LanGuid:pt.a,boardTree:ft.a,lineSimple:ct.a,svgMarker:ut.a,textMarker:lt.a,lineGuide:dt.a,blackTec:gt.a},mixins:[W.a,X.a,tt.a],provide:function(){var t=this;return{stageFn:function(){return t.stage},groupModelFn:function(){return t.groupModel},editGroup:this.editGroup,AddNewGroup:this.addNewGroup,saveImages:this.saveImages,openShareDialog:this.openShareDialog,contextNatifytion:this.contextNatifytion,addGroupCancel:this.addGroupCancel,stageSelectGroup:this.stageSelectGroup,stageTargetFocus:this.stageTargetFocus,stageSelectImage:this.stageSelectImage,stageSelectImages:this.stageSelectImages,addImages:this.addImages,stageDragAddImgs:this.stageDragAddImgs,stageGroupUpdateData:this.stageGroupUpdateData,getCachedMatrix:this.getCachedMatrix,setFullView:this.setFullView,setZoomFromLocal:this.setZoomFromLocal,updateCacheMatrix:this.updateCacheMatrix}},beforeRouteLeave:function(t,e,n){var i;"detailDetach"!==t.name?this.$destroy():Object(N.d)(this.stage.removeEvents)&&this.stage.removeEvents(),null===(i=this.stat)||void 0===i||i.destroy(),n()},beforeRouteUpdate:function(t,e,n){var i=this;t.query.pid===this.pid&&t.query._t===e.query._t||(this.pid=t.query.pid,this.$destroy()),this.$nextTick((function(){i.focusItemByQuery()})),n()},beforeRouteEnter:function(t,e,n){"detailDetach"===e.name?n((function(t){t.$nextTick((function(){var e;"function"==typeof(null===(e=t.stage)||void 0===e?void 0:e.bindEvents)&&t.stage.bindEvents()}))})):n()},data:function(){return{guideParams:{},groupSet:{selectMode:!1,zoomMode:!1},bus:Object(vt.a)(this),ui_showKuki:!1,stage:{groups:null,images:null,actionHub:{actionQueue:[]},imagesModel:{list:[]},canvas:{lanhu_dragMove:{isMoving:!1,dataReady:!1},selectedObjects:{dynamicLinks:null},createLink:null,mergeEl:null,textEditObj:{}}},width:window.innerWidth,height:window.innerHeight,canvasLimit:{width:16374,height:16374},canvasSizeRatio:3,canvasSize:{width:window.innerWidth,height:window.innerHeight,paddingLeft:0,paddingTop:0,exceed:!1},pid:null,resData:{projectInfo:{},links:{},groups:[]},groupModel:{},selectGroup:{},selectGroupId:null,isShowAddGroup:!1,isShowGroupDialog:!1,editGroupId:null,editGroupTxt:"",editActiveGroup:{},ui_showShare:!1,uploadWindow:!1,showSearch:!1,isLimit:!1,isTeamLimit:!1,limitObj:{cur_cnt:"",hard_limit_cnt:""},limitTipShow:!1,limitTrigger:null,isLoading:!1,dialogShow:!1,shiftSelectTips:!1,userSettingsShiftShow:!1,shiftSelectTipsPos:{disX:6,disY:30}}},computed:yt(yt(yt(yt({},Object(R.e)("team",["team_id","curTeam","curTeamServerInfo"])),Object(R.e)("newBoard",["willGoVisit"])),Object(R.c)("team",["isEnterprise"])),{},{groups:function(){return this.groupModel.itemTree||[]},ctrlStr:function(){return 0===navigator.platform.indexOf("Mac")?"⌘":"ctrl"},imgLength:function(){var t,e;return(null===(t=this.stage.imagesModel)||void 0===t||null===(e=t.list)||void 0===e?void 0:e.length)||0},limitbox:function(){if(!this.limitObj.hard_limit_cnt)return{};if(!this.isFreeTeam)return{};var t={limitTipTxt:"",limitTxt:"",isLimit:!1},e=this.limitObj.hard_limit_cnt-this.limitObj.cur_cnt;return t.limitTipTxt=this.$i18n("免费团队每个项目限制 ${len} 张设计图",{len:this.limitObj.hard_limit_cnt}),t.isLimit=e<=0,t.limitTxt=this.$i18n("${curlen} / ${limitlen} 张",{curlen:this.limitObj.cur_cnt||"0",limitlen:this.limitObj.hard_limit_cnt}),t},isFreeTeam:function(){var t,e,n=Object(at.e)(this.curTeamServerInfo);return!((null===(t=this.$route.query)||void 0===t?void 0:t.tid)!==this.team_id||(null===(e=this.limitObj)||void 0===e?void 0:e.hard_limit_cnt)<0)&&(n&&(this.limitTrigger=this.$refs.limitTip),n)},canvasStyle:function(){var t={zIndex:1,background:"#f0f2f5",transformOrigin:"0 0",position:"absolute",left:0,top:0};return this.isSafari?t.transform="translate(0,0)":t.transform="translate(-"+this.canvasSize.paddingLeft+"px,-"+this.canvasSize.paddingTop+"px)",t},isSafari:function(){return window.safari},teamId:function(){return this.team_id||this.$route.query.team_id||this.$route.query.teamId},selectedIds:function(){var t,e;return(null===(t=this.stage)||void 0===t||null===(e=t.canvas)||void 0===e?void 0:e.selectedIds)||[]},activeSectionId:function(){var t=localStorage["_project_ActiveSectionSave_"+this.$route.query.pid],e=this.$route.query.activeSectionId||t&&t.slice(1,-1);return"null"!==e&&"undefined"!==e?e:null},dynamicLinks:function(){var t,e;return null===(t=this.stage.canvas)||void 0===t||null===(e=t.selectedObjects)||void 0===e?void 0:e.dynamicLinks},canvas:function(){return this.stage.canvas}}),watch:{"stage.images.length":function(t,e){t&&e&&Math.abs(t-e)&&this.stage.canvas.lanhu_wheel.bindUpdateView(t)}},created:function(){var t;this.canvasSize=this.calcCanvasSize();var e,n=Object(D.a)(this,"$route.query.pid");n||(null==this||null===(e=this.$route)||void 0===e||e.go(-1));this.pid=n,this.teamId&&!(null===(t=this.curTeam)||void 0===t?void 0:t.id)&&this.setTeamIdAction(this.teamId),(localStorage.debugFPS||localStorage.isGrayStage&&1===Math.floor(10*Math.random()))&&(this.stat=new ot.d(n)),this.$root.eventHub.$on("notifyStage",this.notifyStageEvent),this.$root.eventHub.$on("guidReady",this.guidReadyEvent)},mounted:function(){var t=this;this.isCanvasVisited(),this.listenVisitStatus(),this.initStage(),Object(mt.a)()&&window.Analyze("phonelinkcontent",{content:"board"}),this.logger.setPoint("visit",{eventId:"lanhu_project_quick_canvas_visit",eventName:"项目画布页（极速版本）访问"},{team_id:localStorage.team_id}),"share_mark"!=this.$route.query.type&&"share_board"!=this.$route.query.type||this.logger.setPoint("visit",{eventId:"lanhu_project_share_visit",eventName:"团队项目分享页访问"},{team_id:this.$route.query.teamId,project_id:this.$route.query.pid,shared_uuid:this.$route.query.userId}),window.LanhuDialog&&window.LanhuDialog.browserSuggest(),this.bus.$on("openBlactTec",(function(e){t.ui_showKuki=e})),actionCount(10052)},beforeDestroy:function(){var t,e,n,i,a,o;if(this.$root.eventHub.$off("changeProject",this.changeProjectEvent),this.$root.eventHub.$off("notifyStage",this.notifyStageEvent),this.$root.eventHub.$off("guidReady",this.guidReadyEvent),this.willGoVisit)return console.log("[debug] destroy"),void this.updateWillGoVisit(!1);(Object(N.d)(this.stage.actionHub.destroy)&&this.stage.actionHub.destroy(),Object(N.d)(this.stage.canvas.lanhu_wheel)&&this.stage.canvas.lanhu_wheel.destroy(),Object(N.d)(this.stage.canvas.lanhu_panMove)&&this.stage.canvas.lanhu_panMove.destroy(),Object(N.d)(null===(t=this.stage)||void 0===t?void 0:t.removeEvents))&&(null===(i=this.stage)||void 0===i||i.removeEvents());Object(N.d)(null===(e=this.stage)||void 0===e?void 0:e.off)&&(null===(a=this.stage)||void 0===a||a.off());Object(N.d)(null===(n=this.stat)||void 0===n?void 0:n.destroy)&&(null===(o=this.stat)||void 0===o||o.destroy());window.removeEventListener("resize",this.canvasResize,!1);var r=this.stage;if(Object(A.a)(r,(function(t,e){r[e]=null})),window.stageConfig)for(var s in window.stageConfig)window.stageConfig[s]="link"===s?{isLinking:!1,linkStarting:!1}:"historyList"===s?[{source:{},target:{}}]:"compressedInfoCache"===s?{}:"changedIds"===s?[]:null;window.stage=null,window.stageConfig=null,this.stage=null,this.stageConfig=null,this.handleWheel("destroy")},methods:yt(yt(yt({},Object(R.b)("team",["setTeamIdAction"])),Object(R.b)("newBoard",["updateWillGoVisit"])),{},{notifyStageEvent:function(t){this.notifyStageHandler(t)},guidReadyEvent:function(){this.$root.eventHub.$emit("boardPageEnter")},changeProjectEvent:function(t){this.changeProject(t)},listenVisitStatus:function(){var t=this;this.bus.$on("visitStatus",(function(e){t.updateWillGoVisit(e)}))},blacTecFunc:(I=P()(j.a.mark((function t(e){var n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in this.stage.setGroup(e),this.groupSet=yt(yt({},this.groupSet),e),e.hasOwnProperty("selectMode")&&window.Analyze("hidetech",{select:e.selectMode?"open":"close"}),e.hasOwnProperty("zoomMode")&&window.Analyze("hidetech",{zoom:e.zoomMode?"open":"close"}),n=yt({},e))if(n.hasOwnProperty(i))try{n[i]=JSON.stringify(n[i])}catch(t){console.log("err",t)}return t.next=8,z.c.postGroupSet([yt({group:"black_tech"},n)]);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return I.apply(this,arguments)}),textAreaBlur:function(t){var e=this,n=this.canvas.textEditObj.createTextArea;n&&n(t.params),this.guideParams.guideMark||(this.guideParams={guideMark:!0,endPoint:t.endPoint}),this.bus.$emit("checkGuide"),this.$nextTick((function(){e.canvas.textEditObj={}}))},calcCanvasSize:function(){var t=window.innerWidth,e=window.innerHeight,n=window.devicePixelRatio>1?2:1,i=t*this.canvasSizeRatio,a=e*this.canvasSizeRatio,o=!1,r=i;i*n>this.canvasLimit.width&&(r=this.canvasLimit.width/n,o=!0);var s=a;a*n>this.canvasLimit.height&&(s=this.canvasLimit.height/n,o=!0);var c=(r-t)/2,u=(s-e)/2;return o&&(r=t+2*(c/=2),s=e+2*(u/=2)),(/qqbrowser/i.test(navigator.userAgent)||window.safari)&&(r=t,s=e,c=0,u=0),{width:r,height:s,paddingLeft:c,paddingTop:u,exceed:o}},limitTipHover:function(){this.limitTipShow=!0},limitTipHoverExit:function(){this.limitTipShow=!1},initStage:(S=P()(j.a.mark((function t(){var e,n,i,a,o,r,s=this;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.countEnterReload()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.getTeamLimit(!0);case 4:if(!(null==(n=t.sent)||null===(e=n.message)||void 0===e?void 0:e.includes("418"))||Object(rt.k)(this.$route.query)){t.next=8;break}return console.warn("[editor] board will go, no need init"),t.abrupt("return");case 8:if(this.stage=new E.Stage("stage",{uuid:window.uuid,axios:window.lanhuAPI.APIBase.axios,computedCanvasSize:this.canvasSize}),this.modeMixinInit(),this.stage.team=this.curTeam,this.stage.isEnterprise=this.isEnterprise,this.stat&&(this.stage.deps.stat=this.stat),this.initProject(),this.stage.setApi({postImage:window.API.image.addImage,putImage:window.API.image.updateImage,deleteImages:window.API.image.deleteImage,postLink:window.API.line.addLine,deleteLinks:window.API.line.deleteLine,postGroup:window.API.section.addSection,putGroup:window.API.section.updateSection,deleteGroups:window.API.section.deleteSection,signUrl:this.getSignatureUrl,copyImage:window.API.image.copyImage,imagePost:function(t,e){return z.b.imagePost(s.teamId,s.pid,t,e)}}),this.stage.setRole(this.userRole),this.listenResize(),this.listenStageEvent(),this.listViewportChange(),i=this.getCachedMatrix(),!this.activeSectionId){t.next=26;break}return t.next=23,this.stage.allDataReady;case 23:this.$nextTick((function(){var t;null===(t=s.$refs.navTreeNew)||void 0===t||t.setDefaultSelectGroup(s.activeSectionId)})),t.next=27;break;case 26:i?(this.updateCacheMatrix(i),this.setZoomFromLocal()):(this.setFullView(),this.setZoomFromLocal());case 27:return this.$root.eventHub.$on("changeProject",this.changeProjectEvent),this.handleWheel("prevent"),this.focusItemByQuery(),t.next=32,z.c.getGroupSet(["black_tech"]);case 32:if("00000"==(a=t.sent).code){for(r in a.data=a.data||{},o=a.data.black_tech)if(o[r])try{o[r]=JSON.parse(o[r])}catch(t){}o&&(this.groupSet=yt(yt({},this.groupSet),o),this.stage.setGroup(o))}case 34:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)}),changeProject:function(t){var e=this.$route.query,n=e.type,i=e.teamId,a=e.pid,o={type:n,pid:t||a,teamId:i};t||(o._t=parseInt(Math.random()*Math.pow(10,10),10)),this.$router.replace({name:"ItemProjectEditor",query:o},void 0,(function(t){location.href=location.origin+location.pathname+location.hash}))},initGroupModel:function(){var t,e=this,n=this.resData.groups,i=(null===(t=this.stage)||void 0===t?void 0:t.images)||[];this.filterGroupImages(n,i);var a=yt({},window.API.sectionNew);a.getBaseInfo=function(){return{pid:e.$route.query.pid||window.pid||localStorage.pid}};var o={images:i,API:a};this.groupModel=new ht.a(n,o),this.stage&&(this.stage.groupModel=this.groupModel),localStorage.debugger&&(window.groupModel=this.groupModel)},filterGroupImages:function(t,e){var n=e.map((function(t){return t.id}));t.forEach((function(t){t.images=t.images.filter((function(t){return n.includes(t)}))}))},initProject:(k=P()(j.a.mark((function t(){var e,n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stat&&this.countCanvasLoad(),this.stage.getRemoteData({getImages:this.getImages,getGroups:this.getGroups,getLinks:this.getLinks}),t.next=4,this.stage.allDataReady;case 4:if(this.initGroupModel(),this.stage){t.next=7;break}return t.abrupt("return");case 7:return this.stage.team=this.curTeam,this.stage.isEnterprise=this.isEnterprise,this.stat&&(this.stage.deps.stat=this.stat),t.next=12,null===(e=this.stage.dataReady)||void 0===e?void 0:e.images;case 12:this.stage.canvas.lanhu_wheel.bindUpdateView((null===(n=this.stage)||void 0===n||null===(i=n.images)||void 0===i?void 0:i.length)||0),this.stage.canvas._objects.push=function(t){var e,n=!0,i=bt(this);try{for(i.s();!(e=i.n()).done;)e.value.id===t.id&&(n=!1)}catch(t){i.e(t)}finally{i.f()}n&&Array.prototype.push.call(this,t)};case 14:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)}),dragEnd:function(t,e,n){console.warn("before,after,inner",t,e,n)},countCanvasLoad:(_=P()(j.a.mark((function t(){var e,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.$route.query.pid,t.next=4,this.stage.countFirstLoading(e);case 4:n=t.sent,this.stat.setLoadTime(n),console.warn("LoadTime",n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return _.apply(this,arguments)}),getSignatureUrl:(y=P()(j.a.mark((function t(e){var n,i,a,o,r,s,c=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=c.length>1&&void 0!==c[1]?c[1]:"GET",a=c.length>2&&void 0!==c[2]?c[2]:"",o=[],null===(n=this.curTeam)||void 0===n?void 0:n.type){t.next=5;break}return t.abrupt("return",e);case 5:if(this.isEnterprise){t.next=7;break}return t.abrupt("return",e);case 7:if(Array.isArray(e)){t.next=9;break}return t.abrupt("return",o);case 9:if(this.team_id){t.next=11;break}return t.abrupt("return",o);case 11:if(this.pid){t.next=13;break}return t.abrupt("return",o);case 13:return r={team_id:this.team_id,method:i,urls:T()(e)},a&&(r.style=a),t.prev=15,t.next=18,window.lanhuAPI.urlTool.signUrl(e,r.style,r.method,r.team_id);case 18:return(null==(s=t.sent)?void 0:s.length)&&(o=s),t.abrupt("return",o);case 23:throw t.prev=23,t.t0=t.catch(15),new Error(t.t0);case 26:case"end":return t.stop()}}),t,this,[[15,23]])}))),function(t){return y.apply(this,arguments)}),removeOnlySet:function(t){var e=t;try{for(var n=t.images,i=[],a=[],o=0;o<n.length;o++){var r=n[o],s=r.type,c=r.group,u=r.id;"setChild"===s&&a.push(u),"set"===s&&i.push({index:o,group:c})}for(var l=function(){var t=p[d],e=t.index,i=t.group;a.some((function(t){return i.includes(t)}))||(n[e].group=[],n[e].type="image")},d=0,p=i;d<p.length;d++)l();e.images=n}catch(t){}return e},fetchProjectData:(w=P()(j.a.mark((function t(){var e,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.team_id||this.$route.query.team_id||this.$route.query.teamId,t.prev=1,t.next=4,z.b.getCompressedImages({pid:this.pid,team_id:e});case 4:n=t.sent,console.warn("res",n),this.resData.projectInfo=this.removeOnlySet(n),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(1),new Error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return w.apply(this,arguments)}),fetchLinksData:(x=P()(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.b.getLinks(this.pid);case 2:e=t.sent,this.resData.links=e;case 4:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)}),fetchGroupData:(b=P()(j.a.mark((function t(){var e,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.b.getProjectSectionsById(this.pid);case 2:n=t.sent,this.resData.groups=(null==n||null===(e=n.data)||void 0===e?void 0:e.sectors)||[];case 4:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)}),getImages:(v=P()(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchProjectData();case 2:return this.stage&&(this.stage.projectInfo=this.resData.projectInfo),t.abrupt("return",(null===(e=this.resData.projectInfo)||void 0===e?void 0:e.images)||[]);case 4:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),getGroups:(g=P()(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchGroupData();case 2:return t.abrupt("return",this.resData.groups);case 3:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)}),getLinks:(m=P()(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchLinksData();case 2:return t.abrupt("return",this.resData.links);case 3:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),getLimitImage:(f=P()(j.a.mark((function t(e){var n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={team_id:this.team_id,project_id:this.$route.query.pid||window.pid},!e){t.next=7;break}return t.next=4,F.a.getInstance().initGet("API.apiBase.project.getImageLimit",n,API.apiBase.project.getImageLimit);case 4:i=t.sent,t.next=10;break;case 7:return t.next=9,API.apiBase.project.getImageLimit(n);case 9:i=t.sent;case 10:this.limitObj=i,this.isLimit=Object(at.b)(i);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)}),getTeamLimit:(h=P()(j.a.mark((function t(e){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initIsTeamOverflow(e);case 2:if(!(null==(n=t.sent)?void 0:n.message)){t.next=5;break}return t.abrupt("return",n);case 5:this.isTeamLimit=n,n||this.getLimitImage(e);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)}),initIsTeamOverflow:(p=P()(j.a.mark((function t(e){var n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTeamQuotaInfo(e);case 2:if(!(null==(n=t.sent)?void 0:n.message)){t.next=5;break}return t.abrupt("return",n);case 5:return i=Object(at.i)(n),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)}),getTeamQuotaInfo:(d=P()(j.a.mark((function t(e){var n,i,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.team_id||this.$route.query.team_id||this.$route.query.teamId,i={team_id:n},!e){t.next=8;break}return t.next=5,F.a.getInstance().initGet("API.apiBase.team.getCombineTeamDetailInfo",i,API.apiBase.team.getCombineTeamDetailInfo);case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,API.apiBase.team.getCombineTeamDetailInfo(i);case 10:a=t.sent;case 11:if(!a){t.next=13;break}return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)}),setFullView:(l=P()(j.a.mark((function t(){var e,n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.stage.dataReady)||void 0===e?void 0:e.images;case 2:(null===(n=this.stage)||void 0===n||null===(i=n.images)||void 0===i?void 0:i.length)&&this.stage.fullView();case 3:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)}),getCachedMatrix:function(){var t=this.$route.query.pid||this.id,e=localStorage.editorCanvasMatrix?JSON.parse(localStorage.editorCanvasMatrix):null;if(e&&e[t])return console.warn("matrix matrix[pid]",e[t]),e[t]},updateCacheMatrix:function(t){this.stage.canvas.viewportTransform=t},listenResize:function(){var t=this;this.canvasResize=Object(M.a)((function(){var e=t.calcCanvasSize(),n=e.width,i=e.height;t.stage.resize(n,i),t.stage.canvas.updateCoords()}),300),window.addEventListener("resize",this.canvasResize,!1)},listenStageEvent:function(){var t=this,e=this.stage.STAGE_EVENT;this.stage.on("onLoading",(function(e){t.handleSetLoading(null==e?void 0:e.flag),t.focusItemByQuery()})),this.stage.on("selectedChange",(function(e){return t.selectedChange(null==e?void 0:e.selectedIds)})),this.stage.on("pan_moving",this.shiftSelectTipsShow),this.stage.on("lanhu_image:rename",this.renameImg),this.stage.on("lanhu_stage:init",this.changeProject.bind(this,null)),this.stage.on(e.postImages,(function(e){t.getTeamLimit()})),this.stage.on(e.deleteImages,(function(){t.getTeamLimit()})),this.stage.on("lanhu_stage_open_add_Group",(function(){t.$refs.navTreeNew.createGroup()})),this.stage.on("lanhu_stage:showDelImg",this.openDelToast),this.stage.on("lanhu_stage:shortcut:viewImgData",this.doShowImageInfo),this.stage.on("lanhu_stage:dbClick:imageObject",this.enterDetail),this.stage.on(e.imageLimit,(function(e){var n=e.count,i=e.cb;t.isLimited(n)||(t.getTeamLimit(),i())})),this.stage.on("lanhu_stage:notify:newUpdate",(function(e){return t.judgeNewUpdateNotify(e)})),this.stage.on("modifyImgsType",(function(e){e.forEach((function(e){var n={teamId:t.teamId,pid:t.pid,imageId:e.id,imagePreType:e.before,imageCurType:e.after};window.__LanhuLogger__.info("FILL","stageModifyType",n)}))}))},showAddGroup:function(){this.isShowAddGroup=!0},showGroupDialog:(u=P()(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)}),createGroup:(c=P()(j.a.mark((function t(e){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.addNewGroup();case 2:if(void 0===t.sent){t.next=8;break}return t.next=6,window.LanhuDialog.textInput(this.$i18n("添加分组"),this.$i18n("分组名称"));case 6:void 0!==t.sent&&(n={parent_id:e},this.groupModel.createGroup(n));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)}),addNewGroup:function(){var t=this;return this.editGroupId=null,this.editGroupTxt=null,this.editActiveGroup={},this.showAddGroup(),this.stage.openAddGroupMode(),new Promise((function(e,n){t.resolve=e}))},editGroup:function(t,e){var n=this;return this.editActiveGroup=t,this.editGroupId=t.id,this.editGroupTxt=t.name,(e||(null==t?void 0:t.images)||[]).forEach((function(t){var e=n.stage.canvas.findObjectById(t);if(e)e.lanhu_shape.active();else{var i=n.stage.canvas.getBtnShapeByImgId(t);i?i.lanhu_shape.active():console.warn("状态图按钮未找到")}})),this.showAddGroup(),this.stage.openAddGroupMode(),new Promise((function(t,e){n.resolve=t}))},addAndEditGroupConfirm:(s=P()(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Object.keys(this.stage.selectAll()),this.editGroupId?(this.resolve({type:"add",val:{ids:e}}),this.stage.editGroup(this.editGroupId,e)):this.resolve(e),this.isShowAddGroup=!1;case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)}),addGroupCancel:function(){this.isShowAddGroup=!1,this.stage.closeAddGroupMode(),this.resolve&&this.resolve(!1)},cancelAllSelect:function(){this.stage.cancelAllSelect()},deleteGroup:function(){},openShareDialog:function(){this.ui_showShare=!0},openDelToast:function(t){this.$refs.delToast.open(t)},delConfirm:function(){this.stage.deleteShapeAll()},renameImg:function(t){var e=this;console.log("renameImg: ",t);var n=t.oldName;this.stage.setStageModifyStatus(!0),window.LanhuDialog.textInput(this.$i18n("重命名"),this.$i18n("名称"),n).then((function(i){e.stage.setStageModifyStatus(!1),i&&(e.stage.imgRenameNotify({id:t.originData.id,newName:i}),window.Analyze("rename_artboard",{artboardname:i,oldname:n}))}))},addImages:function(t,e){this.stage.addImages(t,e)},stageSelectGroup:function(t){this.stage.selectGroup(t)},stageTargetFocus:function(t){this.stage.targetFocus(t)},stageSelectImage:function(t,e){this.stage.selectImage(t,e)},stageSelectImages:function(t){this.stage.selectImages(t)},stageDragAddImgs:function(t,e,n){this.stage.dragAddImgs(t,e,n)},stageGroupUpdateData:function(t){this.stage.updateGroupsData(t)},setZoomFromLocal:function(){var t=localStorage.getItem("editorScale");if(t&&"undefined"!==t){var e=Number(t);this.stageZoom(e)}},closeSearchHandler:function(){this.showSearch=!1,this.stage.setStageModifyStatus(!1)},closeWithFocusHandler:function(t){var e=t.id;this.closeSearchHandler(),this.stageTargetFocus(e)},closeWithEnterHandler:function(t){var e=t.id,n=t.type,i=t.url;this.closeSearchHandler(),window._userFromShare||(this.cacheToDetailImageUrl({id:e,url:i}),"setChild"===n?this.enterDetailBySetChild(e):this.$router.push({name:"detailDetach",query:Object.assign(this.$route.query,{project_id:this.$route.query.pid,image_id:e,fromEditor:!0})}))},revokeBtn:function(){window.Analyze("revoke")},cacheToDetailImageUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.url;if(e)if(this.showSearch&&n)this.cacheDetailImage(n);else{var i=this.stage.images||[],a=this.stage.imgDomCache||{},o=i.find((function(t){return t.id===e}));if(o){var r=Object.keys(a),s=r.find((function(t){return t.includes(o.url)}));s?(console.log("[debug] cachedDetailImage: ",s),this.cacheDetailImage(s)):console.warn("cache detail image failed, not found cached image")}else console.warn("cache detail image failed, not found image")}},cacheDetailImage:function(t){Object(H.c)(q.u,t)},doUploadFile:function(){this.$refs.uploadWindow.startUplaod()},listViewportChange:function(){var t=this,e=this.stage.canvas.viewportTransform,n=null;Object.defineProperty(this.stage.canvas,"viewportTransform",{get:function(){return e},set:function(i){e=i,clearTimeout(n),n=setTimeout((function(){var e,i,a;null===(e=t.stage)||void 0===e||e.canvas.fire("zoomed",{zoom:t.stage.canvas.getZoom()}),(null===(i=t.stage)||void 0===i||null===(a=i.canvas)||void 0===a?void 0:a.notCacheVpt)||t.cacheCanvasMatrix(),clearTimeout(n)}),600)}})},cacheCanvasMatrix:function(){var t,e=this.$route.query.pid||this.pid,n={};localStorage.editorCanvasMatrix&&(n=JSON.parse(localStorage.editorCanvasMatrix)),n[e]=null===(t=this.stage)||void 0===t?void 0:t.canvas.viewportTransform,localStorage.editorCanvasMatrix=JSON.stringify(n)},enterDetail:function(t){this.closeWithEnterHandler(t)},enterDetailBySetChild:function(t){if(!window._userFromShare){var e=this.resData.projectInfo.images;if(!e.length)return!1;var n=e.filter((function(e){return e.group.length&&e.group.includes(t)}));if(!n.length)return!1;var i=n[0],a=Object.assign(this.$route.query,{project_id:this.$route.query.pid,image_id:i.id,child:t,fromEditor:!0});this.$router.push({name:"detailDetach",query:a})}},setStageModifyStatus:function(t){this.stage.setStageModifyStatus(t)},isLimited:function(t){return this.isTeamLimit?(Object(at.a)(this.team_id,this.isFreeTeam),!0):!!this.isFreeTeam&&(this.isLimit?(LanhuDialog.msg(this.$i18n("该项目已到达 ${limit} 张设计图上限，建议新建项目后，继续上传",{limit:this.limitObj.hard_limit_cnt}),"上传失败","","好的"),!0):Object(at.c)(this.limitObj,t)?(LanhuDialog.msg(this.$i18n("该项目可再上传 ${difflen} 张设计图，建议重新选择设计图或新建项目后，继续上传",{difflen:this.limitObj.hard_limit_cnt-this.limitObj.cur_cnt}),"上传失败","","好的"),!0):void 0)},handleWheel:function(t){var e=this;if("prevent"===t)this.$nextTick((function(){var t=document.querySelector("#viewProject");t&&t.addEventListener("mousewheel",e.preventFn,!1)}));else if("destroy"===t){var n=document.querySelector("#viewProject");n&&n.removeEventListener("mousewheel",this.preventFn,!1)}},preventFn:function(t){Math.abs(t.deltaX)>=Math.abs(t.deltaY)&&t.preventDefault()},stageClear:function(){var t=this.stage.imgDomCache;Object(A.a)(t,(function(e,n){t[n]=null})),this.stage.imgDomCache={};var e=this.stage.canvas.findObjectsBySubType("link");(null==e?void 0:e.length)&&e.forEach((function(t){t.lanhu_shape.delete()})),this.stage.actionHub.reset(),this.stage.images=null,this.stage.groups=null,this.stage.canvas.selectedIds=[],this.stage.canvas._objects=[],this.stage.canvas.clear()},pageReset:function(){this.stageClear();var t=document.querySelector(".canvas-container");if(t){var e=t.querySelector("#stageDomContainer"),n=t.querySelector("#stageCircleContainer");e&&t.removeChild(e),n&&t.removeChild(n)}this.stage.canvas.backgroundColor="#f0f2f5",this.stage.canvas._objects=[],this.initProject();var i=this.getCachedMatrix();i?this.updateCacheMatrix(i):this.activeSectionId||this.setFullView(),this.setZoomFromLocal()},routeChange:function(t){if(!t)return!1;this.pid=t,this.pageReset()},judgeNewUpdateNotify:function(t){var e=this,n=t.newImg,i=t.updateImg,a=t.originData,o=t.stageFocusCallback,r=this.$route.query.activeSectionId||localStorage["_project_ActiveSectionSave_"+this.$route.query.pid];r&&"null"!==r&&"undefined"!==r&&'"null"'===r||o(),this.toastBatch(n,i),this.putBatch(a);for(var s=Object.keys(this.$route.query),c=function(t){var n=s[t];return ot.c.includes(n)?(e.setNotificationInfo(),e.$nextTick((function(){e.notificationOpenDialog(),e.setNotificationAnalysis(n)})),"break"):"continue"},u=0;u<s.length;u++){var l=c(u);if("continue"!==l&&"break"===l)break}},toastBatch:function(){var t=this;z.b.hasUpdateImage({project_id:this.$route.query.pid}).then((function(e){if("{}"!==JSON.stringify(e.data)&&(e.data.new.length>0||e.data.update.length>0)){var n=e.data.new,i=e.data.update,a="",o=0;n.length&&i.length?(a="发现 ${length} 张设计图有改动",o=n.length+i.length):n.length&&!i.length?(a="发现 ${length} 张新设计图",o=n.length):!n.length&&i.length&&(a="发现 ${length} 张设计图有更新",o=i.length);var r=t.translation(a,{length:o});LanhuDialog.toast(r)}}))},translation:function(t,e){return this.$i18n(t,e)},putBatch:function(t){var e=[];t.forEach((function(t){e.push({image_id:t.id,batch:0})})),window.API.image.updateImage(this.$route.query.pid||localStorage.getItem("pid"),e)},countEnterReload:function(){return window.g.enterStageCount||(window.g.enterStageCount=1),window.g.enterStageCount>=4?(window.location.reload(),!0):(window.g.enterStageCount+=1,!1)},focusItemByQuery:function(){this.$route.query.focusItem&&this.stageTargetFocus(this.$route.query.focusItem)},notifyStageHandler:function(t){console.log("notifyStageHandler: ",t);var e=t.messageType;if("new_image"===e){if(!t.imgIdList)return!1;this.stageSelectImages(t.imgIdList),this.stage.setCenterBySelect(!0)}else if("new_sector"===e){var n,i;if(!t.sectorId)return!1;var a=null===(n=this.$refs.navTreeNew)||void 0===n?void 0:n.groupModel.items[t.sectorId];null===(i=this.$refs.navTreeNew)||void 0===i||i.selectGroup(a)}},handleSetLoading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isLoading=t},isCanvasVisited:(r=P()(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUserSettings();case 2:(e=t.sent)&&("showCanvasDialog"in e&&delete e.showCanvasDialog,"showCanvasDialogBeta"in e&&delete e.showCanvasDialogBeta,this.dialogShow=!1!==e.showCanvasDialogOnline,this.userSettingsShiftShow=!1!==(null==e?void 0:e.shiftSelectTips),!1!==e.showCanvasDialogOnline&&(e.showCanvasDialogOnline=!1,this.setUserSettings(e)));case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),getUserSettings:(o=P()(j.a.mark((function t(){var e,n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={settings_type:"web_main"},t.next=4,F.a.getInstance().initGet("APIProject.user.getUserSetting",e,z.c.getUserSetting);case 4:return n=t.sent,i=JSON.parse(n),t.abrupt("return",i);case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),function(){return o.apply(this,arguments)}),setUserSettings:(a=P()(j.a.mark((function t(e){var n,i,a,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={web_main:JSON.stringify(e)},i="".concat(baseUrl,"/account/user_settings"),t.prev=2,t.next=5,axios.put(i,n);case 5:"00000"===(null==(o=t.sent)||null===(a=o.data)||void 0===a?void 0:a.code)&&console.log("极速画布设置自定义信息成功",o),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("极速画布设置自定义信息失败:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),function(t){return a.apply(this,arguments)}),selectedChange:function(t){this.$refs.navTreeNew&&(null==t?void 0:t.length)&&this.$refs.navTreeNew.cancelSelectImage(t)},uploadWindowclick:function(t){"Sketch"===t?window.Analyze("new_version",{addpicture:"Sketch"}):"XD"===t?window.Analyze("new_version",{addpicture:"XD"}):"Ps"===t&&window.Analyze("new_version",{addpicture:"Ps"}),this.uploadWindow=!1},shiftSelectTipsShow:(i=P()(j.a.mark((function t(){var e,n=this;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.userSettingsShiftShow&&(null===(e=this.stage.images)||void 0===e?void 0:e.length)){t.next=2;break}return t.abrupt("return");case 2:document.addEventListener("mousemove",this.shiftSelectTipsMove),this.userSettingsShiftShow=!1,setTimeout((function(){n.shiftSelectTips=!0}),200),setTimeout(P()(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.shiftSelectTips=!1,document.removeEventListener("mousemove",n.shiftSelectTipsMove),t.next=4,n.getUserSettings();case 4:if(!1!==(e=t.sent).shiftSelectTips){t.next=7;break}return t.abrupt("return");case 7:e.shiftSelectTips=!1,n.setUserSettings(e);case 9:case"end":return t.stop()}}),t)}))),4e3);case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),shiftSelectTipsMove:function(t){var e=document.getElementById("shiftSelectTips");e&&(e.style.left=t.clientX-this.shiftSelectTipsPos.disX+"px",e.style.top=t.clientY-this.shiftSelectTipsPos.disY+"px")}})}},Xq12:function(t,e,n){"use strict";var i=n("59bk");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},YInc:function(t,e,n){"use strict";e.a={props:{info:{default:{show:!0,bezier:null}}}}},YLmN:function(t,e,n){"use strict";var i=n("Xq12"),a=n("UChI"),o=(n("Oc+a"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/line-guide.vue",e.a=r.exports},Ylyl:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading"},[i("mu-circular-progress",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{size:60,strokeWidth:5}}),t._v(" "),i("div",{staticClass:"loading_text"},[t._v("设计图较多，全速加载中")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],ref:"stageContainer",attrs:{id:"stage-container"}},[i("lan-guid"),t._v(" "),i("nav",{directives:[{name:"disablescale",rawName:"v-disablescale"}],staticClass:"top-nav"},[i("div",{class:{"mid-but-bar":!0,"user-from-share":t.userFromShare()}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.userIsGuest(),expression:"!userIsGuest()"}],class:{"icon-link-line lan-icon main":!0,active:t.mode.link}},[i("mu-icon-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$i18n("连线  L"),expression:"$i18n('连线  L')"}],on:{click:t.toggleLinkMode}})],1),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.userIsGuest(),expression:"!userIsGuest()"}],staticClass:"icon-add lan-icon main"},[i("mu-icon-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$i18n("添加"),expression:"$i18n('添加')"}],ref:"menu_add",on:{click:function(e){t.ui_menu_add=!t.ui_menu_add}}}),t._v(" "),i("mu-popover",{attrs:{open:t.ui_menu_add,trigger:t.el_menu_add,anchorOrigin:{vertical:"bottom",horizontal:"middle"},targetOrigin:{vertical:"top",horizontal:"middle"}},on:{close:function(e){t.ui_menu_add=!1}}},[i("mu-menu",[i("mu-menu-item",{on:{click:t.doOpenUploadWindow}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[i("img",{staticClass:"svg-icon",attrs:{src:n("J/gX"),alt:""}}),t._v("\n                  "+t._s(t.$i18n("设计图"))+"\n                ")])]),t._v(" "),i("mu-menu-item",{on:{click:t.createTextCard}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[i("img",{staticClass:"svg-icon",attrs:{src:n("KiKs"),alt:""}}),t._v("\n                  "+t._s(t.$i18n("文字卡片"))+"\n                ")]),t._v(" "),i("span",{staticClass:"hotkey",attrs:{slot:"after"},slot:"after"},[t._v("T")])])],1)],1)],1),t._v(" "),t.userFromShare()&&!t.$g.runningOnCustomServer?i("span",{staticClass:"enterprise_entry"},[i("a",{attrs:{href:"https://"+t.$g.data.lanHost+"/introduction?from=share_board",target:"_blank"}},[t._v(t._s(t.$i18n("企业部署")))])]):t._e(),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.userFromShare(),expression:"!userFromShare()"}],staticClass:"icon-proto lan-icon main"},[i("mu-icon-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$i18n("交互原型"),expression:"$i18n('交互原型')"}],on:{click:t.doClickPrototype}})],1)]),t._v(" "),i("div",{class:{"right-but-bar":!0,"user-from-share":t.userFromShare()}},[i("span",{staticClass:"icon-zoom lan-icon main"},[i("mu-icon-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$i18n("搜索"),expression:"$i18n('搜索')"}],on:{click:t.toSearch}})],1)])]),t._v(" "),i("nav",{staticClass:"bottom-nav"},[i("div",{directives:[{name:"disablescale",rawName:"v-disablescale"}],staticClass:"right-bottom-but-bar"},[t.userFromShare()?t._e():i("span",{class:{"icon-undo lan-icon":!0,disabled:!t.stage.actionHub.actionQueue.length},attrs:{tooltip:t.$i18n("撤销")},on:{click:t.revokeBtn}},[i("mu-icon-button",{on:{click:t.undoHandler}})],1),t._v(" "),t.userFromShare()?t._e():i("span",{class:{"icon-keyboard lan-icon":!0,hold:t.ui_menu_hotkey},attrs:{tooltip:t.$i18n("快捷键")}},[i("mu-icon-button",{ref:"menu_hotkey",on:{click:t.check_ui_menu}}),t._v(" "),i("div",{class:{"hotkey-box":!0,open:t.ui_menu_hotkey}},[i("div",{staticClass:"bk-close",on:{click:function(e){t.ui_menu_hotkey=!1}}}),t._v(" "),i("div",{staticClass:"hotkey-item"},[t._v("\n               "),i("img",{staticClass:"icon",attrs:{src:n("KiKs"),alt:""}}),t._v(" "),i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("文字卡片"))+" ")]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("img",{staticClass:"icon",attrs:{src:n("nWWP"),alt:"",width:"18px",height:"18px"}}),t._v(" "),i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("创建分组"))+" ")]),t._v(" "),t._m(1)]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("img",{staticClass:"icon",attrs:{src:n("bhjk"),alt:"",width:"18px",height:"18px"}}),t._v(" "),i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("移动画布"))+" ")]),t._v(" "),i("span",{staticClass:"key-icon"},[i("span",{staticClass:"hotkey"},[t._v(t._s(t.$i18n("空格")))])])]),t._v(" "),i("mu-divider"),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("框选"))+" ")]),t._v(" "),t._m(2)]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("缩放"))+" ")]),t._v(" "),i("span",{staticClass:"key-icon"},[i("span",{staticClass:"hotkey"},[t._v(t._s(t.ctrlStr))]),t._v(" +\n                "),i("img",{attrs:{src:n("eMXZ"),alt:""}})])]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("全览"))+" ")]),t._v(" "),t._m(3)]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("最大化所选页"))+" ")]),t._v(" "),i("span",{staticClass:"key-icon"},[i("span",{staticClass:"hotkey"},[t._v(t._s(t.ctrlStr))]),t._v(" + "),i("span",{staticClass:"hotkey"},[t._v("2")])])]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("按 100% 显示"))+" ")]),t._v(" "),i("span",{staticClass:"key-icon"},[i("span",{staticClass:"hotkey"},[t._v(t._s(t.ctrlStr))]),t._v(" + "),i("span",{staticClass:"hotkey"},[t._v("0")])])]),t._v(" "),i("mu-divider"),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("删除页面或连线"))+" ")]),t._v(" "),t._m(4)]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("撤销"))+" ")]),t._v(" "),i("span",{staticClass:"key-icon"},[i("span",{staticClass:"hotkey"},[t._v(t._s(t.ctrlStr))]),t._v(" + "),i("span",{staticClass:"hotkey"},[t._v("Z")])])]),t._v(" "),i("div",{staticClass:"hotkey-item"},[i("span",{staticClass:"titile"},[t._v(" "+t._s(t.$i18n("重做"))+" ")]),t._v(" "),i("span",{staticClass:"key-icon"},[i("span",{staticClass:"hotkey"},[t._v(t._s(t.ctrlStr))]),t._v(" + "),i("span",{staticClass:"hotkey"},[t._v("Shift")]),t._v("+\n                "),i("span",{staticClass:"hotkey"},[t._v("Z")])])])],1)],1),t._v(" "),i("span",{staticClass:"zoom-cont"},[i("span",{staticClass:"icon-remove lan-icon "},[i("mu-icon-button",{attrs:{tooltip:t.$i18n("缩小")},on:{click:t.stageZoomDown}})],1),t._v(" "),i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.breakScaleLimit?t.$i18n("缩放倍数超过了保证清晰度的最大限度"):null,expression:"breakScaleLimit ? $i18n('缩放倍数超过了保证清晰度的最大限度') : null"}],ref:"zoomInput",class:{"zoom-input":!0,"break-scale-limit":t.breakScaleLimit},on:{dblclick:function(e){return t.btnToChangeStageZoom(1)},click:function(e){t.ui_menu_zoomInput=!0}}},[t._v("\n            "+t._s(Math.ceil(100*t.nowScale)||1)+"%")]),t._v(" "),i("mu-popover",{attrs:{open:t.ui_menu_zoomInput,trigger:t.el_menu_zoomInput,anchorOrigin:{vertical:"top",horizontal:"middle"},targetOrigin:{vertical:"bottom",horizontal:"middle"}},on:{close:function(e){t.ui_menu_zoomInput=!1}}},[i("mu-menu",[i("mu-menu-item",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t.$i18n("突破最大缩放倍率"),expression:"$i18n('突破最大缩放倍率')",modifiers:{bottom:!0}}],on:{click:function(e){t.btnToChangeStageZoom(Math.round(t.MAX_SCALE/2))}}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(Math.round(t.MAX_SCALE/2*100))+"% ")])]),t._v(" "),i("mu-divider"),t._v(" "),i("mu-menu-item",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t.$i18n("保证清晰度的最大缩放倍率"),expression:"$i18n('保证清晰度的最大缩放倍率')",modifiers:{bottom:!0}},{name:"show",rawName:"v-show",value:t.devicePixelRatio<2,expression:"devicePixelRatio < 2"}],on:{click:function(e){return t.btnToChangeStageZoom(t.MAX_SCALE/4)}}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(Math.round(t.MAX_SCALE/4*100))+"% ")])]),t._v(" "),i("mu-menu-item",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t.devicePixelRatio>=2?t.$i18n("在高清屏上保证清晰度的最大缩放倍率"):void 0,expression:"devicePixelRatio >= 2 ? $i18n('在高清屏上保证清晰度的最大缩放倍率') : undefined",modifiers:{bottom:!0}}],on:{click:function(e){return t.btnToChangeStageZoom(2)}}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" 200% ")])]),t._v(" "),i("mu-menu-item",{on:{click:function(e){return t.btnToChangeStageZoom(1.5)}}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" 150% ")])]),t._v(" "),i("mu-menu-item",{on:{click:function(e){return t.btnToChangeStageZoom(1)}}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" 100% ")])]),t._v(" "),i("mu-menu-item",{on:{click:function(e){return t.btnToChangeStageZoom(.5)}}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" 50% ")])]),t._v(" "),i("mu-menu-item",{on:{click:function(e){return t.btnToChangeStageZoom(.25)}}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" 25% ")])]),t._v(" "),i("mu-menu-item",{on:{click:t.fullView}},[i("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("全览"))+" ")])])],1)],1),t._v(" "),i("span",{staticClass:"icon-oadd lan-icon"},[i("mu-icon-button",{attrs:{tooltip:t.$i18n("放大")},on:{click:t.stageZoomUp}})],1)],1)])]),t._v(" "),t.groups.length?i("board-tree",{ref:"navTreeNew",on:{updateGroupDone:t.addGroupCancel}}):t._e(),t._v(" "),i("div",{staticClass:"canvas-area",attrs:{id:"canvas-area"}},[i("div",{style:t.canvasStyle,attrs:{id:"canvas-wrap"}},[i("div",{staticClass:"temp-group"}),t._v(" "),i("canvas",{attrs:{id:"stage",width:t.canvasSize.width,height:t.canvasSize.height}})]),t._v(" "),i("div",{staticClass:"temp-dom",attrs:{id:"temp-dom"}}),t._v(" "),t.canvas.lanhu_dragMove.dataReady?i("div",{directives:[{name:"show",rawName:"v-show",value:t.canvas.lanhu_dragMove.isMoving,expression:"canvas.lanhu_dragMove.isMoving"}],staticClass:"dynamic-line",attrs:{id:"dynamic-line"}},[i("lineBox",{attrs:{list:t.canvas.selectedObjects.dynamicLinks}})],1):t._e(),t._v(" "),t.canvas.createLink?i("div",{staticClass:"create-line"},[i("line-simple",{attrs:{info:t.canvas.createLink}})],1):t._e(),t._v(" "),i("div",{staticClass:"merge-dom",attrs:{id:"merge-dom"}}),t._v(" "),t.canvas.textEditObj&&t.canvas.textEditObj.id?i("text-marker",{attrs:{pid:t.pid,teamId:t.teamId,textObj:t.canvas.textEditObj},on:{textBLur:t.textAreaBlur}}):t._e()],1),t._v(" "),i("add-group",{directives:[{name:"show",rawName:"v-show",value:t.isShowAddGroup,expression:"isShowAddGroup"}],attrs:{group:t.editActiveGroup},on:{confirm:t.addAndEditGroupConfirm,cancel:t.addGroupCancel,cancelAll:t.cancelAllSelect,deleteGroup:t.addGroupCancel}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.shiftSelectTips,expression:"shiftSelectTips"}],attrs:{id:"shiftSelectTips"}},[t._v("按住 Shift 可框选设计图")]),t._v(" "),i("ContextMenu",{ref:"stageContextMenu",on:{execEvent:t.execEventHandler}}),t._v(" "),i("board-slice",{ref:"boardslice",attrs:{itemSelectPool:t.itemSelectPool},on:{downloadStart:function(e){return t.$refs.stageContextMenu.closeHandler()}}}),t._v(" "),i("tipcard-progress",{attrs:{show:t.downloadStatus.show,value:t.downloadStatus.value,max:t.downloadStatus.max,fail:t.downloadStatus.fail},on:{closeDownloadTip:t.closeDownloadTip}}),t._v(" "),i("mu-dialog",{attrs:{open:t.notificationOpen,dialogClass:"memberNotificationClass"}},[i("member-notification",{attrs:{placeholderString:t.placeholderString,presetString:t.presetString,userInfo:t.notificationInfo,imagesStr:t.selectImages,notificationType:t.notificationType},on:{close:t.notificationCloseDialog,sendEvent:t.sendEvent}})],1),t._v(" "),t.ui_showShare?i("share-dialog",{on:{closeShare:function(e){t.ui_showShare=!1}}}):t._e(),t._v(" "),i("del-toast",{ref:"delToast",on:{cancel:t.delCancel,confirm:t.delConfirm}}),t._v(" "),i("lan-upload",{directives:[{name:"show",rawName:"v-show",value:t.uploadWindow,expression:"uploadWindow"}],ref:"uploadWindow",attrs:{show:t.uploadWindow},on:{uploaded:t.addImages,close:t.uploadWindowclick}}),t._v(" "),t.showSearch?i("search",{on:{closeSearch:t.closeSearchHandler,closeWithFocus:t.closeWithFocusHandler,closeWithEnter:t.closeWithEnterHandler}}):t._e(),t._v(" "),t.stage.images&&!t.stage.images.length?i("project-empty-holder",{directives:[{name:"disablescale",rawName:"v-disablescale"}],staticClass:"editor-project-empty-holder",attrs:{"hide-upload-button":!t.$g.role.userCanEdit()},on:{addImg:t.doUploadFile}}):t._e(),t._v(" "),t.isFreeTeam?i("div",{ref:"limitTip",staticClass:"limitbox",on:{mouseenter:t.limitTipHover,mouseleave:t.limitTipHoverExit}},[i("mu-tooltip",{attrs:{label:t.limitbox.limitTipTxt,show:t.limitTipShow,trigger:t.limitTrigger,verticalPosition:"top",horizontalPosition:"right"}}),t._v(" "),i("div",{class:{limit_red:t.limitbox.isLimit}},[t._v(t._s(t.limitbox.limitTxt))])],1):t._e(),t._v(" "),i("align-tool",{directives:[{name:"show",rawName:"v-show",value:t.selectedIds.length>1&&"onlooker"!==t.userRole,expression:"selectedIds.length > 1 && userRole !== 'onlooker'"}],attrs:{"select-len":t.selectedIds.length}})],1),t._v(" "),i("svg-marker"),t._v(" "),i("line-guide",{attrs:{guideParams:t.canvas.newLineObj}}),t._v(" "),t.ui_showKuki?i("black-tec",{attrs:{groupSet:t.groupSet},on:{blacTecFunc:t.blacTecFunc,close:function(e){t.ui_showKuki=!1}}}):t._e()],1)},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"key-icon"},[e("span",{staticClass:"hotkey"},[this._v("T")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"key-icon"},[e("span",{staticClass:"hotkey"},[this._v("G")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"key-icon"},[e("span",{staticClass:"hotkey"},[this._v("Shift")]),this._v(" +\n                "),e("img",{attrs:{src:n("LONk"),alt:""}}),this._v(" 或\n                "),e("img",{staticStyle:{transform:"scaleX(-1)"},attrs:{src:n("LONk"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"key-icon"},[e("span",{staticClass:"hotkey"},[this._v("F")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"key-icon"},[e("span",{staticClass:"hotkey"},[this._v("Delete")])])}];i._withStripped=!0},aCWm:function(t,e,n){"use strict";e.a={name:"SvgMarker"}},"aUI+":function(t,e,n){"use strict";var i=n("SQjp");e.a=i.a},bBba:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"member-info":!0,disabled:t.userItem.forbidden},on:{click:function(e){return t.toggleCheck(t.userItem)}}},[t.userItem.hasOwnProperty("avatar")?n("member-avatar",{staticClass:"member-avatar",attrs:{userItem:t.userItem}}):t._e(),t._v(" "),n("div",{staticClass:"member-name"},[t._v(t._s(t.$g.remark.getRemarkName(t.userItem.id,t.userItem.name,t.$g.remarkVersion)))]),t._v(" "),t.userItem.email?n("div",{staticClass:"member-email"},[t._v(t._s(t.userItem.email))]):t._e(),t._v(" "),n("mu-checkbox",{staticClass:"member-checkbox",attrs:{disabled:t.userItem.forbidden&&t.userItem.selected},model:{value:t.userItem.selected,callback:function(e){t.$set(t.userItem,"selected",e)},expression:"userItem.selected"}})],1)},a=[];i._withStripped=!0},bIy8:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".dialog_box {\n  width: 480px;\n  z-index: 999999;\n}\n.dialog_box button {\n  margin-right: 8px;\n}\n.dialog_box button:last-child {\n  margin-right: 0;\n}\n.dialog_box .mu-dialog-title {\n  color: rgba(0, 0, 0, 0.87);\n  font-size: 20px;\n  font-weight: 500;\n}\n.dialog_box .mu-dialog-actions {\n  min-height: 48px;\n}\n.dialog_box .demo-flat-button-cancel {\n  color: #9fa2a8;\n}\n.dialog_box .demo-flat-button-red {\n  background: #ff7fa4;\n  color: #fff;\n  border-radius: 4px;\n}\n.dialog_box .demo-flat-button-red:hover {\n  background: #fe3755;\n}",""])},bTFl:function(t,e,n){"use strict";var i=n("H5ex");n.n(i).a},bdS8:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board-tree"},[n("l-tree",{ref:"baseTree",attrs:{draggable:t.isDraggable,currentShowOperatIcon:"",theme:"web","node-key":"uuid",indent:15,nodeHeight:40,data:t.treeList,"allow-drop":t.allowDrop,"expand-on-click-node":!1,props:{label:t.label},"render-node-data":t.renderNodeData,"render-after-expand":!1},on:{"node-click":t.nodeClick,"node-db-click":t.nodeDbClick,"node-drag-end":t.dragEnd,clickNodeOperate:t.clickNodeOperate}})],1)},a=[];i._withStripped=!0},bhb8:function(t,e,n){"use strict";e.a={components:{},props:{groupSet:{type:Object,default:{selectMode:!1,zoomMode:!1}}},data:function(){return{Gsetting:window.Gsetting,nicescroll:null}},computed:{},watch:{},beforeDestroy:function(){},methods:{changeGroup:function(t,e){var n={};n[t]=e,this.$emit("blacTecFunc",n)},close:function(){this.$emit("close")}}}},bkby:function(t,e,n){t.exports=n.p+"imgs/more_icon_active2ee297f2.svg"},cEhV:function(t,e,n){"use strict";var i=n("C04Y");e.a=i.a},cQ6N:function(t,e,n){var i=n("JwMg");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("00da4202",i,!1,{})},dSlU:function(t,e,n){"use strict";var i=n("Td4k"),a=n("39r4"),o=(n("4hpX"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/search.vue",e.a=r.exports},dyXK:function(t,e,n){"use strict";var i=n("o0o1"),a=n.n(i),o=n("yXPU"),r=n.n(o),s=n("lSNA"),c=n.n(s),u=n("GeMr"),l=n("NTuW");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h;e.a={props:{guideParams:{type:Object,default:{}}},data:function(){return{bus:Object(l.a)(this),showMark:!1,lastMark:!1,guideData:{},posit:{left:0,top:0}}},watch:{guideParams:function(t,e){var n=this;if(t.guideMark&&t.guideMark!=e.guideMark){if("right"==t.direct?this.posit={left:t.endPoint.x-196,top:t.endPoint.y-16,direct:t.direct}:"left"==t.direct?this.posit={left:t.endPoint.x+10,top:t.endPoint.y-16,direct:t.direct}:"down"==t.direct?this.posit={left:t.endPoint.x-93,top:t.endPoint.y-32-10,direct:t.direct}:"up"==t.direct&&(this.posit={left:t.endPoint.x-93,top:t.endPoint.y+10,direct:t.direct}),this.showMark=!0,this.lastMark){var i={group:"line_guide",counts:String(Number(this.guideData.counts)+1),lastTime:String((new Date).getTime())};this.guideData=p({},i),u.c.postGroupSet([i])}setTimeout((function(){n.showMark&&(n.showMark=!1)}),4e3)}}},mounted:(h=r()(a.a.mark((function t(){var e,n,i,o=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.getGroupSet(["line_guide"]);case 2:(e=(e=t.sent).data||{}).line_guide?((n=e.line_guide).counts<3&&(new Date).getTime()-n.lastTime>864e5&&(this.lastMark=!0),this.guideData=p({},n)):(i={group:"line_guide",counts:String(0),lastTime:String((new Date).getTime())},this.guideData=p({},i),this.lastMark=!0),this.bus.$on("checkGuide",(function(){if(o.guideData.counts<3){var t={group:"line_guide",counts:String(3),lastTime:String((new Date).getTime())};u.c.postGroupSet([t]),o.guideData=p({},t)}}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})}},eLBi:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line-box"},[e("svg",{staticClass:"line-svg",attrs:{id:"dynamic-line-svg",width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},this._l(this.list,(function(t,n){return e("g",{key:"item_"+n,class:{"line-svg-path":!0,selected:t.data.selected}},[e("path",{staticClass:"line-body",attrs:{id:t.id,d:t.data.bezier,stroke:"black",fill:"none"}})])})),0)])},a=[];i._withStripped=!0},edod:function(t,e,n){t.exports=n.p+"imgs/ic_distribute_horizontallyd5d1e0fa.svg"},eudr:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("menu-base",{attrs:{open:t.menuOpen,xy:t.xy,trigger:t.menuTrigger,targetOrigin:{vertical:"top",horizontal:"left"}},on:{close:t.close}},[n("mu-menu",[n("mu-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.nowSection,expression:"nowSection"}],attrs:{disabled:t.$g.role.userIsGuest()},on:{click:function(e){t.editSection(),t.close()}}},[n("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("编辑"))+" ")])]),t._v(" "),n("mu-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.nowSection,expression:"nowSection"}],attrs:{disabled:t.$g.role.userIsGuest()},on:{click:function(e){t.deleteSection(),t.close()}}},[n("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("删除"))+" ")])]),t._v(" "),n("mu-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.nowSection,expression:"nowSection"}],attrs:{disabled:t.$g.role.userFromTower()||t.$g.role.userIsGuest()},on:{click:function(e){t.renameSection(),t.close()}}},[n("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("重命名"))+" ")])]),t._v(" "),n("mu-divider",{directives:[{name:"show",rawName:"v-show",value:t.nowSection,expression:"nowSection"}]}),t._v(" "),n("mu-menu-item",{attrs:{disabled:t.$g.role.userIsGuest()},on:{click:function(e){t.downloadSection(),t.close()}}},[n("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("下载图片"))+" ")])]),t._v(" "),n("mu-menu-item",{on:{click:function(e){t.selectSection(),t.close()}}},[n("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("选中设计图"))+" ")])]),t._v(" "),n("mu-menu-item",{attrs:{disabled:t.$g.role.userIsGuest()},on:{click:function(e){t.$g.shareTrigger="groupItem",t.openShareProject(),t.close()}}},[n("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("分享设计图"))+" ")])]),t._v(" "),n("mu-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.nowSection,expression:"nowSection"}],attrs:{disabled:t.$g.role.userIsGuest()},on:{click:function(e){t.notificationOpenDialog(),t.close()}}},[n("span",{staticClass:"menu-item-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$i18n("通知项目成员"))+" ")])])],1)],1)},a=[];i._withStripped=!0},fOkI:function(t,e,n){"use strict";var i,a=n("lSNA"),o=n.n(a),r=n("o0o1"),s=n.n(r),c=n("yXPU"),u=n.n(c),l=n("L2JU");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.a={data:function(){return{mode:{link:!1,image:!1,textCard:!1},ui_menu_add:!1,el_menu_add:null,undoEnable:!1,ui_menu_hotkey:!1,ui_menu_zoomInput:!1,el_menu_zoomInput:null,MAX_SCALE:4,MIN_SCALE:.01,nowScale:1,inFullView:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.el_menu_add=t.$refs.menu_add.$el}))},methods:{modeMixinInit:function(){if(console.log("[debug] >> mode mixin mounted, willGo: ",this.willGoVisit),!this.willGoVisit){this.el_menu_zoomInput=this.$refs.zoomInput;var t=this.stage.getZoomInterval();this.MAX_SCALE=t.max,this.MIN_SCALE=t.min,console.warn("this.MAX_SCALE",this.MAX_SCALE,t.max),this.modeEventListener()}},modeEventListener:function(){var t=this;this.stage.on("lanhu_mode:exit:TextCard",(function(){t.mode.textCard=!1})),this.stage.on("lanhu_stage:fullView",(function(){t.toggleFullViewMode(!0),t.setNowScale()})),this.stage.on("lanhu_stage:scaling",(function(){t.setNowScale()})),this.stage.on("lanhu_stage:transform",(function(e){t.setNowScale(e)})),this.stage.on(this.stage.STAGE_EVENT.openLinkMode,(function(){t.mode.link=!t.mode.link,t.stage.canvas.linkTrigger="hotkey",window.Analyze("logic_link",{addlogiclinkway:"hotkey"})}))},setNowScale:function(t){this.nowScale=t||this.stage.canvas.getZoom(),localStorage.setItem("editorScale",this.nowScale),100*this.nowScale==0&&window.Analyze("featuresbug",{percent0:this.nowScale})},toggleLinkMode:function(){this.mode.link=!this.mode.link,window.Analyze("logic_link",{addlogiclinkway:"clicklogiclink"}),this.stage.canvas.linkTrigger="clicklogiclink"},userFromShare:function(){return window._userFromShare},userIsGuest:function(){return window._userIsGuest},doOpenUploadWindow:function(){this.uploadWindow=!0,this.ui_menu_add=!1,actionCount(10002,this.team_id)},createTextCard:(i=u()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTeamLimit();case 2:if(!this.isLimited(1)){t.next=5;break}return t.abrupt("return",!1);case 5:this.mode.textCard=!0,this.stage.openCreateCard(),this.ui_menu_add=!1,window.Analyze("add_text_card");case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),doClickPrototype:function(){var t={pid:this.$route.query.pid,fromEditor:!0};this.$router.push({name:"edit",query:t}),window.Analyze("boardtoproto")},toSearch:function(){this.showSearch=!0,this.stage.setStageModifyStatus(!0),this.stage.initInViewImages(!0)},undoHandler:function(){this.stage.actionHub.undo()},check_ui_menu:function(){this.ui_menu_hotkey=!this.ui_menu_hotkey,this.ui_menu_hotkey&&window.Analyze("chortcut_icon",{click:"design_board"})},stageZoomUp:function(){var t=devicePixelRatio<2?16:8,e=Math.min(t,2*this.nowScale);this.btnToChangeStageZoom(e)},stageZoomDown:function(){var t=Math.max(.01,this.nowScale/2);this.btnToChangeStageZoom(t)},stageZoomReset:function(){this.toggleFullViewMode(!1),this.setNowScale(1),this.stage.canvas.setZoom(1),this.stage.zoomGif()},stageZoom:function(t){this.toggleFullViewMode(!1),this.setNowScale(t),this.stage.zoomGif()},fullView:function(){this.stage.fullView()},toggleFullViewMode:function(t){this.inFullView=t},btnToChangeStageZoom:function(t){var e=-this.stage.canvas._position.x+window.innerWidth/2,n=-this.stage.canvas._position.y+window.innerHeight/2;this.stage.canvas.zoomToPoint({x:e,y:n},t),this.stage.canvas.setViewPortHighDefinitionUrls(),this.stageZoom(t)}},watch:{"mode.link":function(t){t?this.stage.openLinkMode():this.stage.closeLinkMode()}},computed:p(p({},Object(l.e)("newBoard",["willGoVisit"])),{},{breakScaleLimit:function(){return this.nowScale>=this.MAX_SCALE/2},devicePixelRatio:function(){return window.devicePixelRatio},MAX_SCALE_4X:function(){return window.devicePixelRatio<2?8:4}})}},fVgk:function(t,e,n){"use strict";var i=n("YInc");e.a=i.a},ffZF:function(t,e,n){t.exports=n.p+"imgs/icon-help-default97312d2f.png"},fkVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.info.show,expression:"info.show"}],staticClass:"create-line-box"},[e("svg",{staticClass:"line-svg",attrs:{id:"create-link-svg",width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{staticClass:"line-svg-path"},[e("path",{staticClass:"line-body",style:{strokeWidth:4*this.info.zoom+"px"},attrs:{id:"create-link",d:this.info.bezier,stroke:"black",fill:"none"}})])])])},a=[];i._withStripped=!0},fq7h:function(t,e,n){"use strict";var i=n("koU5");n.n(i).a},ftpb:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".invite-member-part {\n  width: 100%;\n  display: inline-block;\n  height: 40px;\n  line-height: 40px;\n}\n.invite-member-part.selected-color {\n  background-color: #edeff3;\n}\n.invite-member-part.disabled .part-checkbox .mu-checkbox-icon-checked {\n  color: #9fa2a8 !important;\n}\n.invite-member-part .part-info {\n  font-size: 0;\n  margin-left: 28px;\n  display: inline-block;\n  line-height: 40px;\n  vertical-align: middle;\n}\n.invite-member-part .part-info .part-info-name,\n.invite-member-part .part-info .part-info-number {\n  font-size: 14px;\n  display: inline-block;\n  overflow: hidden;\n}\n.invite-member-part .part-info .part-info-name {\n  margin-right: 10px;\n  max-width: 300px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.invite-member-part .part-checkbox.checkbox-type .mu-checkbox-icon {\n  pointer-events: none;\n  margin-right: 11px;\n}",""])},gFhu:function(t,e,n){t.exports=n.p+"imgs/closec82118f2.svg"},gIrO:function(t,e,n){"use strict";var i=n("u5gX");e.a=i.a},"h/eP":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".function-stage-bg {\n  position: absolute;\n  z-index: 499;\n  width: 100%;\n  height: 100%;\n}\n.function-stage {\n  text-align: left;\n  position: absolute;\n  display: inline-block;\n  background: rgba(255, 255, 255, 0.98);\n  width: 420px;\n  min-height: 200px;\n  top: 100px;\n  border-radius: 4px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.16), 0 13px 14px rgba(0, 0, 0, 0.08);\n  right: calc(50% - 210px);\n  z-index: 500;\n}\n.function-stage .movehand {\n  width: 100%;\n  height: 80px;\n  cursor: move;\n  position: absolute;\n  top: 0;\n}\n.function-stage .mu-slider {\n  margin: 0;\n}\n.function-stage .dd .mu-badge-container {\n  position: absolute;\n  right: 10px;\n}\n.function-stage .close-but {\n  position: absolute;\n  z-index: 2;\n}\n.function-stage .text-icon {\n  vertical-align: top;\n  line-height: 16px;\n}\n.function-stage .red {\n  color: #d60000;\n}\n.function-stage .disbox .mu-item-wrapper.disabled {\n  pointer-events: none;\n  -webkit-filter: grayscale(1);\n          filter: grayscale(1);\n  opacity: 0.45;\n}\n.function-stage .mu-item.show-right {\n  padding-right: 80px;\n}\n.function-stage .sub-list {\n  overflow: hidden;\n  overflow-y: scroll;\n}\n.function-stage .sub-list .mu-sub-header:first-child {\n  margin-top: -17px;\n}\n.function-stage .sub-list .mu-sub-header {\n  font-size: 14px;\n  line-height: 22px;\n  padding-top: 12px;\n  color: rgba(40, 120, 255, 0.86);\n  font-weight: 400;\n}\n.function-stage .sub-list .mu-item-title {\n  font-size: 14px;\n}\n.function-stage .sub-list .mu-item-text {\n  font-size: 12px;\n}\n.function-stage .sub-list a {\n  color: rgba(0, 75, 181, 0.71);\n}\n.function-stage .sub-list a:hover {\n  transition: all 0.1s;\n  color: #2878ff;\n}",""])},h1xF:function(t,e,n){var i=n("iBDJ");"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,a);i.locals&&(t.exports=i.locals)},hBCC:function(t,e,n){"use strict";e.a={name:"MemberAvatar",filters:{nameTail:function(t){return t?t.slice(-1):""}},props:{userItem:{type:Object,default:{}}},data:function(){return{avatarBackgroundColor:{red:"#f44336",pink:"#e91e63",purple:"#9c27b0",deepPurple:"#673ab7",indigo:"#3f51b5",blue:"#2196f3",lightBlue:"#03a9f4",cyan:"#00bcd4",teal:"#009688",green:"#4caf50",lightGreen:"#8bc34a",lime:"#cddc39",yellow:"#ffeb3b",amber:"#ffc107",orange:"#ff9800",deepOrange:"#ff5722",brown:"#795548",blueGrey:"#607d8b",grey:"#9e9e9e"}}},mounted:function(){this.$nextTick((function(){}))},methods:{getAvatarColor:function(t){return Object.keys(this.avatarBackgroundColor).includes(t)?this.avatarBackgroundColor[t]:t}}}},hFyy:function(t,e,n){var i=n("P+t7");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("32c5e17e",i,!1,{})},i1DC:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".newLineTextGuide {\n  width: 186px;\n  height: 32px;\n  position: absolute;\n  text-align: center;\n  top: 200px;\n  left: 200px;\n  background: #2878ff;\n  font-size: 14px;\n  color: #ffffff;\n  box-sizing: border-box;\n  border-radius: 4px;\n  z-index: 11;\n  -webkit-animation: shake2 800ms ease-in-out infinite alternate;\n  animation: shake2 800ms ease-in-out infinite alternate;\n}\n.newLineTextGuide .guideTrangle {\n  position: relative;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  height: 100%;\n  width: 100%;\n}\n.newLineTextGuide .guideTrangle .trangleContent {\n  width: 0px;\n  height: 0px;\n  position: absolute;\n  border-top: 4px solid transparent;\n  border-left: 6px solid #2878ff;\n  border-bottom: 4px solid transparent;\n}\n.newLineTextGuide .guideTrangle .right {\n  top: 13px;\n  right: -6px;\n}\n.newLineTextGuide .guideTrangle .up {\n  top: -6px;\n  left: 91px;\n  -webkit-transform: rotate(-90deg);\n          transform: rotate(-90deg);\n}\n.newLineTextGuide .guideTrangle .left {\n  top: 13px;\n  left: -6px;\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n.newLineTextGuide .guideTrangle .down {\n  top: 31px;\n  left: 91px;\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n@-webkit-keyframes shake2 {\nfrom {\n    margin-left: -5px;\n}\nto {\n    margin-left: 0px;\n}\n}\n@keyframes shake2 {\nfrom {\n    margin-left: -5px;\n}\nto {\n    margin-left: 0px;\n}\n}",""])},i4Tr:function(t,e,n){"use strict";var i=n("NetE"),a=n("fVgk"),o=(n("rlqu"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/line-simple.vue",e.a=r.exports},iBDJ:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},iNdf:function(t,e,n){"use strict";var i=n("OUs+");n.n(i).a},iOHp:function(t,e,n){t.exports=n.p+"imgs/icon-helpd4c42229.png"},jObG:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"text-marker-box visualDiv",attrs:{id:"visualDiv"}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textAreaValue,expression:"textAreaValue"}],staticClass:"text-marker-box",style:{left:t.textObj.left-t.sizeParams.width/2-t.padding+"px",top:t.textObj.top-t.sizeParams.height/2-t.padding+"px",width:t.sizeParams.width+"px",height:t.sizeParams.height+"px",transform:"scale("+t.textObj.zoom+")"},attrs:{spellcheck:"false",id:"text_marker",placeholder:"连线说明…","max-length":"300"},domProps:{value:t.textAreaValue},on:{keydown:t.keydown,blur:t.textBlur,input:function(e){e.target.composing||(t.textAreaValue=e.target.value)}}}),t._v(" "),t.textAreaValue.length>=300?n("div",{staticClass:"text-marker-box text-marker-tooltips",style:{left:t.textObj.left-t.sizeParams.width/2-t.padding+"px",top:t.textObj.top-t.sizeParams.height/2-t.padding-30+"px",width:t.sizeParams.width+"px",height:t.sizeParams.height+60+"px",transform:"scale("+t.textObj.zoom+")"}},[n("span",{staticClass:"text-marker-tooltips-span"},[t._v("已达最大输入上限")])]):t._e()])},a=[];i._withStripped=!0},"jTE+":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"invite-member-part":!0,"selected-color":t.isSelectAll,disabled:t.disabled}},[n("div",{staticClass:"part-info"},[n("span",{staticClass:"part-info-name",domProps:{innerHTML:t._s(t.partInfo.name)}}),t._v(" "),n("span",{staticClass:"part-info-number"},[t._v("("+t._s(t.partInfo.children.length)+")")])]),t._v(" "),n("span",{on:{mouseup:function(t){t.stopPropagation()}}},[n("mu-checkbox",{class:{"part-checkbox":!0,"checkbox-type":t.checkAllText},attrs:{label:t.checkAllText,disabled:t.disabled},on:{change:t.handleSelectAll},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])},a=[];i._withStripped=!0},jYiT:function(t,e,n){var i=n("sEG9");(t.exports=n("I1BE")(!1)).push([t.i,".menu-title-add-section {\n  background: url("+i(n("9Mbi"))+") left center no-repeat;\n  padding-left: 24px;\n  font-size: 14px;\n  color: #18212f;\n}\n.menu-title-add-section.disable {\n  color: rgba(0, 0, 0, 0.38);\n  background: url("+i(n("GCzz"))+") left center no-repeat;\n}\n.menu-title-add-design {\n  background: url("+i(n("r5qH"))+") left center no-repeat;\n  padding-left: 24px;\n  font-size: 14px;\n  color: #18212f;\n}\n.menu-title-add-design.disable {\n  color: rgba(0, 0, 0, 0.38);\n  background: url("+i(n("Vecl"))+") left center no-repeat;\n}",""])},k3UP:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".avatar-wrapp {\n  overflow: hidden;\n}\n.avatar-wrapp .avatar {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n.avatar-wrapp .avatar.text-avatar {\n  display: -webkit-flex;\n  display: flex;\n  -webkit-justify-content: center;\n          justify-content: center;\n  -webkit-align-items: center;\n          align-items: center;\n  font-weight: 400;\n  color: #fff;\n}",""])},kQAe:function(t,e,n){"use strict";var i=n("TMWc");e.a=i.a},koU5:function(t,e,n){var i=n("h/eP");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("79a82099",i,!1,{})},ljsF:function(t,e,n){"use strict";var i=n("pKMO"),a=n("4i++"),o=(n("qnNv"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/align-tool.vue",e.a=r.exports},"m/2V":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".check-wrapper {\n  position: relative;\n  width: 100%;\n}\n.check-wrapper .lan-dnd-item {\n  padding: 0 !important;\n}\n.check-wrapper .lan-dnd-item .lan-icon {\n  position: absolute;\n  color: #9fa2a8;\n  top: 50%;\n  margin-top: -12px;\n  width: 24px !important;\n  height: 24px !important;\n}\n.check-wrapper .lan-dnd-item .lan-icon .material-icons {\n  font-size: 24px !important;\n  width: 24px !important;\n  height: 24px !important;\n}\n.check-wrapper .lan-dnd-item .mu-checkbox-icon-checked {\n  color: #2878ff;\n}\n.check-wrapper .lan-dnd-item .mu-checkbox,\n.check-wrapper .lan-dnd-item .member-checkbox {\n  float: right;\n  height: 40px;\n  display: grid;\n  -webkit-align-items: center;\n          align-items: center;\n  margin-right: 8px;\n}\n.check-wrapper .lan-dnd-item .mu-checkbox .mu-checkbox-ripple-wrapper,\n.check-wrapper .lan-dnd-item .member-checkbox .mu-checkbox-ripple-wrapper {\n  width: 40px;\n  height: 40px;\n  top: 0;\n  left: -8px;\n}",""])},mMKf:function(t,e,n){"use strict";var i=n("odUF"),a=n("5brj"),o=(n("v14X"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/del-toast.vue",e.a=r.exports},mVK6:function(t,e,n){"use strict";var i=n("F2n9");n.n(i).a},mcc0:function(t,e,n){"use strict";var i=n("STX4");n.n(i).a},mfCF:function(t,e,n){"use strict";var i=n("eLBi");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},muu3:function(t,e,n){"use strict";var i=n("aCWm");e.a=i.a},oc5f:function(t,e,n){"use strict";var i,a,o=n("lSNA"),r=n.n(o),s=n("RIqP"),c=n.n(s),u=n("o0o1"),l=n.n(u),d=n("yXPU"),p=n.n(d),h=n("Wqm5"),f=n("Q9PM");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.a={mixins:[h.a],inject:["stageFn","groupModelFn","editGroup","saveImages","openShareDialog","contextNatifytion","stageSelectImages"],props:["images"],data:function(){return{nowSection:null}},computed:{stage:function(){return this.stageFn()},groupModel:function(){return this.groupModelFn()}},mounted:function(){var t=this;this.$nextTick((function(){t.stage.editGroupName=t.renameSection,t.stage.deleteSection=t.deleteSection}))},methods:{renameSection:(a=p()(l.a.mark((function t(e){var n,i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.nowSection||e){t.next=2;break}return t.abrupt("return");case 2:return n=e||this.nowSection,i=this,this.stage.setStageModifyStatus(!0),t.next=7,window.LanhuDialog.textInput(i.$i18n("编辑分组名称"),i.$i18n("分组名称"),Object(f.k)(n.name));case 7:a=t.sent,this.stage.setStageModifyStatus(!1),a&&(n.name=Object(f.j)(a.replace(/^\s*/,"")),API.section.updateSection({name:a.replace(/^\s*/,""),sector_id:n.id,project_id:window.pid})),actionCount(10050);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)}),deleteSection:(i=p()(l.a.mark((function t(e){var n,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,i=e||this.nowSection,t.next=4,LanhuDialog.msg(n.$i18n("删除分组相当于取消编组，不会删除分组内的页面"),n.$i18n("删除分组"),n.$i18n("flatred-red"));case 4:if(!t.sent){t.next=9;break}return t.next=8,this.groupModel.deleteGroup(i.id);case 8:this.$emit("deleteGroup");case 9:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)}),selectSection:function(){var t;if(this.nowSection){var e=this.nowSection.subImageIds;e=c()(new Set(e)),this.stageSelectImages(),this.stage.selectImages(e)}else if(null===(t=this.images)||void 0===t?void 0:t.length){var n=this.images.map((function(t){return t.id}));this.stage.selectImages(n)}this.stage.canvas.requestRenderAll()},getSectionAllImagesMap:function(t){var e=this,n={};return t.children&&t.children.length&&t.children.forEach((function(t){t.children?n=g(g({},n),e.getSectionAllImagesMap(t)):n[t.id]=t})),n},selectAllSectionImageId:function(t){var e=t.children.length-t.itemIds.length,n=t.itemIds;if(e>0)for(var i=0;i<e;i++){var a=this.selectAllSectionImageId(t.children[i]);n=n.concat(a)}return n},notificationOpenDialog:function(){var t=this;this.$nextTick((function(){t.contextNatifytion("groups")}))},downloadSection:function(){var t,e;if(null===(t=this.nowSection)||void 0===t||null===(e=t.children)||void 0===e?void 0:e.length){var n=this.getSectionAllImagesMap(this.nowSection);this.saveImages(n)}else if(!this.nowSection){var i={};this.images.forEach((function(t){"image"!==t.type&&"set"!==t.type&&"setChild"!==t.type||(i[t.id]=t)})),this.saveImages(i)}},editSection:function(){this.$emit("editSection",this.nowSection.id)},openShareProject:function(){this.openShareDialog()}}}},odUF:function(t,e,n){"use strict";var i=n("V5SA");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},pH5y:function(t,e,n){"use strict";var i,a,o,r,s,c,u,l,d=n("RIqP"),p=n.n(d),h=n("o0o1"),f=n.n(h),m=n("yXPU"),g=n.n(m),v=n("XIp8"),b=n("Q9PM"),x=n("nyhT"),w=n("hyaS"),y=n.n(w);e.a={data:function(){return{upload:{tempUpFiles:{},imagesMap:{},moveEvent:null,fileListUploadQueue:new WeakMap}}},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.stageContainer.addEventListener("drop",t.dropAddImages),document.addEventListener("paste",t.pasteAddImages),t.$refs.stageContainer.addEventListener("mousemove",t.getEvent)}))},methods:{dropAddImages:function(t){if("onlooker"===this.userRole)return!1;t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;this.doAddImages(e,t)},pasteAddImages:function(t){if("onlooker"===this.userRole)return!1;if(this.stage.copyData.length)return!1;if(t.clipboardData||t.originalEvent){var e,n,i,a=(t.clipboardData||t.originalEvent.clipboardData||{}).files;if(a.length)console.warn("[paste image] name:".concat(null==a||null===(e=a[0])||void 0===e?void 0:e.name," size:").concat(null==a||null===(n=a[0])||void 0===n?void 0:n.size," (").concat((null==a||null===(i=a[0])||void 0===i?void 0:i.size)/1024/1024,"MB)")),this.doAddImages(a,this.moveEvent,{isPaste:!0})}},getEvent:function(t){this.moveEvent=t},doAddImages:(l=g()(f.a.mark((function t(e,n,i){var a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t){if(!t||!t.length)return[];for(var e=[],n=/image\/(png|jpeg|gif)/,i=0;i<t.length;i++){var a=t[i];if(n.test(a.type))if(a.getAsFile){var o=a.getAsFile();e.push(o)}else e.push(a)}return e},a=o(e),t.next=4,this.isImageLimit(a.length);case 4:if(!t.sent){t.next=7;break}return t.abrupt("return");case 7:this.uploadFiles(a,n,i),a.length&&window.Analyze("board_upload_image",{mode:"drag",length:a.length}),a.length!==e.length&&LanhuDialog.toast(this.$i18n("拖拽上传支持 PNG、JPG、GIF 格式"),3e3);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return l.apply(this,arguments)}),isImageLimit:(u=g()(f.a.mark((function t(e){var n,i,a=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,t.next=3,this.isTeamLimitFn();case 3:if(!t.sent){t.next=6;break}return t.abrupt("return",!0);case 6:if(e!==n){t.next=8;break}return t.abrupt("return",!1);case 8:return t.next=10,this.getMininLimitImage();case 10:if(i=t.sent,!Object(b.b)(i)){t.next=15;break}return LanhuDialog.msg(this.$i18n("该项目已到达 ${limit} 张设计图上限，建议新建项目后，继续上传",{limit:i.hard_limit_cnt}),"上传失败","onlyok","好的"),t.abrupt("return",!0);case 15:if(!Object(b.c)(i,e)||this.onCustom){t.next=19;break}return LanhuDialog.msg(this.$i18n("该项目可再上传 ${difflen} 张设计图，建议重新选择设计图或新建项目后，继续上传",{difflen:i.hard_limit_cnt-i.cur_cnt}),"上传失败","onlyok","好的"),t.abrupt("return",!0);case 19:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)}),isTeamLimitFn:(c=g()(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isTeamOverflow();case 2:if(!t.sent){t.next=6;break}return Object(b.a)(this.team_id,this.isFreeTeam),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),isTeamOverflow:(s=g()(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTeamQuotaInfo();case 2:return e=t.sent,n=Object(b.i)(e),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)}),getTeamQuotaInfo:(r=g()(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.team_id||this.$route.query.team_id||this.$route.query.teamId,t.next=3,API.apiBase.project.getTeamQuota({team_id:e});case 3:if(!(n=t.sent)){t.next=6;break}return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),getMininLimitImage:(o=g()(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,API.apiBase.project.getImageLimit({team_id:this.team_id,project_id:this.$route.query.pid||window.pid});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),uploadFiles:(a=g()(f.a.mark((function t(e,n,i){var a,o,r,s,c,u,l,d;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d=function(){return(d=g()(f.a.mark((function t(i){var r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.info("[图片上传完成] ",i),console.info("[ self.tempUpFiles] ",o.upload.tempUpFiles),r=a.get(e),i.file.itemId&&o.upload.imagesMap[i.file.itemId]&&i.url&&(s=i.url,o.isEnterprise&&(s=i.hostURL),o.upload.imagesMap[i.file.itemId].url=s,null==r||r.add(o.upload.imagesMap[i.file.itemId]),a.set(e,r)),e.length!==(null==r?void 0:r.size)){t.next=8;break}return t.next=7,o.stageDragAddImgs(n,Object(v.a)(p()(r)));case 7:a.delete(e);case 8:window.Analyze("本地上传设计图成功",{code:"10042"},"lanhu");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)},l=function(t){return d.apply(this,arguments)},c=function(){return(c=g()(f.a.mark((function t(e){var n,a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=uuid.v4(),o.upload.tempUpFiles[e.id]=e,o.upload.tempUpFiles[e.id].itemId=n,t.next=5,y()(e);case 5:if((a=t.sent).height=a.height/4,a.width=a.width/4,r=e.name||"",!Object(x.d)(e,(null==i?void 0:i.isPaste)?2*x.a:x.a)){t.next=11;break}return t.abrupt("return");case 11:o.upload.imagesMap[n]={name:r,width:a.width,height:a.height,url:""};case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(t){return c.apply(this,arguments)},(a=this.upload.fileListUploadQueue).has(e)||a.set(e,new Set),o=this,r=0;case 8:if(!(r<e.length)){t.next=20;break}case 9:if(e[r].id){t.next=15;break}return t.next=12,this.sleep(300);case 12:!e[r].id&&e[r].size&&(e[r].id="web"+uuid.v4()),t.next=9;break;case 15:return t.next=17,s(e[r]);case 17:r++,t.next=8;break;case 20:Object(x.e)(e,LanhuDialog.toast,"",(null==i?void 0:i.isPaste)?2*x.a:x.a),window.useCustomServer?LanFileInput.uploadToCustomServer(e,null,l):window.cloudType&&"bos"==window.cloudType?LanFileInput.uploadToBaidu(e,null,l):(u={team_id:o.team_id,project_id:o.$route.query.pid||window.pid},(null==i?void 0:i.isPaste)&&(u.max_size=2*x.a),o.stageDragAddImgs(n,Object(v.a)(Object.values(o.upload.imagesMap)),{uploadImages:Object(x.c)(e,u,o)}),o.upload.imagesMap={},a.delete(e),window.Analyze("本地上传设计图成功",{code:"10042"},"lanhu"));case 22:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return a.apply(this,arguments)}),sleep:(i=g()(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){setTimeout((function(){t()}),e)})));case 1:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},beforeDestroy:function(){this.$refs.stageContainer.removeEventListener("mousemove",this.getEvent),this.$refs.stageContainer.removeEventListener("drop",this.dropAddImages),document.removeEventListener("paste",this.pasteAddImages)},computed:{userRole:function(){var t,e=localStorage.role;return"share_board"===(null===(t=this.$route.query)||void 0===t?void 0:t.type)&&(e="onlooker"),e||"onlooker"}}}},pKMO:function(t,e,n){"use strict";var i=n("DHdp");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},qLM1:function(t,e,n){"use strict";var i=n("CCUK");e.a=i.a},qWsP:function(t,e,n){var i=n("ROHa");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("cd1cff8e",i,!1,{})},qXSK:function(t,e,n){var i=n("zrxP");"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,a);i.locals&&(t.exports=i.locals)},qnNv:function(t,e,n){"use strict";var i=n("cQ6N");n.n(i).a},qrpJ:function(t,e,n){"use strict";var i=n("Xdlb");e.a=i.a},r2uM:function(t,e,n){"use strict";var i=n("7329");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},r5qH:function(t,e,n){t.exports=n.p+"imgs/add_design_icon05305164.svg"},rODK:function(t,e,n){"use strict";var i=n("A5Qv");n.n(i).a},rTZi:function(t,e,n){"use strict";var i=n("9xh5"),a=n("6+IX"),o=(n("mcc0"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/ui/NewNewStage/PageNewBoard/components/lan-upload-editor.vue",e.a=r.exports},rlqu:function(t,e,n){"use strict";var i=n("qWsP");n.n(i).a},rxNT:function(t,e,n){"use strict";var i=n("5/f7");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},s0Q8:function(t,e,n){"use strict";var i=n("50Re");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},s2tH:function(t,e,n){"use strict";var i=n("EC5t");e.a=i.a},s622:function(t,e,n){"use strict";var i=n("zsQ6");n.n(i).a},sFVj:function(t,e,n){"use strict";var i=n("MePe");n.n(i).a},"t2+j":function(t,e,n){"use strict";var i=n("42Q2");n.n(i).a},tT5i:function(t,e,n){"use strict";var i=n("qXSK");n.n(i).a},u5gX:function(t,e,n){"use strict";e.a={components:{},mixins:[],props:{open:{type:Boolean,default:!1},xy:{type:Object,default:{x:0,y:0}},anchorOrigin:{type:Object,default:{vertical:"bottom",horizontal:"right"}},targetOrigin:{type:Object,default:{vertical:"top",horizontal:"right"}},trigger:{type:Element,default:void 0}},data:function(){return{}},computed:{stylePositionDot:function(){return{top:"".concat(this.xy.y,"px"),left:"".concat(this.xy.x,"px")}}},watch:{},mounted:function(){this.$nextTick((function(){}))},beforeDestroy:function(){},methods:{doClose:function(){this.$emit("close",{success:!0})}}}},uiMb:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"search"},on:{click:function(t){t.stopPropagation()},keyup:function(e){return e.type.indexOf("key")||27===e.keyCode?(e.stopPropagation(),t.closeSearch(e)):null},"mouse-wheel":function(e){return t.scrollPage(e)}}},[i("div",{staticClass:"search_bar"},[i("div",{staticClass:"text"},[i("i"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",id:"search_input",autofocus:"",placeholder:t.$i18n("支持拼音搜索")},domProps:{value:t.keywords},on:{keyup:function(e){return t.search(e)},input:function(e){e.target.composing||(t.keywords=e.target.value)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.delShow,expression:"delShow"}],attrs:{id:"delAll"},on:{click:t.delAll}})])]),t._v(" "),t.show?i("div",{staticClass:"tip_box"},[t.imgs.length?i("div",{staticClass:"tip"},[t._v("\n      "+t._s(t.$i18n("搜索到"))),i("span",[t._v(t._s(t.imgs.length))]),t._v(t._s(t.$i18n("个相关页面"))+"\n    ")]):t._e()]):t._e(),t._v(" "),t.show?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgs.length,expression:"!imgs.length"}],staticClass:"default"},[i("img",{attrs:{src:n("pYWR")}}),t._v(" "),i("div",[t._v(t._s(t.$i18n("未找到相关信息，换个词试试吧~")))])]):t._e(),t._v(" "),i("div",{staticClass:"list_box"},[i("waterfall",{attrs:{"line-gap":200,watch:t.imgs}},t._l(t.imgs,(function(e,n,a){return i("waterfall-slot",{key:e.id,staticClass:"img_item",attrs:{width:e.width,height:e.height,order:a}},[i("div",{on:{click:function(n){return t.returnBoard(e.id)},dblclick:function(n){return t.openImage(e)}}},[i("span",{staticClass:"name"},[i("span",{domProps:{innerHTML:t._s(e.name)}})]),t._v(" "),"card"!==e.type?i("img",{attrs:{vid:e.id,id:e.id,src:e.url,alt:e.name}}):t._e(),t._v(" "),"card"==e.type?i("div",{staticClass:"card_item",attrs:{vid:e.id,id:e.id},domProps:{innerHTML:t._s(t.$replaceStrXSS(e.name))}}):t._e()])])})),1)],1),t._v(" "),i("span",{staticClass:"close search_close",on:{click:t.closeSearch}}),t._v(" "),i("div",{staticClass:"tempDiv"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}],attrs:{id:"loading"}},[i("img",{attrs:{src:n("m3hL"),alt:""}})])])},a=[];i._withStripped=!0},v14X:function(t,e,n){"use strict";var i=n("BVUy");n.n(i).a},vxoT:function(t,e,n){"use strict";var i,a=n("o0o1"),o=n.n(a),r=n("yXPU"),s=n.n(r);e.a={components:{},inject:["stageFn"],props:["group"],data:function(){return{}},computed:{stage:function(){return this.stageFn()}},watch:{},mounted:function(){this.$nextTick((function(){}))},methods:{doOk:function(){this.$emit("confirm")},doCancel:function(){this.$emit("cancel")},doDelete:(i=s()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.stage.deleteSection({id:this.group.id});case 2:this.$emit("cancel");case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),doEditTitle:function(){this.stage.editGroupName(this.group)},cancelAll:function(){this.$emit("cancelAll")}}}},wIk4:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("o0o1"),a=n.n(i),o=n("yXPU"),r=n.n(o),s=n("RIqP"),c=n.n(s),u=n("lwsE"),l=n.n(u),d=n("W8MJ"),p=n.n(d),h=n("lSNA"),f=n.n(h),m=n("KnD/"),g=function(){function t(e,n){var i=this;if(l()(this,t),f()(this,"items",{}),f()(this,"itemTree",[]),f()(this,"images",{}),f()(this,"imageList",[]),f()(this,"activeItem",null),f()(this,"API",{}),f()(this,"request",{}),Array.isArray(e)){var a=n.images,o=n.API;this.imageList=a,this.genImages(),e.forEach((function(t){i.items[t.id]=i.format(t)})),this.API=o,this.request=new m.a(o,this.items),this.genTree()}}var e,n,i,o,s,u;return p()(t,[{key:"genImages",value:function(){Object.defineProperty(this,"images",{get:function(){var t={};return this.imageList.forEach((function(e){t[e.id]=e})),t}})}},{key:"format",value:function(t){var e={};return e.id=t.id,e.uuid=t.id,e.name=t.name,e.order=t.order,e.parentId=t.parent_id,e.children=this.setChildren(t.images,e.id),e.subImageIds=t.images,e.subGroupIds=[],e.groupType="groupType",e}},{key:"setChildren",value:function(t,e){var n=this,i=[];return t.forEach((function(t){var a=n.images[t];if(a){var o=n.formatImage(a);i.push(o)}else console.error("分组内的图片不存在,groupId:".concat(e,",imageId:").concat(t))})),i}},{key:"formatImage",value:function(t){var e={id:null==t?void 0:t.id,uuid:uuid.v4(),type:null==t?void 0:t.type,order:null==t?void 0:t.order,url:null==t?void 0:t.url,name:null==t?void 0:t.name,source:t};return Object.defineProperty(e,"name",{get:function(){return null==t?void 0:t.name}}),e}},{key:"genTree",value:function(){var t=this,e=Object.values(this.items);e.sort((function(t,e){return e.order-t.order})),e.forEach((function(e){var n,i=e.parentId;i?null===(n=t.items[i])||void 0===n||n.children.push(e):t.itemTree.push(e)})),e.forEach((function(e){t.groupSort(e),t.updateGroupSub(e.id)}));var n=this.genNoGroup();this.items.noGroup=n,this.itemTree.push(n)}},{key:"groupSort",value:function(t){var e="string"==typeof t?this.items[t]:t,n=e.children.filter((function(t){return t.groupType})),i=e.children.filter((function(t){return!t.groupType}));n.sort((function(t,e){return e.order-t.order})),e.children=[].concat(c()(n),c()(i))}},{key:"genNoGroup",value:function(){var t=this,e={id:"noGroup",uuid:"noGroup",name:"未分组",children:[],parentId:null,order:-1,subImageIds:[],subGroupIds:[],groupType:"groupType"},n=Object.values(this.items).reduce((function(t,e){return[].concat(c()(t),c()(e.subImageIds))}),[]);return Object.values(this.images).forEach((function(i){n.includes(i.id)||(e.subImageIds.push(i.id),e.children.push(t.formatImage(i)))})),e}},{key:"createGroup",value:(u=r()(a.a.mark((function t(e){var n,i,o,r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=this.format(e)).id||(o.id=uuid.v4()),this.items[o.id]=o,(r=o.parentId)?this.addIntoGroup(r,[o.id]):this.itemTree.unshift(o),this.updateNoGroupImages([],o.subImageIds),t.next=8,this.request.createGroup(o.id);case 8:return(null==(s=t.sent)||null===(n=s.data)||void 0===n||null===(i=n.images)||void 0===i?void 0:i.length)&&(o.children=this.setChildren(s.data.images,o.id),o.subImageIds=s.data.images),t.abrupt("return",o.id);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"editGroupName",value:function(t,e){return this.items[t].name=e.replace(/^\s*/,""),this.request.updateGroup({groupId:t,name:e}),t}},{key:"editGroupImages",value:(s=r()(a.a.mark((function t(e,n){var i,o,r,s,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.items[e],o=this.getGroupChildrenIds(i),r=o.imageIds,s=this.filterIds(r,n),c=s.add,u=s.remove,t.next=5,this.updateGroupImages(e,{addImageIds:c,rmImageIds:u});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"updateGroupImages",value:(o=r()(a.a.mark((function t(e,n){var i,o,r,s,u,l,d,p,h,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.addImageIds,r=n.rmImageIds,(null==o?void 0:o.length)||(null==r?void 0:r.length)){t.next=3;break}return t.abrupt("return");case 3:return n.groupId=e,t.next=6,this.request.updateGroup(n);case 6:s=t.sent,u=this.items[e],l=this.getGroupChildrenIds(u),d=l.imageIds,(null==s||null===(i=s.data)||void 0===i?void 0:i.images)&&(d=null==s||null===(p=s.data)||void 0===p?void 0:p.images),h=u.children.filter((function(t){return t.groupType})),f=this.getImagesById(d),u.children=[].concat(c()(h),c()(f)),this.updateGroupSub(e),this.updateNoGroupImages(r,o);case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"updateNoGroupImages",value:function(t,e){var n=this,i=this.items.noGroup;if(console.warn("toAddIds",t,"toRemoveIds",e),null==t?void 0:t.length){var a,o=t.filter((function(t){return!n.isInGroup(t)})),r=this.getImagesById(o);(a=i.children).push.apply(a,c()(r))}if(null==e?void 0:e.length){var s=e.filter((function(t){return n.isInGroup(t)}));i.children=i.children.filter((function(t){return!s.includes(t.id)}))}this.updateGroupSub("noGroup")}},{key:"isInGroup",value:function(t){return Object.values(this.items).filter((function(t){return"noGroup"!==t.id})).some((function(e){return e.subImageIds.includes(t)}))}},{key:"addIntoGroup",value:function(t,e){var n=this,i=this.items[t];e.forEach((function(e){var a=n.images[e]||n.items[e];a.groupType?(i.children.unshift(a),a.parentId=t,n.updateGroupSub(t)):(i.children.push(n.formatImage(a)),n.updateGroupSub(t))}))}},{key:"removeFromGroup",value:function(t,e){var n=this,i=this.items[t];e.forEach((function(e){var a=n.images[e]||n.items[e];a.groupType&&(a.parentId=null),i.children=i.children.filter((function(t){return t.id!==e})),n.updateGroupSub(t)}))}},{key:"deleteGroup",value:(i=r()(a.a.mark((function t(e){var n,i,o=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.items[e],(i=n.parentId)?this.removeFromGroup(i,[e]):this.itemTree=this.itemTree.filter((function(t){return t.id!==e})),delete this.items[e],n.subGroupIds.forEach((function(t){delete o.items[t]})),this.updateNoGroupImages(n.subImageIds),t.next=8,this.request.deleteGroups([e]);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"deleteImagesFromGroup",value:(n=r()(a.a.mark((function t(e){var n,i,o,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e?void 0:e.length){t.next=2;break}return t.abrupt("return");case 2:if(n={},Object.values(this.items).forEach((function(t){t.children=t.children.filter((function(i){return e.includes(i.id)&&"noGroup"!==t.id&&(n[t.id]?n[t.id].push(i.id):n[t.id]=[i.id]),!e.includes(i.id)})),t.subImageIds=t.subImageIds.filter((function(t){return!e.includes(t)}))})),console.warn("groupsDelData",n),!Object.values(n).length){t.next=12;break}for(o in i=[],n)n.hasOwnProperty(o)&&(r=this.request.updateGroup({groupId:o,rmImageIds:n[o]}),i.push(r));return t.next=11,Promise.all(i).then((function(t){return t})).catch((function(t){return console.error("从分组中删除图片失败",t),!1}));case 11:return t.abrupt("return",t.sent);case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"updateGroupSub",value:function(t){var e=this,n=this.items[t],i=this.getGroupChildrenIds(n),a=i.groupIds,o=i.imageIds;if(a.length){var r=[],s=[];a.forEach((function(t){r.push.apply(r,c()(e.items[t].subImageIds)),s.push.apply(s,c()(e.items[t].subGroupIds))})),n.subImageIds=[].concat(c()(o),r),n.subGroupIds=c()(new Set([].concat(c()(a),s)))}else n.subGroupIds=a,n.subImageIds=o;n.parentId&&this.updateGroupSub(n.parentId)}},{key:"getGroupChildrenIds",value:function(t){var e,n=[],i=[];return null==t||null===(e=t.children)||void 0===e||e.forEach((function(t){t.groupType?n.push(t.id):i.push(t.id)})),{groupIds:n,imageIds:i}}},{key:"filterIds",value:function(t,e){return{add:e.filter((function(e){return!t.includes(e)})),remove:t.filter((function(t){return!e.includes(t)}))}}},{key:"getImagesById",value:function(t){var e=this;return t.map((function(t){return e.formatImage(e.images[t])}))}},{key:"moveImgToGroup",value:(e=r()(a.a.mark((function t(e,n){var i,o,r,s,u,l,d,p,h,f,m=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(i=n.moveImages)?void 0:i.length){t.next=3;break}return t.abrupt("return");case 3:return o=this.items[e],r=this.getGroupChildrenIds(o),s=r.imageIds,u=i.filter((function(t){return!s.includes(t)})),l=o.children.filter((function(t){return t.groupType})),d=this.getImagesById(s),p=this.getImagesById(u),(null==u?void 0:u.length)>0&&(o.children=[].concat(c()(l),c()(d),c()(p))),n.targetSectorId=e,t.next=13,this.request.moveImageToGroup(n);case 13:if(h=t.sent,(null==u?void 0:u.length)>0&&(this.updateGroupSub(e),this.updateNoGroupImages([],u)),null==(f=h.data.old_sectors)?void 0:f.length){t.next=18;break}return t.abrupt("return");case 18:f.forEach((function(t){var e=m.items[t],n=m.getGroupChildrenIds(e).imageIds.filter((function(t){return!i.includes(t)})),a=m.getImagesById(n),o=e.children.filter((function(t){return t.groupType}));e.children=[].concat(c()(o),c()(a)),m.updateGroupSub(t)}));case 19:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}()},wIw1:function(t,e,n){"use strict";var i=n("+UTG");n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return i.b}))},wyV1:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".lan-upload-shadow {\n  background: rgba(14, 23, 38, 0.1);\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.lan-upload {\n  position: absolute;\n  z-index: 23;\n  right: 0;\n  left: 0;\n  margin: auto;\n  top: 30%;\n  border-radius: 4px;\n  background-color: white;\n  text-align: left;\n  box-shadow: 0 8px 10px 0 rgba(0, 0, 0, 0.05), 0 6px 20px 5px rgba(40, 120, 255, 0.1), 0 16px 24px 2px rgba(0, 0, 0, 0.05);\n  /*padding: 24px;*/\n  padding: 30px 25px;\n  color: #0e1726;\n  /*width: 640px;*/\n  /*height: 240px;*/\n  width: 957px;\n  height: 212px;\n  white-space: nowrap;\n}\n.lan-upload .title {\n  font-size: 20px;\n  /*font-weight: 500;*/\n  /*margin-bottom: 6px;*/\n  line-height: 1;\n  margin-bottom: 30px;\n}\n.lan-upload .box {\n  display: inline-block;\n  /*width: 300px;*/\n  /*width: 33%;*/\n  text-align: center;\n  /*padding: 15px 0;*/\n  position: relative;\n  width: 180px;\n}\n.lan-upload .box.first {\n  vertical-align: top;\n  /*margin-top: 2px;*/\n  border-right: 1px solid #d8d8d8;\n  padding-right: 14px;\n}\n.lan-upload .box .title {\n  font-size: 14px;\n  color: #333333;\n  /*font-weight: 400;*/\n  margin-bottom: 30px;\n  /*font-weight: bold;*/\n}\n.lan-upload .box .title .sub-note {\n  font-weight: 500;\n  color: #999999;\n  margin-top: 9px;\n  font-size: 12px;\n}\n.lan-upload .box .ld {\n  display: inline-block;\n  position: absolute;\n  border-right: 1px solid rgba(0, 0, 0, 0.21);\n  width: 1px;\n  height: 110px;\n  right: 0;\n  top: 20px;\n}\n.lan-upload .box .mu-raised-button-wrapper,\n.lan-upload .box .mu-flat-button-wrapper span {\n  font-size: 14px;\n}\n.lan-upload .box .mu-flat-button-wrapper span img {\n  margin-top: -3px !important;\n}",""])},zBNK:function(t,e,n){var i=n("J2EC");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("3711bbb9",i,!1,{})},zPhe:function(t,e,n){var i=n("QFeR");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("4f9f7886",i,!1,{})},"zQK/":function(t,e,n){"use strict";var i=n("mfCF"),a=n("aUI+"),o=(n("/6rT"),n("KHd+")),r=Object(o.a)(a.a,i.a,i.b,!1,null,null,null);r.options.__file="src/view/project/editor/components/line-box.vue",e.a=r.exports},zSBB:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("menu-base",{attrs:{open:t.menuOpen,xy:t.xy,trigger:t.menuTrigger,targetOrigin:{vertical:"top",horizontal:"left"}},on:{close:t.close}},[n("mu-menu",[n("mu-menu-item",{attrs:{value:"1",disabled:t.$g.role.userIsGuest()},on:{click:t.editSection}},[n("div",{class:{disable:t.$g.role.userIsGuest(),"menu-title-add-design":!0},attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(t.$i18n("添加设计图"))+"\n      ")])]),t._v(" "),n("mu-menu-item",{attrs:{value:"2",disabled:t.$g.role.userIsGuest()},on:{click:t.createGroup}},[n("div",{class:{disable:t.$g.role.userIsGuest(),"menu-title-add-section":!0},attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(t.$i18n("新建子分组"))+"\n      ")])])],1)],1)},a=[];i._withStripped=!0},zrxP:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},zsQ6:function(t,e,n){var i=n("k3UP");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("091545d4",i,!1,{})},"zz/o":function(t,e,n){t.exports=n.p+"imgs/shift_select_tips32edc1a1.png"}}]);